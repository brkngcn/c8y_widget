import { Component, ContentChild, ContentChildren, ElementRef, EventEmitter, HostBinding, Input, Output } from '@angular/core';
import { Subject } from 'rxjs';
import { delay, filter, takeUntil, tap } from 'rxjs/operators';
import { ListItemActionComponent } from './list-item-action.component';
import { ListItemCollapseComponent } from './list-item-collapse.component';
import { ListItemFooterComponent } from './list-item-footer.component';
/**
 * A list item is a representation of an item inside a list and
 * can be used to compose different styles in a list (mainly in a
 * <c8y-group-list>-component but also in others like the
 * <c8y-typeahead>-component):
 *  - a list with a footer
 *  - a list with one or multiple actions
 *  - an icon
 *  - a checkbox or radio input
 *
 * The item can be composed via content projection. The following
 * example shows a radio list with an icon, two actions
 * and a footer:
 * ```html
 * <c8y-list-group>
 *   <c8y-li
 *     *c8yFor="
 *       let device of devices;
 *       let i = index;
 *     "
 *   >
 *     <c8y-li-radio (onSelect)="updateSelected($event, device)"></c8y-li-radio>
 *     <c8y-li-icon [icon]="'rocket'"></c8y-li-icon>
 *     {{ i + 1 }}. {{ device.name || '-' }}
 *     <c8y-li-footer>
 *       Device id: <a [routerLink]="['/device', device.id]">{{ device.id }}</a>
 *     </c8y-li-footer>
 *     <c8y-li-action (click)="deleteDevice(device.id)" icon="times">
 *       Delete
 *     </c8y-li-action>
 *     <c8y-li-action (click)="(false)" icon="rocket">
 *       Launch to space
 *     </c8y-li-action>
 *   </c8y-li>
 * </c8y-list-group>
 * ```
 */
import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from '@angular/common';
import * as ɵngcc2 from '../common/icon.directive';
import * as ɵngcc3 from 'ngx-bootstrap/dropdown';
import * as ɵngcc4 from 'ngx-bootstrap/collapse';
import * as ɵngcc5 from '../i18n/c8y-translate.pipe';

function ListItemComponent_div_9_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "div", 6);
    ɵngcc0.ɵɵprojection(1, 6);
    ɵngcc0.ɵɵelementEnd();
} }
function ListItemComponent_div_10_button_1_Template(rf, ctx) { if (rf & 1) {
    const _r7 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "button", 11);
    ɵngcc0.ɵɵlistener("click", function ListItemComponent_div_10_button_1_Template_button_click_0_listener($event) { ɵngcc0.ɵɵrestoreView(_r7); const ctx_r6 = ɵngcc0.ɵɵnextContext(2); return ctx_r6.toggleCollapsed($event); });
    ɵngcc0.ɵɵpipe(1, "translate");
    ɵngcc0.ɵɵelement(2, "i", 12);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r3 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵpropertyInterpolate("title", ɵngcc0.ɵɵpipeBind1(1, 3, "Expand"));
    ɵngcc0.ɵɵattribute("aria-expanded", !ctx_r3.collapsed);
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵproperty("c8yIcon", "chevron-down");
} }
function ListItemComponent_div_10_div_2_ul_4_ng_container_2_ng_container_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainer(0);
} }
function ListItemComponent_div_10_div_2_ul_4_ng_container_2_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementContainerStart(0);
    ɵngcc0.ɵɵtemplate(1, ListItemComponent_div_10_div_2_ul_4_ng_container_2_ng_container_1_Template, 1, 0, "ng-container", 18);
    ɵngcc0.ɵɵelementContainerEnd();
} if (rf & 2) {
    const action_r10 = ctx.$implicit;
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngTemplateOutlet", action_r10.template);
} }
function ListItemComponent_div_10_div_2_ul_4_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "ul", 16);
    ɵngcc0.ɵɵprojection(1, 7);
    ɵngcc0.ɵɵtemplate(2, ListItemComponent_div_10_div_2_ul_4_ng_container_2_Template, 2, 1, "ng-container", 17);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r8 = ɵngcc0.ɵɵnextContext(3);
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵproperty("ngForOf", ctx_r8.actions);
} }
function ListItemComponent_div_10_div_2_Template(rf, ctx) { if (rf & 1) {
    const _r13 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "div", 13);
    ɵngcc0.ɵɵlistener("onShown", function ListItemComponent_div_10_div_2_Template_div_onShown_0_listener() { ɵngcc0.ɵɵrestoreView(_r13); const ctx_r12 = ɵngcc0.ɵɵnextContext(2); return ctx_r12.showDropdownUp(); });
    ɵngcc0.ɵɵelementStart(1, "button", 14);
    ɵngcc0.ɵɵpipe(2, "translate");
    ɵngcc0.ɵɵelement(3, "i", 12);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵtemplate(4, ListItemComponent_div_10_div_2_ul_4_Template, 3, 1, "ul", 15);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r4 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵproperty("dropup", ctx_r4.dropdownUp);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵpropertyInterpolate("title", ɵngcc0.ɵɵpipeBind1(2, 3, "Actions"));
    ɵngcc0.ɵɵadvance(2);
    ɵngcc0.ɵɵproperty("c8yIcon", "ellipsis-v");
} }
function ListItemComponent_div_10_ng_content_3_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵprojection(0, 8, ["*ngIf", "showActions"]);
} }
function ListItemComponent_div_10_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "div", 7);
    ɵngcc0.ɵɵtemplate(1, ListItemComponent_div_10_button_1_Template, 3, 5, "button", 8);
    ɵngcc0.ɵɵtemplate(2, ListItemComponent_div_10_div_2_Template, 5, 5, "div", 9);
    ɵngcc0.ɵɵtemplate(3, ListItemComponent_div_10_ng_content_3_Template, 1, 0, "ng-content", 10);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r1 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r1.showCollapse && ctx_r1.itemCollapse.collapseWay === "button");
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r1.showActions);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r1.showActions);
} }
function ListItemComponent_div_11_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "div", 19);
    ɵngcc0.ɵɵelementStart(1, "div", 20);
    ɵngcc0.ɵɵprojection(2, 9);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const ctx_r2 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵproperty("collapse", ctx_r2.collapsed)("isAnimated", true);
} }
const _c0 = [[["c8y-list-item-drag-handle"], ["c8y-li-drag-handle"]], [["c8y-list-item-radio"], ["c8y-li-radio"]], [["c8y-list-item-checkbox"], ["c8y-li-checkbox"]], [["c8y-list-item-icon"], ["c8y-li-icon"]], [["c8y-list-item-body"], ["c8y-li-body"]], "*", [["c8y-list-item-footer"], ["c8y-li-footer"]], [["c8y-list-item-action"], ["c8y-li-action"]], [["c8y-list-item-action"], ["c8y-li-action"]], [["c8y-list-item-collapse"], ["c8y-li-collapse"]]];
const _c1 = function (a0, a1) { return { "expanded": a0, interact: a1 }; };
const _c2 = ["c8y-list-item-drag-handle, c8y-li-drag-handle", "c8y-list-item-radio, c8y-li-radio", "c8y-list-item-checkbox, c8y-li-checkbox", "c8y-list-item-icon, c8y-li-icon", "c8y-list-item-body, c8y-li-body", "*", "c8y-list-item-footer, c8y-li-footer", "c8y-list-item-action, c8y-li-action", "c8y-list-item-action, c8y-li-action", "c8y-list-item-collapse, c8y-li-collapse"];
export class ListItemComponent {
    /**
     * @ignore
     */
    constructor(element) {
        this.element = element;
        /**
         * If set to true, the class "active" is added which
         * indicates that the current row is active.
         */
        this.active = false;
        /**
         * If set to true, the class "c8y-list__item--empty-actions" is added which adds
         * additional padding to compensate for the "actions" column in other list items.
         */
        this.emptyActions = false;
        /**
         * Indicates if the current list item is collapsed. You can trigger the collapsing from
         * any element event by toggling this value.
         *
         * @example
         * ```html
         * <c8y-li #li (click)="li.collapsed = !li.collapsed">
         *  Toggle
         *  <c8y-li-collapse>
         *    I can be toggled by clicking on the row.
         *  </c8y-li-collapse
         * </c8y-li>
         * ``
         */
        this.collapsed = true;
        /**
         * Indicates if the current list item is selectable.
         */
        this.selectable = true;
        /**
         * An event emitter which is triggered when the user collapses the content
         * via the chevron on the right.
         */
        this.collapsedChange = new EventEmitter();
        /**
         * @ignore
         */
        this.showFooter = false;
        /**
         * @ignore
         */
        this.showActions = false;
        /**
         * @ignore
         */
        this.showCollapse = false;
        /**
         * @ignore
         */
        this.dropdownUp = false;
        this.pulse$ = new Subject();
        this.destroy$ = new Subject();
        this.ACTION_ITEM_HEIGHT = 40;
    }
    /**
     * @ignore
     */
    ngOnInit() {
        this.pulse$
            .pipe(filter(apply => !!apply), tap(() => this.element.nativeElement.classList.remove('c8y-list--pulse')), delay(100), tap(() => this.element.nativeElement.classList.add('c8y-list--pulse')), takeUntil(this.destroy$))
            .subscribe();
    }
    /**
     * @ignore
     */
    ngAfterContentChecked() {
        this.actions = this.itemActions.toArray();
        this.showFooter = this.itemFooter != null;
        this.showActions = this.itemActions.length > 0;
        this.showCollapse = this.itemCollapse != null;
    }
    /**
     * @ignore
     */
    ngOnDestroy() {
        this.destroy$.next();
        this.destroy$.complete();
    }
    /**
     * A helper function which helps to determine if the dropdown
     * should toggle up.
     */
    showDropdownUp() {
        const listItemRect = this.element.nativeElement.getBoundingClientRect();
        const dropdownTop = listItemRect.top;
        const dropdownHeightWithToggle = (1 + this.itemActions.length) * this.ACTION_ITEM_HEIGHT;
        const availableHeight = window.innerHeight;
        const dropdownDownFits = dropdownTop + dropdownHeightWithToggle <= availableHeight;
        this.dropdownUp = !dropdownDownFits;
    }
    /**
     * Toggles the collapse state and emits this state as
     * collapsedChange output as boolean.
     * @param $event Pass optional an event to stop propagation.
     */
    toggleCollapsed($event) {
        if ($event) {
            $event.stopPropagation();
        }
        this.collapsed = !this.collapsed;
        this.collapsedChange.emit(this.collapsed);
    }
    /**
     * Highlights the list-item. This method should be used to show the
     * user that something within this item was changed.
     */
    pulse() {
        this.pulse$.next(true);
    }
}
ListItemComponent.ɵfac = function ListItemComponent_Factory(t) { return new (t || ListItemComponent)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef)); };
ListItemComponent.ɵcmp = /*@__PURE__*/ ɵngcc0.ɵɵdefineComponent({ type: ListItemComponent, selectors: [["c8y-list-item"], ["c8y-li"]], contentQueries: function ListItemComponent_ContentQueries(rf, ctx, dirIndex) { if (rf & 1) {
        ɵngcc0.ɵɵcontentQuery(dirIndex, ListItemFooterComponent, 5);
        ɵngcc0.ɵɵcontentQuery(dirIndex, ListItemCollapseComponent, 5);
        ɵngcc0.ɵɵcontentQuery(dirIndex, ListItemActionComponent, 4);
    } if (rf & 2) {
        let _t;
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.itemFooter = _t.first);
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.itemCollapse = _t.first);
        ɵngcc0.ɵɵqueryRefresh(_t = ɵngcc0.ɵɵloadQuery()) && (ctx.itemActions = _t);
    } }, hostAttrs: [1, "c8y-list__item"], hostVars: 4, hostBindings: function ListItemComponent_HostBindings(rf, ctx) { if (rf & 2) {
        ɵngcc0.ɵɵclassProp("active", ctx.active)("c8y-list__item--empty-actions", ctx.emptyActions);
    } }, inputs: { active: "active", emptyActions: "emptyActions", collapsed: "collapsed", selectable: "selectable" }, outputs: { collapsedChange: "collapsedChange" }, ngContentSelectors: _c2, decls: 12, vars: 7, consts: [[3, "ngClass"], [1, "c8y-list__item__block"], [1, "c8y-list__item__body", "text-truncate-wrap", 3, "click"], ["class", "c8y-list__item__footer", 4, "ngIf"], ["class", "c8y-list__item__actions", 4, "ngIf"], [3, "collapse", "isAnimated", 4, "ngIf"], [1, "c8y-list__item__footer"], [1, "c8y-list__item__actions"], ["class", "collapse-btn", "type", "button", 3, "title", "click", 4, "ngIf"], ["class", "dropdown", "dropdown", "", 3, "dropup", "onShown", 4, "ngIf"], [4, "ngIf"], ["type", "button", 1, "collapse-btn", 3, "title", "click"], [3, "c8yIcon"], ["dropdown", "", 1, "dropdown", 3, "dropup", "onShown"], ["dropdownToggle", "", "type", "button", "aria-haspopup", "true", 1, "dropdown-toggle", "c8y-dropdown", 3, "title"], ["class", "dropdown-menu dropdown-menu-right", 4, "dropdownMenu"], [1, "dropdown-menu", "dropdown-menu-right"], [4, "ngFor", "ngForOf"], [4, "ngTemplateOutlet"], [3, "collapse", "isAnimated"], [1, "c8y-list__item__collapse--container"]], template: function ListItemComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵprojectionDef(_c0);
        ɵngcc0.ɵɵelementStart(0, "div", 0);
        ɵngcc0.ɵɵelementStart(1, "div", 1);
        ɵngcc0.ɵɵprojection(2);
        ɵngcc0.ɵɵprojection(3, 1);
        ɵngcc0.ɵɵprojection(4, 2);
        ɵngcc0.ɵɵprojection(5, 3);
        ɵngcc0.ɵɵelementStart(6, "div", 2);
        ɵngcc0.ɵɵlistener("click", function ListItemComponent_Template_div_click_6_listener() { return ctx.itemCollapse && ctx.itemCollapse.collapseWay === "row" && ctx.toggleCollapsed(); });
        ɵngcc0.ɵɵprojection(7, 4);
        ɵngcc0.ɵɵprojection(8, 5);
        ɵngcc0.ɵɵtemplate(9, ListItemComponent_div_9_Template, 2, 0, "div", 3);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵtemplate(10, ListItemComponent_div_10_Template, 4, 3, "div", 4);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵtemplate(11, ListItemComponent_div_11_Template, 3, 2, "div", 5);
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵproperty("ngClass", ɵngcc0.ɵɵpureFunction2(4, _c1, !ctx.collapsed, ctx.itemCollapse && ctx.itemCollapse.collapseWay === "row"));
        ɵngcc0.ɵɵadvance(9);
        ɵngcc0.ɵɵproperty("ngIf", ctx.showFooter);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", ctx.showCollapse && (ctx.itemCollapse && ctx.itemCollapse.collapseWay === "button") || ctx.showActions);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", ctx.showCollapse);
    } }, directives: [ɵngcc1.NgClass, ɵngcc1.NgIf, ɵngcc2.IconDirective, ɵngcc3.BsDropdownDirective, ɵngcc3.BsDropdownToggleDirective, ɵngcc3.BsDropdownMenuDirective, ɵngcc1.NgForOf, ɵngcc1.NgTemplateOutlet, ɵngcc4.CollapseDirective], pipes: [ɵngcc5.C8yTranslatePipe], encapsulation: 2 });
ListItemComponent.ctorParameters = () => [
    { type: ElementRef }
];
ListItemComponent.propDecorators = {
    active: [{ type: Input }, { type: HostBinding, args: ['class.active',] }],
    emptyActions: [{ type: Input }, { type: HostBinding, args: ['class.c8y-list__item--empty-actions',] }],
    collapsed: [{ type: Input }],
    selectable: [{ type: Input }],
    collapsedChange: [{ type: Output }],
    itemFooter: [{ type: ContentChild, args: [ListItemFooterComponent, { static: false },] }],
    itemActions: [{ type: ContentChildren, args: [ListItemActionComponent,] }],
    itemCollapse: [{ type: ContentChild, args: [ListItemCollapseComponent, { static: false },] }]
};
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(ListItemComponent, [{
        type: Component,
        args: [{
                selector: 'c8y-list-item, c8y-li',
                template: "<div [ngClass]=\"{ 'expanded': !collapsed, interact: (itemCollapse && itemCollapse.collapseWay === 'row')}\">\n  <div class=\"c8y-list__item__block\">\n    <ng-content select=\"c8y-list-item-drag-handle, c8y-li-drag-handle\"></ng-content>\n    <ng-content select=\"c8y-list-item-radio, c8y-li-radio\"></ng-content>\n    <ng-content select=\"c8y-list-item-checkbox, c8y-li-checkbox\"></ng-content>\n\n    <ng-content select=\"c8y-list-item-icon, c8y-li-icon\"></ng-content>\n\n    <div class=\"c8y-list__item__body text-truncate-wrap\" (click)=\"(itemCollapse && itemCollapse.collapseWay === 'row') && toggleCollapsed()\">\n      <ng-content select=\"c8y-list-item-body, c8y-li-body\"></ng-content>\n      <ng-content></ng-content>\n      <div class=\"c8y-list__item__footer\" *ngIf=\"showFooter\">\n        <ng-content select=\"c8y-list-item-footer, c8y-li-footer\"></ng-content>\n      </div>\n    </div>\n\n    <div class=\"c8y-list__item__actions\" *ngIf=\"(showCollapse && (itemCollapse && itemCollapse.collapseWay === 'button')) || showActions\">\n      <button\n        class=\"collapse-btn\"\n        title=\"{{ 'Expand' | translate }}\"\n        type=\"button\"\n        (click)=\"toggleCollapsed($event)\"\n        [attr.aria-expanded]=\"!collapsed\"\n        *ngIf=\"showCollapse && itemCollapse.collapseWay === 'button'\"\n      >\n        <i [c8yIcon]=\"'chevron-down'\"></i>\n      </button>\n      <div\n        class=\"dropdown\"\n        dropdown\n        [dropup]=\"dropdownUp\"\n        *ngIf=\"showActions\"\n        (onShown)=\"showDropdownUp()\"\n      >\n        <button\n          class=\"dropdown-toggle c8y-dropdown\"\n          dropdownToggle\n          title=\"{{ 'Actions' | translate }}\"\n          type=\"button\"\n          aria-haspopup=\"true\"\n        >\n          <i [c8yIcon]=\"'ellipsis-v'\"></i>\n        </button>\n        <ul class=\"dropdown-menu dropdown-menu-right\" *dropdownMenu>\n          <ng-content select=\"c8y-list-item-action, c8y-li-action\"></ng-content>\n          <ng-container *ngFor=\"let action of actions\">\n            <ng-container *ngTemplateOutlet=\"action.template\"></ng-container>\n          </ng-container>\n        </ul>\n      </div>\n\n      <ng-content select=\"c8y-list-item-action, c8y-li-action\" *ngIf=\"showActions\"></ng-content>\n    </div>\n  </div>\n\n  <div *ngIf=\"showCollapse\" [collapse]=\"collapsed\" [isAnimated]=\"true\">\n    <div class=\"c8y-list__item__collapse--container\">\n      <ng-content select=\"c8y-list-item-collapse, c8y-li-collapse\"></ng-content>\n    </div>\n  </div>\n</div>\n",
                host: {
                    class: 'c8y-list__item'
                }
            }]
    }], function () { return [{ type: ɵngcc0.ElementRef }]; }, { active: [{
            type: Input
        }, {
            type: HostBinding,
            args: ['class.active']
        }], emptyActions: [{
            type: Input
        }, {
            type: HostBinding,
            args: ['class.c8y-list__item--empty-actions']
        }], collapsed: [{
            type: Input
        }], selectable: [{
            type: Input
        }], collapsedChange: [{
            type: Output
        }], itemFooter: [{
            type: ContentChild,
            args: [ListItemFooterComponent, { static: false }]
        }], itemActions: [{
            type: ContentChildren,
            args: [ListItemActionComponent]
        }], itemCollapse: [{
            type: ContentChild,
            args: [ListItemCollapseComponent, { static: false }]
        }] }); })();

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGlzdC1pdGVtLmNvbXBvbmVudC5qcyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vY29yZS9saXN0LWdyb3VwL2xpc3QtaXRlbS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUNMLFNBQVMsRUFDVCxZQUFZLEVBQ1osZUFBZSxFQUNmLFVBQVUsRUFDVixZQUFZLEVBQ1osV0FBVyxFQUNYLEtBQUssRUFDTCxNQUFNLEVBRVAsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUFFLE9BQU8sRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUMvQixPQUFPLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQUUsR0FBRyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFDL0QsT0FBTyxFQUFFLHVCQUF1QixFQUFFLE1BQU0sOEJBQThCLENBQUM7QUFDdkUsT0FBTyxFQUFFLHlCQUF5QixFQUFFLE1BQU0sZ0NBQWdDLENBQUM7QUFDM0UsT0FBTyxFQUFFLHVCQUF1QixFQUFFLE1BQU0sOEJBQThCLENBQUM7QUFFdkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFRSCxNQUFNLE9BQU8saUJBQWlCO0FBQzlCLElBeUhFO0FBQ0Y7QUFDRSxPQUFHO0FBQ0wsSUFBRSxZQUFtQixPQUFtQjtBQUFJLFFBQXZCLFlBQU8sR0FBUCxPQUFPLENBQVk7QUFBQyxRQTVIdkM7QUFDRjtB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LHdCQWdCRixLQUFLO0FBQ04seUJBS0MsS0FBSztBQUNOLDhCQU1DLE1BQU07QUFDUCx5QkFjQyxZQUFZLFNBQUMsdUJBQXVCLEVBQUUsRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFO0FBQ3JELDBCQW1CRixlQUFlLFNBQUMsdUJBQXVCO0FBQ3JDLDJCQWNGLFlBQVksU0FBQyx5QkFBeUIsRUFBRSxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUU7QUFDeEQ7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O29CQUFFO0FBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBDb21wb25lbnQsXG4gIENvbnRlbnRDaGlsZCxcbiAgQ29udGVudENoaWxkcmVuLFxuICBFbGVtZW50UmVmLFxuICBFdmVudEVtaXR0ZXIsXG4gIEhvc3RCaW5kaW5nLFxuICBJbnB1dCxcbiAgT3V0cHV0LFxuICBRdWVyeUxpc3Rcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBTdWJqZWN0IH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBkZWxheSwgZmlsdGVyLCB0YWtlVW50aWwsIHRhcCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcbmltcG9ydCB7IExpc3RJdGVtQWN0aW9uQ29tcG9uZW50IH0gZnJvbSAnLi9saXN0LWl0ZW0tYWN0aW9uLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBMaXN0SXRlbUNvbGxhcHNlQ29tcG9uZW50IH0gZnJvbSAnLi9saXN0LWl0ZW0tY29sbGFwc2UuY29tcG9uZW50JztcbmltcG9ydCB7IExpc3RJdGVtRm9vdGVyQ29tcG9uZW50IH0gZnJvbSAnLi9saXN0LWl0ZW0tZm9vdGVyLmNvbXBvbmVudCc7XG5cbi8qKlxuICogQSBsaXN0IGl0ZW0gaXMgYSByZXByZXNlbnRhdGlvbiBvZiBhbiBpdGVtIGluc2lkZSBhIGxpc3QgYW5kXG4gKiBjYW4gYmUgdXNlZCB0byBjb21wb3NlIGRpZmZlcmVudCBzdHlsZXMgaW4gYSBsaXN0IChtYWlubHkgaW4gYVxuICogPGM4eS1ncm91cC1saXN0Pi1jb21wb25lbnQgYnV0IGFsc28gaW4gb3RoZXJzIGxpa2UgdGhlXG4gKiA8Yzh5LXR5cGVhaGVhZD4tY29tcG9uZW50KTpcbiAqICAtIGEgbGlzdCB3aXRoIGEgZm9vdGVyXG4gKiAgLSBhIGxpc3Qgd2l0aCBvbmUgb3IgbXVsdGlwbGUgYWN0aW9uc1xuICogIC0gYW4gaWNvblxuICogIC0gYSBjaGVja2JveCBvciByYWRpbyBpbnB1dFxuICpcbiAqIFRoZSBpdGVtIGNhbiBiZSBjb21wb3NlZCB2aWEgY29udGVudCBwcm9qZWN0aW9uLiBUaGUgZm9sbG93aW5nXG4gKiBleGFtcGxlIHNob3dzIGEgcmFkaW8gbGlzdCB3aXRoIGFuIGljb24sIHR3byBhY3Rpb25zXG4gKiBhbmQgYSBmb290ZXI6XG4gKiBgYGBodG1sXG4gKiA8Yzh5LWxpc3QtZ3JvdXA+XG4gKiAgIDxjOHktbGlcbiAqICAgICAqYzh5Rm9yPVwiXG4gKiAgICAgICBsZXQgZGV2aWNlIG9mIGRldmljZXM7XG4gKiAgICAgICBsZXQgaSA9IGluZGV4O1xuICogICAgIFwiXG4gKiAgID5cbiAqICAgICA8Yzh5LWxpLXJhZGlvIChvblNlbGVjdCk9XCJ1cGRhdGVTZWxlY3RlZCgkZXZlbnQsIGRldmljZSlcIj48L2M4eS1saS1yYWRpbz5cbiAqICAgICA8Yzh5LWxpLWljb24gW2ljb25dPVwiJ3JvY2tldCdcIj48L2M4eS1saS1pY29uPlxuICogICAgIHt7IGkgKyAxIH19LiB7eyBkZXZpY2UubmFtZSB8fCAnLScgfX1cbiAqICAgICA8Yzh5LWxpLWZvb3Rlcj5cbiAqICAgICAgIERldmljZSBpZDogPGEgW3JvdXRlckxpbmtdPVwiWycvZGV2aWNlJywgZGV2aWNlLmlkXVwiPnt7IGRldmljZS5pZCB9fTwvYT5cbiAqICAgICA8L2M4eS1saS1mb290ZXI+XG4gKiAgICAgPGM4eS1saS1hY3Rpb24gKGNsaWNrKT1cImRlbGV0ZURldmljZShkZXZpY2UuaWQpXCIgaWNvbj1cInRpbWVzXCI+XG4gKiAgICAgICBEZWxldGVcbiAqICAgICA8L2M4eS1saS1hY3Rpb24+XG4gKiAgICAgPGM4eS1saS1hY3Rpb24gKGNsaWNrKT1cIihmYWxzZSlcIiBpY29uPVwicm9ja2V0XCI+XG4gKiAgICAgICBMYXVuY2ggdG8gc3BhY2VcbiAqICAgICA8L2M4eS1saS1hY3Rpb24+XG4gKiAgIDwvYzh5LWxpPlxuICogPC9jOHktbGlzdC1ncm91cD5cbiAqIGBgYFxuICovXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdjOHktbGlzdC1pdGVtLCBjOHktbGknLFxuICB0ZW1wbGF0ZVVybDogJy4vbGlzdC1pdGVtLmNvbXBvbmVudC5odG1sJyxcbiAgaG9zdDoge1xuICAgIGNsYXNzOiAnYzh5LWxpc3RfX2l0ZW0nXG4gIH1cbn0pXG5leHBvcnQgY2xhc3MgTGlzdEl0ZW1Db21wb25lbnQge1xuICAvKipcbiAgICogSWYgc2V0IHRvIHRydWUsIHRoZSBjbGFzcyBcImFjdGl2ZVwiIGlzIGFkZGVkIHdoaWNoXG4gICAqIGluZGljYXRlcyB0aGF0IHRoZSBjdXJyZW50IHJvdyBpcyBhY3RpdmUuXG4gICAqL1xuICBASW5wdXQoKVxuICBASG9zdEJpbmRpbmcoJ2NsYXNzLmFjdGl2ZScpXG4gIGFjdGl2ZTogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIC8qKlxuICAgKiBJZiBzZXQgdG8gdHJ1ZSwgdGhlIGNsYXNzIFwiYzh5LWxpc3RfX2l0ZW0tLWVtcHR5LWFjdGlvbnNcIiBpcyBhZGRlZCB3aGljaCBhZGRzXG4gICAqIGFkZGl0aW9uYWwgcGFkZGluZyB0byBjb21wZW5zYXRlIGZvciB0aGUgXCJhY3Rpb25zXCIgY29sdW1uIGluIG90aGVyIGxpc3QgaXRlbXMuXG4gICAqL1xuICBASW5wdXQoKVxuICBASG9zdEJpbmRpbmcoJ2NsYXNzLmM4eS1saXN0X19pdGVtLS1lbXB0eS1hY3Rpb25zJylcbiAgZW1wdHlBY3Rpb25zOiBib29sZWFuID0gZmFsc2U7XG5cbiAgLyoqXG4gICAqIEluZGljYXRlcyBpZiB0aGUgY3VycmVudCBsaXN0IGl0ZW0gaXMgY29sbGFwc2VkLiBZb3UgY2FuIHRyaWdnZXIgdGhlIGNvbGxhcHNpbmcgZnJvbVxuICAgKiBhbnkgZWxlbWVudCBldmVudCBieSB0b2dnbGluZyB0aGlzIHZhbHVlLlxuICAgKlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGBodG1sXG4gICAqIDxjOHktbGkgI2xpIChjbGljayk9XCJsaS5jb2xsYXBzZWQgPSAhbGkuY29sbGFwc2VkXCI+XG4gICAqICBUb2dnbGVcbiAgICogIDxjOHktbGktY29sbGFwc2U+XG4gICAqICAgIEkgY2FuIGJlIHRvZ2dsZWQgYnkgY2xpY2tpbmcgb24gdGhlIHJvdy5cbiAgICogIDwvYzh5LWxpLWNvbGxhcHNlXG4gICAqIDwvYzh5LWxpPlxuICAgKiBgYFxuICAgKi9cbiAgQElucHV0KClcbiAgY29sbGFwc2VkOiBib29sZWFuID0gdHJ1ZTtcblxuICAvKipcbiAgICogSW5kaWNhdGVzIGlmIHRoZSBjdXJyZW50IGxpc3QgaXRlbSBpcyBzZWxlY3RhYmxlLlxuICAgKi9cbiAgQElucHV0KClcbiAgc2VsZWN0YWJsZTogYm9vbGVhbiA9IHRydWU7XG5cbiAgLyoqXG4gICAqIEFuIGV2ZW50IGVtaXR0ZXIgd2hpY2ggaXMgdHJpZ2dlcmVkIHdoZW4gdGhlIHVzZXIgY29sbGFwc2VzIHRoZSBjb250ZW50XG4gICAqIHZpYSB0aGUgY2hldnJvbiBvbiB0aGUgcmlnaHQuXG4gICAqL1xuICBAT3V0cHV0KClcbiAgY29sbGFwc2VkQ2hhbmdlID0gbmV3IEV2ZW50RW1pdHRlcjxib29sZWFuPigpO1xuXG4gIC8qKlxuICAgKiBBIFtbTGlzdEl0ZW1Gb290ZXJDb21wb25lbnRdXSBlbGVtZW50IHdoaWNoIGNhbiBiZSB1c2VkIHRvIHNob3cgYSBmb290ZXIuXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYGh0bWxcbiAgICogPGM4eS1saT5cbiAgICogIEkgYW0gdGhlIG1haW4gY29udGVudFxuICAgKiAgPGM4eS1saS1mb290ZXI+XG4gICAqICAgIEkgYW0gdGhlIGZvb3RlciBjb250ZW50XG4gICAqICA8L2M4eS1saS1mb290ZXI+XG4gICAqIDwvYzh5LWxpPlxuICAgKiBgYGBcbiAgICovXG4gIEBDb250ZW50Q2hpbGQoTGlzdEl0ZW1Gb290ZXJDb21wb25lbnQsIHsgc3RhdGljOiBmYWxzZSB9KVxuICBpdGVtRm9vdGVyOiBMaXN0SXRlbUZvb3RlckNvbXBvbmVudDtcblxuICAvKipcbiAgICogW1tMaXN0SXRlbUFjdGlvbkNvbXBvbmVudF1dIGVsZW1lbnRzIHdoaWNoIGNhbiBiZSB1c2VkIHRvIHNob3cgYW4gYWN0aW9uLlxuICAgKiBBbiBhY3Rpb24gaXMgZGlzcGxheWVkIG9uIHRoZSByaWdodCBpbiB0aGUgZHJvcGRvd24gYW5kIHVzdWFsbHkgY29uc2lzdHMgb2YgYW5cbiAgICogaWNvbiBhbmQgYSBsYWJlbC5cbiAgICogQGV4YW1wbGVcbiAgICogYGBgaHRtbFxuICAgKiA8Yzh5LWxpPlxuICAgKiAgSSBhbSB0aGUgbWFpbiBjb250ZW50XG4gICAqICA8Yzh5LWxpLWFjdGlvbiAoY2xpY2spPVwibGF1bmNoVG9TcGFjZShkZXZpY2UuaWQpXCIgaWNvbj1cInJvY2tldFwiPlxuICAgKiAgICBMYXVuY2hcbiAgICogIDwvYzh5LWxpLWFjdGlvbj5cbiAgICogIDxjOHktbGktYWN0aW9uIChjbGljayk9XCJkZWxldGVEZXZpY2UoZGV2aWNlLmlkKVwiIGljb249XCJ0aW1lc1wiPlxuICAgKiAgICBEZWxldGVcbiAgICogIDwvYzh5LWxpLWFjdGlvbj5cbiAgICogPC9jOHktbGk+XG4gICAqIGBgYFxuICAgKi9cbiAgQENvbnRlbnRDaGlsZHJlbihMaXN0SXRlbUFjdGlvbkNvbXBvbmVudClcbiAgaXRlbUFjdGlvbnM6IFF1ZXJ5TGlzdDxMaXN0SXRlbUFjdGlvbkNvbXBvbmVudD47XG5cbiAgLyoqXG4gICAqIFtbTGlzdEl0ZW1Db2xsYXBzZUNvbXBvbmVudF1dIGVsZW1lbnRzIHdoaWNoIGNhbiBiZSB1c2VkIHRvIHNob3cgZGV0YWlsIHZpZXdzLlxuICAgKiBAZXhhbXBsZVxuICAgKiBgYGBodG1sXG4gICAqIDxjOHktbGk+XG4gICAqICBJIGFtIHRoZSBtYWluIGNvbnRlbnRcbiAgICogIDxjOHktbGktY29sbGFwc2U+XG4gICAqICAgIEkgYW0gZGV0YWlsZWQgY29udGVudFxuICAgKiAgPC9jOHktbGktY29sbGFwc2U+XG4gICAqIDwvYzh5LWxpPlxuICAgKiBgYGBcbiAgICovXG4gIEBDb250ZW50Q2hpbGQoTGlzdEl0ZW1Db2xsYXBzZUNvbXBvbmVudCwgeyBzdGF0aWM6IGZhbHNlIH0pXG4gIGl0ZW1Db2xsYXBzZTogTGlzdEl0ZW1Db2xsYXBzZUNvbXBvbmVudDtcblxuICAvKipcbiAgICogQGlnbm9yZVxuICAgKi9cbiAgc2hvd0Zvb3RlcjogYm9vbGVhbiA9IGZhbHNlO1xuICAvKipcbiAgICogQGlnbm9yZVxuICAgKi9cbiAgc2hvd0FjdGlvbnM6IGJvb2xlYW4gPSBmYWxzZTtcbiAgLyoqXG4gICAqIEBpZ25vcmVcbiAgICovXG4gIHNob3dDb2xsYXBzZTogYm9vbGVhbiA9IGZhbHNlO1xuICAvKipcbiAgICogQGlnbm9yZVxuICAgKi9cbiAgYWN0aW9uczogTGlzdEl0ZW1BY3Rpb25Db21wb25lbnRbXTtcbiAgLyoqXG4gICAqIEBpZ25vcmVcbiAgICovXG4gIGRyb3Bkb3duVXA6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBwcml2YXRlIHB1bHNlJDogU3ViamVjdDxib29sZWFuPiA9IG5ldyBTdWJqZWN0PGJvb2xlYW4+KCk7XG4gIHByaXZhdGUgZGVzdHJveSQ6IFN1YmplY3Q8YW55PiA9IG5ldyBTdWJqZWN0KCk7XG4gIHByaXZhdGUgcmVhZG9ubHkgQUNUSU9OX0lURU1fSEVJR0hUID0gNDA7XG5cbiAgLyoqXG4gICAqIEBpZ25vcmVcbiAgICovXG4gIGNvbnN0cnVjdG9yKHB1YmxpYyBlbGVtZW50OiBFbGVtZW50UmVmKSB7fVxuXG4gIC8qKlxuICAgKiBAaWdub3JlXG4gICAqL1xuICBuZ09uSW5pdCgpOiB2b2lkIHtcbiAgICB0aGlzLnB1bHNlJFxuICAgICAgLnBpcGUoXG4gICAgICAgIGZpbHRlcihhcHBseSA9PiAhIWFwcGx5KSxcbiAgICAgICAgdGFwKCgpID0+IHRoaXMuZWxlbWVudC5uYXRpdmVFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2M4eS1saXN0LS1wdWxzZScpKSxcbiAgICAgICAgZGVsYXkoMTAwKSxcbiAgICAgICAgdGFwKCgpID0+IHRoaXMuZWxlbWVudC5uYXRpdmVFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2M4eS1saXN0LS1wdWxzZScpKSxcbiAgICAgICAgdGFrZVVudGlsKHRoaXMuZGVzdHJveSQpXG4gICAgICApXG4gICAgICAuc3Vic2NyaWJlKCk7XG4gIH1cblxuICAvKipcbiAgICogQGlnbm9yZVxuICAgKi9cbiAgbmdBZnRlckNvbnRlbnRDaGVja2VkKCk6IHZvaWQge1xuICAgIHRoaXMuYWN0aW9ucyA9IHRoaXMuaXRlbUFjdGlvbnMudG9BcnJheSgpO1xuICAgIHRoaXMuc2hvd0Zvb3RlciA9IHRoaXMuaXRlbUZvb3RlciAhPSBudWxsO1xuICAgIHRoaXMuc2hvd0FjdGlvbnMgPSB0aGlzLml0ZW1BY3Rpb25zLmxlbmd0aCA+IDA7XG4gICAgdGhpcy5zaG93Q29sbGFwc2UgPSB0aGlzLml0ZW1Db2xsYXBzZSAhPSBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEBpZ25vcmVcbiAgICovXG4gIG5nT25EZXN0cm95KCkge1xuICAgIHRoaXMuZGVzdHJveSQubmV4dCgpO1xuICAgIHRoaXMuZGVzdHJveSQuY29tcGxldGUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBIGhlbHBlciBmdW5jdGlvbiB3aGljaCBoZWxwcyB0byBkZXRlcm1pbmUgaWYgdGhlIGRyb3Bkb3duXG4gICAqIHNob3VsZCB0b2dnbGUgdXAuXG4gICAqL1xuICBzaG93RHJvcGRvd25VcCgpIHtcbiAgICBjb25zdCBsaXN0SXRlbVJlY3Q6IERPTVJlY3QgPSB0aGlzLmVsZW1lbnQubmF0aXZlRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICBjb25zdCBkcm9wZG93blRvcCA9IGxpc3RJdGVtUmVjdC50b3A7XG4gICAgY29uc3QgZHJvcGRvd25IZWlnaHRXaXRoVG9nZ2xlID0gKDEgKyB0aGlzLml0ZW1BY3Rpb25zLmxlbmd0aCkgKiB0aGlzLkFDVElPTl9JVEVNX0hFSUdIVDtcbiAgICBjb25zdCBhdmFpbGFibGVIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG4gICAgY29uc3QgZHJvcGRvd25Eb3duRml0cyA9IGRyb3Bkb3duVG9wICsgZHJvcGRvd25IZWlnaHRXaXRoVG9nZ2xlIDw9IGF2YWlsYWJsZUhlaWdodDtcbiAgICB0aGlzLmRyb3Bkb3duVXAgPSAhZHJvcGRvd25Eb3duRml0cztcbiAgfVxuXG4gIC8qKlxuICAgKiBUb2dnbGVzIHRoZSBjb2xsYXBzZSBzdGF0ZSBhbmQgZW1pdHMgdGhpcyBzdGF0ZSBhc1xuICAgKiBjb2xsYXBzZWRDaGFuZ2Ugb3V0cHV0IGFzIGJvb2xlYW4uXG4gICAqIEBwYXJhbSAkZXZlbnQgUGFzcyBvcHRpb25hbCBhbiBldmVudCB0byBzdG9wIHByb3BhZ2F0aW9uLlxuICAgKi9cbiAgdG9nZ2xlQ29sbGFwc2VkKCRldmVudD86IEV2ZW50KSB7XG4gICAgaWYgKCRldmVudCkge1xuICAgICAgJGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIH1cbiAgICB0aGlzLmNvbGxhcHNlZCA9ICF0aGlzLmNvbGxhcHNlZDtcbiAgICB0aGlzLmNvbGxhcHNlZENoYW5nZS5lbWl0KHRoaXMuY29sbGFwc2VkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIaWdobGlnaHRzIHRoZSBsaXN0LWl0ZW0uIFRoaXMgbWV0aG9kIHNob3VsZCBiZSB1c2VkIHRvIHNob3cgdGhlXG4gICAqIHVzZXIgdGhhdCBzb21ldGhpbmcgd2l0aGluIHRoaXMgaXRlbSB3YXMgY2hhbmdlZC5cbiAgICovXG4gIHB1bHNlKCkge1xuICAgIHRoaXMucHVsc2UkLm5leHQodHJ1ZSk7XG4gIH1cbn1cbiJdfQ==