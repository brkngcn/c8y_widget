import { Component, EventEmitter, Input, Output, ViewChild } from '@angular/core';
import { BsModalRef } from 'ngx-bootstrap/modal';
import { filter } from 'rxjs/operators';
import { WizardService } from './wizard.service';
/**
 * A generic component that is intended to serve as the building block of more wizards.
 *
 * **Example**
 * ```html
 * <button
 *    title="Add application"
 *    class="btn btn-primary"
 *    (click)="addApplication()"
 *  >
 *    Add application
 *  </button>
 * ```
 *
 * ```ts
 * import { Component } from '@angular/core';
 * import { WizardConfig, WizardService, Wizard } from '@c8y/ngx-components';
 * import { ModalOptions } from 'ngx-bootstrap/modal';
 *
 * @Component({
 *  selector: 'c8y-add-application-wizard',
 *  templateUrl: './templatePath'
 * })
 * export class AddApplicationWizardComponent {
 *   constructor(private wizardService: WizardService) {}
 *
 *   addApplication() {
 *     const wizardConfig: WizardConfig = {
 *       headerText: 'Add Application',
 *       headerIcon: 'c8y-icon-modules',
 *       bodyHeaderText: 'Select methods',
 *       bodyHeaderIcon: 'c8y-icon-modules'
 *     };
 *
 *     const initialState: Wizard = {
 *       wizardConfig,
 *       id: 'uploadApplication'
 *     };
 *
 *     const modalOptions: ModalOptions = { initialState };
 *
 *     this.wizardService.show(modalOptions);
 *   }
 * }
 * ```
 */
export class WizardComponent {
    constructor(wizardService, bsModalRef) {
        this.wizardService = wizardService;
        this.bsModalRef = bsModalRef;
        /**
         * A configuration object that allows you to set header values, both text and icon.
         */
        this.wizardConfig = {};
        /**
         * A state that will be assigned to the actual component contained by the wizard.
         */
        this.componentInitialState = {};
        /**
         * The event that is emitted when the wizard is closed.
         */
        this.onClose = new EventEmitter();
        /**
         * The event that is emitted when the wizard is reseted.
         */
        this.onReset = new EventEmitter();
        /**
         * The event that is emitted when the wizard entry is clicked.
         */
        this.onSelect = new EventEmitter();
        this.headerTemplate$ = this.wizardService.headerTemplate$.pipe(filter(header => header.wizardId === this.id));
        this.bodyTemplate$ = this.wizardService.bodyTemplate$.pipe(filter(body => body.wizardId === this.id));
        this.footerTemplate$ = this.wizardService.footerTemplate$.pipe(filter(footer => footer.wizardId === this.id));
    }
    ngOnInit() {
        this.emitTemplates();
    }
    /**
     * Resets the wizard.
     * @param result Custom result object which will be emitted via onReset output.
     */
    reset(result) {
        this.onReset.emit(result);
        this.emitTemplates();
    }
    /**
     * Closes the wizard.
     * @param result Custom result object which will be emitted via onClose output.
     */
    close(result) {
        this.onClose.emit(result);
        this.onClose.complete();
        this.bsModalRef.hide();
    }
    emitTemplates() {
        setTimeout(() => {
            this.wizardService.headerTemplate$.next({ template: this.header, wizardId: this.id });
            this.wizardService.bodyTemplate$.next({ template: this.body, wizardId: this.id });
            this.wizardService.footerTemplate$.next({ template: this.footer, wizardId: this.id });
        });
    }
}
WizardComponent.decorators = [
    { type: Component, args: [{
                selector: 'c8y-wizard',
                template: "<div class=\"viewport-modal animated fadeIn\">\n  <ng-template *ngTemplateOutlet=\"(headerTemplate$ | async)?.template\"></ng-template>\n\n  <ng-template #headerRef>\n    <div class=\"modal-header dialog-header animated fadeIn\">\n      <h1 [c8yIcon]=\"wizardConfig.headerIcon\"></h1>\n      <h4>{{ wizardConfig.headerText | translate }}</h4>\n    </div>\n  </ng-template>\n\n  <ng-template *ngTemplateOutlet=\"(bodyTemplate$ | async)?.template\"></ng-template>\n\n  <ng-template #bodyRef>\n    <div class=\"p-16 p-t-8 text-center\" *ngIf=\"wizardConfig.bodyHeaderText\">\n      <div class=\"c8y-wizard-nav\">\n        <i [c8yIcon]=\"wizardConfig.bodyHeaderIcon\"></i>\n        <span>{{ wizardConfig.bodyHeaderText | translate }}</span>\n      </div>\n    </div>\n  </ng-template>\n  <c8y-wizard-outlet [initialState]=\"componentInitialState\" (onSelect)=\"onSelect.emit($event)\"></c8y-wizard-outlet>\n\n  <ng-template *ngTemplateOutlet=\"(footerTemplate$ | async)?.template\"></ng-template>\n  <ng-template #footerRef>\n    <div class=\"modal-footer animated fadeIn\">\n      <button\n        (click)=\"close()\"\n        type=\"button\"\n        class=\"btn btn-default\"\n        title=\"{{ 'Cancel' | translate }}\"\n      >\n        <span translate>Cancel</span>\n      </button>\n    </div>\n  </ng-template>\n</div>\n"
            },] }
];
WizardComponent.ctorParameters = () => [
    { type: WizardService },
    { type: BsModalRef }
];
WizardComponent.propDecorators = {
    header: [{ type: ViewChild, args: ['headerRef', { static: true },] }],
    body: [{ type: ViewChild, args: ['bodyRef', { static: true },] }],
    footer: [{ type: ViewChild, args: ['footerRef', { static: true },] }],
    id: [{ type: Input }],
    wizardConfig: [{ type: Input }],
    onClose: [{ type: Output }],
    onReset: [{ type: Output }],
    onSelect: [{ type: Output }]
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2l6YXJkLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL2NvcmUvd2l6YXJkL3dpemFyZC5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUNMLFNBQVMsRUFDVCxZQUFZLEVBQ1osS0FBSyxFQUVMLE1BQU0sRUFFTixTQUFTLEVBQ1YsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBQ2pELE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUV4QyxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sa0JBQWtCLENBQUM7QUFFakQ7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztHQTZDRztBQU1ILE1BQU0sT0FBTyxlQUFlO0lBdUMxQixZQUFtQixhQUE0QixFQUFTLFVBQXNCO1FBQTNELGtCQUFhLEdBQWIsYUFBYSxDQUFlO1FBQVMsZUFBVSxHQUFWLFVBQVUsQ0FBWTtRQTlCOUU7O1dBRUc7UUFDTSxpQkFBWSxHQUFpQixFQUFFLENBQUM7UUFDekM7O1dBRUc7UUFDSCwwQkFBcUIsR0FBZSxFQUFFLENBQUM7UUFDdkM7O1dBRUc7UUFDTyxZQUFPLEdBQXNCLElBQUksWUFBWSxFQUFFLENBQUM7UUFDMUQ7O1dBRUc7UUFDTyxZQUFPLEdBQXNCLElBQUksWUFBWSxFQUFFLENBQUM7UUFDMUQ7O1dBRUc7UUFDTyxhQUFRLEdBQThCLElBQUksWUFBWSxFQUFFLENBQUM7UUFDMUQsb0JBQWUsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQ2hFLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxRQUFRLEtBQUssSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUM5QyxDQUFDO1FBQ08sa0JBQWEsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQzVELE1BQU0sQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxRQUFRLEtBQUssSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUMxQyxDQUFDO1FBQ08sb0JBQWUsR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQ2hFLE1BQU0sQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLE1BQU0sQ0FBQyxRQUFRLEtBQUssSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUM5QyxDQUFDO0lBRStFLENBQUM7SUFFbEYsUUFBUTtRQUNOLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztJQUN2QixDQUFDO0lBRUQ7OztPQUdHO0lBQ0gsS0FBSyxDQUFDLE1BQVk7UUFDaEIsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDMUIsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO0lBQ3ZCLENBQUM7SUFFRDs7O09BR0c7SUFDSCxLQUFLLENBQUMsTUFBWTtRQUNoQixJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUMxQixJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsRUFBRSxDQUFDO1FBQ3hCLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDekIsQ0FBQztJQUVPLGFBQWE7UUFDbkIsVUFBVSxDQUFDLEdBQUcsRUFBRTtZQUNkLElBQUksQ0FBQyxhQUFhLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxFQUFFLFFBQVEsRUFBRSxJQUFJLENBQUMsTUFBTSxFQUFFLFFBQVEsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztZQUN0RixJQUFJLENBQUMsYUFBYSxDQUFDLGFBQWEsQ0FBQyxJQUFJLENBQUMsRUFBRSxRQUFRLEVBQUUsSUFBSSxDQUFDLElBQUksRUFBRSxRQUFRLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7WUFDbEYsSUFBSSxDQUFDLGFBQWEsQ0FBQyxlQUFlLENBQUMsSUFBSSxDQUFDLEVBQUUsUUFBUSxFQUFFLElBQUksQ0FBQyxNQUFNLEVBQUUsUUFBUSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDO1FBQ3hGLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQzs7O1lBMUVGLFNBQVMsU0FBQztnQkFDVCxRQUFRLEVBQUUsWUFBWTtnQkFDdEIseXpDQUFzQzthQUN2Qzs7O1lBcERRLGFBQWE7WUFIYixVQUFVOzs7cUJBeURoQixTQUFTLFNBQUMsV0FBVyxFQUFFLEVBQUUsTUFBTSxFQUFFLElBQUksRUFBRTttQkFDdkMsU0FBUyxTQUFDLFNBQVMsRUFBRSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUU7cUJBQ3JDLFNBQVMsU0FBQyxXQUFXLEVBQUUsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFO2lCQUt2QyxLQUFLOzJCQUlMLEtBQUs7c0JBUUwsTUFBTTtzQkFJTixNQUFNO3VCQUlOLE1BQU0iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBDb21wb25lbnQsXG4gIEV2ZW50RW1pdHRlcixcbiAgSW5wdXQsXG4gIE9uSW5pdCxcbiAgT3V0cHV0LFxuICBUZW1wbGF0ZVJlZixcbiAgVmlld0NoaWxkXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQnNNb2RhbFJlZiB9IGZyb20gJ25neC1ib290c3RyYXAvbW9kYWwnO1xuaW1wb3J0IHsgZmlsdGVyIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuaW1wb3J0IHsgV2l6YXJkLCBXaXphcmRDb25maWcsIFdpemFyZEVudHJ5IH0gZnJvbSAnLi93aXphcmQubW9kZWwnO1xuaW1wb3J0IHsgV2l6YXJkU2VydmljZSB9IGZyb20gJy4vd2l6YXJkLnNlcnZpY2UnO1xuXG4vKipcbiAqIEEgZ2VuZXJpYyBjb21wb25lbnQgdGhhdCBpcyBpbnRlbmRlZCB0byBzZXJ2ZSBhcyB0aGUgYnVpbGRpbmcgYmxvY2sgb2YgbW9yZSB3aXphcmRzLlxuICpcbiAqICoqRXhhbXBsZSoqXG4gKiBgYGBodG1sXG4gKiA8YnV0dG9uXG4gKiAgICB0aXRsZT1cIkFkZCBhcHBsaWNhdGlvblwiXG4gKiAgICBjbGFzcz1cImJ0biBidG4tcHJpbWFyeVwiXG4gKiAgICAoY2xpY2spPVwiYWRkQXBwbGljYXRpb24oKVwiXG4gKiAgPlxuICogICAgQWRkIGFwcGxpY2F0aW9uXG4gKiAgPC9idXR0b24+XG4gKiBgYGBcbiAqXG4gKiBgYGB0c1xuICogaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG4gKiBpbXBvcnQgeyBXaXphcmRDb25maWcsIFdpemFyZFNlcnZpY2UsIFdpemFyZCB9IGZyb20gJ0BjOHkvbmd4LWNvbXBvbmVudHMnO1xuICogaW1wb3J0IHsgTW9kYWxPcHRpb25zIH0gZnJvbSAnbmd4LWJvb3RzdHJhcC9tb2RhbCc7XG4gKlxuICogQENvbXBvbmVudCh7XG4gKiAgc2VsZWN0b3I6ICdjOHktYWRkLWFwcGxpY2F0aW9uLXdpemFyZCcsXG4gKiAgdGVtcGxhdGVVcmw6ICcuL3RlbXBsYXRlUGF0aCdcbiAqIH0pXG4gKiBleHBvcnQgY2xhc3MgQWRkQXBwbGljYXRpb25XaXphcmRDb21wb25lbnQge1xuICogICBjb25zdHJ1Y3Rvcihwcml2YXRlIHdpemFyZFNlcnZpY2U6IFdpemFyZFNlcnZpY2UpIHt9XG4gKlxuICogICBhZGRBcHBsaWNhdGlvbigpIHtcbiAqICAgICBjb25zdCB3aXphcmRDb25maWc6IFdpemFyZENvbmZpZyA9IHtcbiAqICAgICAgIGhlYWRlclRleHQ6ICdBZGQgQXBwbGljYXRpb24nLFxuICogICAgICAgaGVhZGVySWNvbjogJ2M4eS1pY29uLW1vZHVsZXMnLFxuICogICAgICAgYm9keUhlYWRlclRleHQ6ICdTZWxlY3QgbWV0aG9kcycsXG4gKiAgICAgICBib2R5SGVhZGVySWNvbjogJ2M4eS1pY29uLW1vZHVsZXMnXG4gKiAgICAgfTtcbiAqXG4gKiAgICAgY29uc3QgaW5pdGlhbFN0YXRlOiBXaXphcmQgPSB7XG4gKiAgICAgICB3aXphcmRDb25maWcsXG4gKiAgICAgICBpZDogJ3VwbG9hZEFwcGxpY2F0aW9uJ1xuICogICAgIH07XG4gKlxuICogICAgIGNvbnN0IG1vZGFsT3B0aW9uczogTW9kYWxPcHRpb25zID0geyBpbml0aWFsU3RhdGUgfTtcbiAqXG4gKiAgICAgdGhpcy53aXphcmRTZXJ2aWNlLnNob3cobW9kYWxPcHRpb25zKTtcbiAqICAgfVxuICogfVxuICogYGBgXG4gKi9cblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnYzh5LXdpemFyZCcsXG4gIHRlbXBsYXRlVXJsOiAnLi93aXphcmQuY29tcG9uZW50Lmh0bWwnXG59KVxuZXhwb3J0IGNsYXNzIFdpemFyZENvbXBvbmVudDxUID0gYW55PiBpbXBsZW1lbnRzIFdpemFyZDxUPiwgT25Jbml0IHtcbiAgQFZpZXdDaGlsZCgnaGVhZGVyUmVmJywgeyBzdGF0aWM6IHRydWUgfSkgaGVhZGVyOiBUZW1wbGF0ZVJlZjxhbnk+O1xuICBAVmlld0NoaWxkKCdib2R5UmVmJywgeyBzdGF0aWM6IHRydWUgfSkgYm9keTogVGVtcGxhdGVSZWY8YW55PjtcbiAgQFZpZXdDaGlsZCgnZm9vdGVyUmVmJywgeyBzdGF0aWM6IHRydWUgfSkgZm9vdGVyOiBUZW1wbGF0ZVJlZjxhbnk+O1xuICAvKipcbiAgICogVGhlIGlkIHBhcmFtZXRlciBpZGVudGlmaWVzIHRoZSBwYXJ0aWN1bGFyIHdpemFyZCBhbmQgY2FuIGJlIHVzZWQgdG8gcmVmZXIgdG8gaXQgd2hlbiBob29raW5nIHdpemFyZCBlbnRyaWVzLlxuICAgKiBFeGFtcGxlOiBcIndpemFyZElkXCIuXG4gICAqL1xuICBASW5wdXQoKSBpZDogc3RyaW5nO1xuICAvKipcbiAgICogQSBjb25maWd1cmF0aW9uIG9iamVjdCB0aGF0IGFsbG93cyB5b3UgdG8gc2V0IGhlYWRlciB2YWx1ZXMsIGJvdGggdGV4dCBhbmQgaWNvbi5cbiAgICovXG4gIEBJbnB1dCgpIHdpemFyZENvbmZpZzogV2l6YXJkQ29uZmlnID0ge307XG4gIC8qKlxuICAgKiBBIHN0YXRlIHRoYXQgd2lsbCBiZSBhc3NpZ25lZCB0byB0aGUgYWN0dWFsIGNvbXBvbmVudCBjb250YWluZWQgYnkgdGhlIHdpemFyZC5cbiAgICovXG4gIGNvbXBvbmVudEluaXRpYWxTdGF0ZTogUGFydGlhbDxUPiA9IHt9O1xuICAvKipcbiAgICogVGhlIGV2ZW50IHRoYXQgaXMgZW1pdHRlZCB3aGVuIHRoZSB3aXphcmQgaXMgY2xvc2VkLlxuICAgKi9cbiAgQE91dHB1dCgpIG9uQ2xvc2U6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICAvKipcbiAgICogVGhlIGV2ZW50IHRoYXQgaXMgZW1pdHRlZCB3aGVuIHRoZSB3aXphcmQgaXMgcmVzZXRlZC5cbiAgICovXG4gIEBPdXRwdXQoKSBvblJlc2V0OiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcbiAgLyoqXG4gICAqIFRoZSBldmVudCB0aGF0IGlzIGVtaXR0ZWQgd2hlbiB0aGUgd2l6YXJkIGVudHJ5IGlzIGNsaWNrZWQuXG4gICAqL1xuICBAT3V0cHV0KCkgb25TZWxlY3Q6IEV2ZW50RW1pdHRlcjxXaXphcmRFbnRyeT4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7XG4gIHJlYWRvbmx5IGhlYWRlclRlbXBsYXRlJCA9IHRoaXMud2l6YXJkU2VydmljZS5oZWFkZXJUZW1wbGF0ZSQucGlwZShcbiAgICBmaWx0ZXIoaGVhZGVyID0+IGhlYWRlci53aXphcmRJZCA9PT0gdGhpcy5pZClcbiAgKTtcbiAgcmVhZG9ubHkgYm9keVRlbXBsYXRlJCA9IHRoaXMud2l6YXJkU2VydmljZS5ib2R5VGVtcGxhdGUkLnBpcGUoXG4gICAgZmlsdGVyKGJvZHkgPT4gYm9keS53aXphcmRJZCA9PT0gdGhpcy5pZClcbiAgKTtcbiAgcmVhZG9ubHkgZm9vdGVyVGVtcGxhdGUkID0gdGhpcy53aXphcmRTZXJ2aWNlLmZvb3RlclRlbXBsYXRlJC5waXBlKFxuICAgIGZpbHRlcihmb290ZXIgPT4gZm9vdGVyLndpemFyZElkID09PSB0aGlzLmlkKVxuICApO1xuXG4gIGNvbnN0cnVjdG9yKHB1YmxpYyB3aXphcmRTZXJ2aWNlOiBXaXphcmRTZXJ2aWNlLCBwdWJsaWMgYnNNb2RhbFJlZjogQnNNb2RhbFJlZikge31cblxuICBuZ09uSW5pdCgpIHtcbiAgICB0aGlzLmVtaXRUZW1wbGF0ZXMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXNldHMgdGhlIHdpemFyZC5cbiAgICogQHBhcmFtIHJlc3VsdCBDdXN0b20gcmVzdWx0IG9iamVjdCB3aGljaCB3aWxsIGJlIGVtaXR0ZWQgdmlhIG9uUmVzZXQgb3V0cHV0LlxuICAgKi9cbiAgcmVzZXQocmVzdWx0PzogYW55KSB7XG4gICAgdGhpcy5vblJlc2V0LmVtaXQocmVzdWx0KTtcbiAgICB0aGlzLmVtaXRUZW1wbGF0ZXMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbG9zZXMgdGhlIHdpemFyZC5cbiAgICogQHBhcmFtIHJlc3VsdCBDdXN0b20gcmVzdWx0IG9iamVjdCB3aGljaCB3aWxsIGJlIGVtaXR0ZWQgdmlhIG9uQ2xvc2Ugb3V0cHV0LlxuICAgKi9cbiAgY2xvc2UocmVzdWx0PzogYW55KSB7XG4gICAgdGhpcy5vbkNsb3NlLmVtaXQocmVzdWx0KTtcbiAgICB0aGlzLm9uQ2xvc2UuY29tcGxldGUoKTtcbiAgICB0aGlzLmJzTW9kYWxSZWYuaGlkZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBlbWl0VGVtcGxhdGVzKCkge1xuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy53aXphcmRTZXJ2aWNlLmhlYWRlclRlbXBsYXRlJC5uZXh0KHsgdGVtcGxhdGU6IHRoaXMuaGVhZGVyLCB3aXphcmRJZDogdGhpcy5pZCB9KTtcbiAgICAgIHRoaXMud2l6YXJkU2VydmljZS5ib2R5VGVtcGxhdGUkLm5leHQoeyB0ZW1wbGF0ZTogdGhpcy5ib2R5LCB3aXphcmRJZDogdGhpcy5pZCB9KTtcbiAgICAgIHRoaXMud2l6YXJkU2VydmljZS5mb290ZXJUZW1wbGF0ZSQubmV4dCh7IHRlbXBsYXRlOiB0aGlzLmZvb3Rlciwgd2l6YXJkSWQ6IHRoaXMuaWQgfSk7XG4gICAgfSk7XG4gIH1cbn1cbiJdfQ==