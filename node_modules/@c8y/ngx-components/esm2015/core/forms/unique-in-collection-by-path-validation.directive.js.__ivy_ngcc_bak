import { Directive, Input } from '@angular/core';
import { NG_VALIDATORS } from '@angular/forms';
import { find, get, isEqualWith } from 'lodash-es';
export class UniqueInCollectionByPathValidationDirective {
    validate(control) {
        const match = find(this.collection, element => isEqualWith(get(element, this.path), control.value, this.comparator));
        return !!match && !!control.value
            ? { uniqueByPath: { key: this.path, value: get(match, this.path) } }
            : null;
    }
}
UniqueInCollectionByPathValidationDirective.decorators = [
    { type: Directive, args: [{
                selector: '[uniqueByPath]',
                providers: [
                    {
                        provide: NG_VALIDATORS,
                        useExisting: UniqueInCollectionByPathValidationDirective,
                        multi: true
                    }
                ]
            },] }
];
UniqueInCollectionByPathValidationDirective.propDecorators = {
    collection: [{ type: Input }],
    path: [{ type: Input }],
    comparator: [{ type: Input }]
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidW5pcXVlLWluLWNvbGxlY3Rpb24tYnktcGF0aC12YWxpZGF0aW9uLmRpcmVjdGl2ZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL2NvcmUvZm9ybXMvdW5pcXVlLWluLWNvbGxlY3Rpb24tYnktcGF0aC12YWxpZGF0aW9uLmRpcmVjdGl2ZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUNqRCxPQUFPLEVBQW1CLGFBQWEsRUFBYSxNQUFNLGdCQUFnQixDQUFDO0FBQzNFLE9BQU8sRUFBRSxJQUFJLEVBQUUsR0FBRyxFQUFFLFdBQVcsRUFBRSxNQUFNLFdBQVcsQ0FBQztBQVluRCxNQUFNLE9BQU8sMkNBQTJDO0lBS3RELFFBQVEsQ0FBQyxPQUF3QjtRQUMvQixNQUFNLEtBQUssR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxPQUFPLENBQUMsRUFBRSxDQUM1QyxXQUFXLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsT0FBTyxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsVUFBVSxDQUFDLENBQ3JFLENBQUM7UUFFRixPQUFPLENBQUMsQ0FBQyxLQUFLLElBQUksQ0FBQyxDQUFDLE9BQU8sQ0FBQyxLQUFLO1lBQy9CLENBQUMsQ0FBQyxFQUFFLFlBQVksRUFBRSxFQUFFLEdBQUcsRUFBRSxJQUFJLENBQUMsSUFBSSxFQUFFLEtBQUssRUFBRSxHQUFHLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxFQUFFO1lBQ3BFLENBQUMsQ0FBQyxJQUFJLENBQUM7SUFDWCxDQUFDOzs7WUF2QkYsU0FBUyxTQUFDO2dCQUNULFFBQVEsRUFBRSxnQkFBZ0I7Z0JBQzFCLFNBQVMsRUFBRTtvQkFDVDt3QkFDRSxPQUFPLEVBQUUsYUFBYTt3QkFDdEIsV0FBVyxFQUFFLDJDQUEyQzt3QkFDeEQsS0FBSyxFQUFFLElBQUk7cUJBQ1o7aUJBQ0Y7YUFDRjs7O3lCQUVFLEtBQUs7bUJBQ0wsS0FBSzt5QkFDTCxLQUFLIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRGlyZWN0aXZlLCBJbnB1dCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQWJzdHJhY3RDb250cm9sLCBOR19WQUxJREFUT1JTLCBWYWxpZGF0b3IgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5pbXBvcnQgeyBmaW5kLCBnZXQsIGlzRXF1YWxXaXRoIH0gZnJvbSAnbG9kYXNoLWVzJztcblxuQERpcmVjdGl2ZSh7XG4gIHNlbGVjdG9yOiAnW3VuaXF1ZUJ5UGF0aF0nLFxuICBwcm92aWRlcnM6IFtcbiAgICB7XG4gICAgICBwcm92aWRlOiBOR19WQUxJREFUT1JTLFxuICAgICAgdXNlRXhpc3Rpbmc6IFVuaXF1ZUluQ29sbGVjdGlvbkJ5UGF0aFZhbGlkYXRpb25EaXJlY3RpdmUsXG4gICAgICBtdWx0aTogdHJ1ZVxuICAgIH1cbiAgXVxufSlcbmV4cG9ydCBjbGFzcyBVbmlxdWVJbkNvbGxlY3Rpb25CeVBhdGhWYWxpZGF0aW9uRGlyZWN0aXZlIGltcGxlbWVudHMgVmFsaWRhdG9yIHtcbiAgQElucHV0KCkgY29sbGVjdGlvbjogSXRlcmFibGU8b2JqZWN0PjtcbiAgQElucHV0KCkgcGF0aDogc3RyaW5nO1xuICBASW5wdXQoKSBjb21wYXJhdG9yOiAodmFsMTogYW55LCB2YWwyOiBhbnkpID0+IGJvb2xlYW47XG5cbiAgdmFsaWRhdGUoY29udHJvbDogQWJzdHJhY3RDb250cm9sKTogeyBba2V5OiBzdHJpbmddOiBhbnkgfSB8IG51bGwge1xuICAgIGNvbnN0IG1hdGNoID0gZmluZCh0aGlzLmNvbGxlY3Rpb24sIGVsZW1lbnQgPT5cbiAgICAgIGlzRXF1YWxXaXRoKGdldChlbGVtZW50LCB0aGlzLnBhdGgpLCBjb250cm9sLnZhbHVlLCB0aGlzLmNvbXBhcmF0b3IpXG4gICAgKTtcblxuICAgIHJldHVybiAhIW1hdGNoICYmICEhY29udHJvbC52YWx1ZVxuICAgICAgPyB7IHVuaXF1ZUJ5UGF0aDogeyBrZXk6IHRoaXMucGF0aCwgdmFsdWU6IGdldChtYXRjaCwgdGhpcy5wYXRoKSB9IH1cbiAgICAgIDogbnVsbDtcbiAgfVxufVxuIl19