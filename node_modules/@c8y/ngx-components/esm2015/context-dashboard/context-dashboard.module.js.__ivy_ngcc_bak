import { NgModule } from '@angular/core';
import { CoreModule, HOOK_ACTION_BAR, HOOK_ROUTE, ViewContext, HOOK_TABS } from '@c8y/ngx-components';
import { BsDropdownModule } from 'ngx-bootstrap/dropdown';
import { PopoverModule } from 'ngx-bootstrap/popover';
import { TooltipModule } from 'ngx-bootstrap/tooltip';
import { AssetSelectorModule } from '@c8y/ngx-components/assets-navigator';
import { AddDashboardComponent } from './add-dashboard.component';
import { AddDashboardFactory } from './add-dashboard.factory';
import { AppearanceSettingsComponent } from './appearance-settings.component';
import { ContextDashboardComponent } from './context-dashboard.component';
import { CONTEXT_DASHBOARD_CONFIG } from './context-dashboard.model';
import { ContextDashboardService } from './context-dashboard.service';
import { DashboardActionBarFactory } from './dashboard-action-bar.factory';
import { DashboardDetailComponent } from './dashboard-detail.component';
import { DeviceDashboardGuard } from './device-dashboard.guard';
import { GroupDashboardGuard } from './group-dashboard.guard';
import { PasteDashboardActionComponent } from './paste-dashboard-action.component';
import { WidgetConfigComponent } from './widget-config.component';
import { WidgetPreviewComponent } from './widget-preview.component';
import { WidgetService } from './widget.service';
const defaultConfig = {
    allowFullscreen: true,
    widgetFilter({ data }) {
        return !(data && data.settings && data.settings.noNewWidgets);
    },
    routes: [
        {
            path: 'dashboard/:dashboardId',
            component: ContextDashboardComponent,
            canActivate: [DeviceDashboardGuard],
            context: ViewContext.Device
        },
        {
            path: 'dashboard/:dashboardId',
            component: ContextDashboardComponent,
            canActivate: [GroupDashboardGuard],
            context: ViewContext.Group
        }
    ]
};
const ɵ0 = defaultConfig;
export class ContextDashboardModule {
    static config(config = {}) {
        return {
            ngModule: ContextDashboardModule,
            providers: [
                {
                    provide: CONTEXT_DASHBOARD_CONFIG,
                    useValue: Object.assign(Object.assign({}, defaultConfig), config)
                },
                ContextDashboardService,
                DeviceDashboardGuard,
                GroupDashboardGuard,
                {
                    provide: HOOK_ROUTE,
                    useValue: Object.assign(Object.assign({}, defaultConfig), config).routes,
                    multi: true
                },
                {
                    provide: HOOK_TABS,
                    useExisting: AddDashboardFactory,
                    multi: true
                },
                {
                    provide: HOOK_ACTION_BAR,
                    useClass: DashboardActionBarFactory,
                    multi: true
                }
            ]
        };
    }
}
ContextDashboardModule.decorators = [
    { type: NgModule, args: [{
                declarations: [
                    AppearanceSettingsComponent,
                    ContextDashboardComponent,
                    WidgetConfigComponent,
                    WidgetPreviewComponent,
                    DashboardDetailComponent,
                    AddDashboardComponent,
                    PasteDashboardActionComponent
                ],
                imports: [
                    CoreModule,
                    TooltipModule,
                    PopoverModule,
                    AssetSelectorModule,
                    BsDropdownModule.forRoot()
                ],
                exports: [ContextDashboardComponent, WidgetConfigComponent],
                entryComponents: [
                    ContextDashboardComponent,
                    WidgetConfigComponent,
                    DashboardDetailComponent,
                    PasteDashboardActionComponent
                ],
                providers: [
                    WidgetService,
                    {
                        provide: CONTEXT_DASHBOARD_CONFIG,
                        useValue: ɵ0
                    }
                ]
            },] }
];
export { ɵ0 };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29udGV4dC1kYXNoYm9hcmQubW9kdWxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vY29udGV4dC1kYXNoYm9hcmQvY29udGV4dC1kYXNoYm9hcmQubW9kdWxlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBdUIsUUFBUSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzlELE9BQU8sRUFDTCxVQUFVLEVBQ1YsZUFBZSxFQUNmLFVBQVUsRUFDVixXQUFXLEVBQ1gsU0FBUyxFQUNWLE1BQU0scUJBQXFCLENBQUM7QUFDN0IsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0sd0JBQXdCLENBQUM7QUFDMUQsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLHVCQUF1QixDQUFDO0FBQ3RELE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUN0RCxPQUFPLEVBQUUsbUJBQW1CLEVBQUUsTUFBTSxzQ0FBc0MsQ0FBQztBQUMzRSxPQUFPLEVBQUUscUJBQXFCLEVBQUUsTUFBTSwyQkFBMkIsQ0FBQztBQUNsRSxPQUFPLEVBQUUsbUJBQW1CLEVBQUUsTUFBTSx5QkFBeUIsQ0FBQztBQUM5RCxPQUFPLEVBQUUsMkJBQTJCLEVBQUUsTUFBTSxpQ0FBaUMsQ0FBQztBQUM5RSxPQUFPLEVBQUUseUJBQXlCLEVBQUUsTUFBTSwrQkFBK0IsQ0FBQztBQUMxRSxPQUFPLEVBQTBCLHdCQUF3QixFQUFFLE1BQU0sMkJBQTJCLENBQUM7QUFDN0YsT0FBTyxFQUFFLHVCQUF1QixFQUFFLE1BQU0sNkJBQTZCLENBQUM7QUFDdEUsT0FBTyxFQUFFLHlCQUF5QixFQUFFLE1BQU0sZ0NBQWdDLENBQUM7QUFDM0UsT0FBTyxFQUFFLHdCQUF3QixFQUFFLE1BQU0sOEJBQThCLENBQUM7QUFDeEUsT0FBTyxFQUFFLG9CQUFvQixFQUFFLE1BQU0sMEJBQTBCLENBQUM7QUFDaEUsT0FBTyxFQUFFLG1CQUFtQixFQUFFLE1BQU0seUJBQXlCLENBQUM7QUFDOUQsT0FBTyxFQUFFLDZCQUE2QixFQUFFLE1BQU0sb0NBQW9DLENBQUM7QUFDbkYsT0FBTyxFQUFFLHFCQUFxQixFQUFFLE1BQU0sMkJBQTJCLENBQUM7QUFDbEUsT0FBTyxFQUFFLHNCQUFzQixFQUFFLE1BQU0sNEJBQTRCLENBQUM7QUFDcEUsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLGtCQUFrQixDQUFDO0FBRWpELE1BQU0sYUFBYSxHQUFHO0lBQ3BCLGVBQWUsRUFBRSxJQUFJO0lBQ3JCLFlBQVksQ0FBQyxFQUFFLElBQUksRUFBRTtRQUNuQixPQUFPLENBQUMsQ0FBQyxJQUFJLElBQUksSUFBSSxDQUFDLFFBQVEsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLFlBQVksQ0FBQyxDQUFDO0lBQ2hFLENBQUM7SUFDRCxNQUFNLEVBQUU7UUFDTjtZQUNFLElBQUksRUFBRSx3QkFBd0I7WUFDOUIsU0FBUyxFQUFFLHlCQUF5QjtZQUNwQyxXQUFXLEVBQUUsQ0FBQyxvQkFBb0IsQ0FBQztZQUNuQyxPQUFPLEVBQUUsV0FBVyxDQUFDLE1BQU07U0FDNUI7UUFDRDtZQUNFLElBQUksRUFBRSx3QkFBd0I7WUFDOUIsU0FBUyxFQUFFLHlCQUF5QjtZQUNwQyxXQUFXLEVBQUUsQ0FBQyxtQkFBbUIsQ0FBQztZQUNsQyxPQUFPLEVBQUUsV0FBVyxDQUFDLEtBQUs7U0FDM0I7S0FDRjtDQUNGLENBQUM7V0E4QmMsYUFBYTtBQUk3QixNQUFNLE9BQU8sc0JBQXNCO0lBQ2pDLE1BQU0sQ0FBQyxNQUFNLENBQUMsU0FBaUMsRUFBRTtRQUMvQyxPQUFPO1lBQ0wsUUFBUSxFQUFFLHNCQUFzQjtZQUNoQyxTQUFTLEVBQUU7Z0JBQ1Q7b0JBQ0UsT0FBTyxFQUFFLHdCQUF3QjtvQkFDakMsUUFBUSxrQ0FBTyxhQUFhLEdBQUssTUFBTSxDQUFFO2lCQUMxQztnQkFDRCx1QkFBdUI7Z0JBQ3ZCLG9CQUFvQjtnQkFDcEIsbUJBQW1CO2dCQUNuQjtvQkFDRSxPQUFPLEVBQUUsVUFBVTtvQkFDbkIsUUFBUSxFQUFFLGdDQUFLLGFBQWEsR0FBSyxNQUFNLEVBQUcsTUFBTTtvQkFDaEQsS0FBSyxFQUFFLElBQUk7aUJBQ1o7Z0JBQ0Q7b0JBQ0UsT0FBTyxFQUFFLFNBQVM7b0JBQ2xCLFdBQVcsRUFBRSxtQkFBbUI7b0JBQ2hDLEtBQUssRUFBRSxJQUFJO2lCQUNaO2dCQUNEO29CQUNFLE9BQU8sRUFBRSxlQUFlO29CQUN4QixRQUFRLEVBQUUseUJBQXlCO29CQUNuQyxLQUFLLEVBQUUsSUFBSTtpQkFDWjthQUNGO1NBQ0YsQ0FBQztJQUNKLENBQUM7OztZQTdERixRQUFRLFNBQUM7Z0JBQ1IsWUFBWSxFQUFFO29CQUNaLDJCQUEyQjtvQkFDM0IseUJBQXlCO29CQUN6QixxQkFBcUI7b0JBQ3JCLHNCQUFzQjtvQkFDdEIsd0JBQXdCO29CQUN4QixxQkFBcUI7b0JBQ3JCLDZCQUE2QjtpQkFDOUI7Z0JBQ0QsT0FBTyxFQUFFO29CQUNQLFVBQVU7b0JBQ1YsYUFBYTtvQkFDYixhQUFhO29CQUNiLG1CQUFtQjtvQkFDbkIsZ0JBQWdCLENBQUMsT0FBTyxFQUFFO2lCQUMzQjtnQkFDRCxPQUFPLEVBQUUsQ0FBQyx5QkFBeUIsRUFBRSxxQkFBcUIsQ0FBQztnQkFDM0QsZUFBZSxFQUFFO29CQUNmLHlCQUF5QjtvQkFDekIscUJBQXFCO29CQUNyQix3QkFBd0I7b0JBQ3hCLDZCQUE2QjtpQkFDOUI7Z0JBQ0QsU0FBUyxFQUFFO29CQUNULGFBQWE7b0JBQ2I7d0JBQ0UsT0FBTyxFQUFFLHdCQUF3Qjt3QkFDakMsUUFBUSxJQUFlO3FCQUN4QjtpQkFDRjthQUNGIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTW9kdWxlV2l0aFByb3ZpZGVycywgTmdNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7XG4gIENvcmVNb2R1bGUsXG4gIEhPT0tfQUNUSU9OX0JBUixcbiAgSE9PS19ST1VURSxcbiAgVmlld0NvbnRleHQsXG4gIEhPT0tfVEFCU1xufSBmcm9tICdAYzh5L25neC1jb21wb25lbnRzJztcbmltcG9ydCB7IEJzRHJvcGRvd25Nb2R1bGUgfSBmcm9tICduZ3gtYm9vdHN0cmFwL2Ryb3Bkb3duJztcbmltcG9ydCB7IFBvcG92ZXJNb2R1bGUgfSBmcm9tICduZ3gtYm9vdHN0cmFwL3BvcG92ZXInO1xuaW1wb3J0IHsgVG9vbHRpcE1vZHVsZSB9IGZyb20gJ25neC1ib290c3RyYXAvdG9vbHRpcCc7XG5pbXBvcnQgeyBBc3NldFNlbGVjdG9yTW9kdWxlIH0gZnJvbSAnQGM4eS9uZ3gtY29tcG9uZW50cy9hc3NldHMtbmF2aWdhdG9yJztcbmltcG9ydCB7IEFkZERhc2hib2FyZENvbXBvbmVudCB9IGZyb20gJy4vYWRkLWRhc2hib2FyZC5jb21wb25lbnQnO1xuaW1wb3J0IHsgQWRkRGFzaGJvYXJkRmFjdG9yeSB9IGZyb20gJy4vYWRkLWRhc2hib2FyZC5mYWN0b3J5JztcbmltcG9ydCB7IEFwcGVhcmFuY2VTZXR0aW5nc0NvbXBvbmVudCB9IGZyb20gJy4vYXBwZWFyYW5jZS1zZXR0aW5ncy5jb21wb25lbnQnO1xuaW1wb3J0IHsgQ29udGV4dERhc2hib2FyZENvbXBvbmVudCB9IGZyb20gJy4vY29udGV4dC1kYXNoYm9hcmQuY29tcG9uZW50JztcbmltcG9ydCB7IENvbnRleHREYXNoYm9hcmRDb25maWcsIENPTlRFWFRfREFTSEJPQVJEX0NPTkZJRyB9IGZyb20gJy4vY29udGV4dC1kYXNoYm9hcmQubW9kZWwnO1xuaW1wb3J0IHsgQ29udGV4dERhc2hib2FyZFNlcnZpY2UgfSBmcm9tICcuL2NvbnRleHQtZGFzaGJvYXJkLnNlcnZpY2UnO1xuaW1wb3J0IHsgRGFzaGJvYXJkQWN0aW9uQmFyRmFjdG9yeSB9IGZyb20gJy4vZGFzaGJvYXJkLWFjdGlvbi1iYXIuZmFjdG9yeSc7XG5pbXBvcnQgeyBEYXNoYm9hcmREZXRhaWxDb21wb25lbnQgfSBmcm9tICcuL2Rhc2hib2FyZC1kZXRhaWwuY29tcG9uZW50JztcbmltcG9ydCB7IERldmljZURhc2hib2FyZEd1YXJkIH0gZnJvbSAnLi9kZXZpY2UtZGFzaGJvYXJkLmd1YXJkJztcbmltcG9ydCB7IEdyb3VwRGFzaGJvYXJkR3VhcmQgfSBmcm9tICcuL2dyb3VwLWRhc2hib2FyZC5ndWFyZCc7XG5pbXBvcnQgeyBQYXN0ZURhc2hib2FyZEFjdGlvbkNvbXBvbmVudCB9IGZyb20gJy4vcGFzdGUtZGFzaGJvYXJkLWFjdGlvbi5jb21wb25lbnQnO1xuaW1wb3J0IHsgV2lkZ2V0Q29uZmlnQ29tcG9uZW50IH0gZnJvbSAnLi93aWRnZXQtY29uZmlnLmNvbXBvbmVudCc7XG5pbXBvcnQgeyBXaWRnZXRQcmV2aWV3Q29tcG9uZW50IH0gZnJvbSAnLi93aWRnZXQtcHJldmlldy5jb21wb25lbnQnO1xuaW1wb3J0IHsgV2lkZ2V0U2VydmljZSB9IGZyb20gJy4vd2lkZ2V0LnNlcnZpY2UnO1xuXG5jb25zdCBkZWZhdWx0Q29uZmlnID0ge1xuICBhbGxvd0Z1bGxzY3JlZW46IHRydWUsXG4gIHdpZGdldEZpbHRlcih7IGRhdGEgfSkge1xuICAgIHJldHVybiAhKGRhdGEgJiYgZGF0YS5zZXR0aW5ncyAmJiBkYXRhLnNldHRpbmdzLm5vTmV3V2lkZ2V0cyk7XG4gIH0sXG4gIHJvdXRlczogW1xuICAgIHtcbiAgICAgIHBhdGg6ICdkYXNoYm9hcmQvOmRhc2hib2FyZElkJyxcbiAgICAgIGNvbXBvbmVudDogQ29udGV4dERhc2hib2FyZENvbXBvbmVudCxcbiAgICAgIGNhbkFjdGl2YXRlOiBbRGV2aWNlRGFzaGJvYXJkR3VhcmRdLFxuICAgICAgY29udGV4dDogVmlld0NvbnRleHQuRGV2aWNlXG4gICAgfSxcbiAgICB7XG4gICAgICBwYXRoOiAnZGFzaGJvYXJkLzpkYXNoYm9hcmRJZCcsXG4gICAgICBjb21wb25lbnQ6IENvbnRleHREYXNoYm9hcmRDb21wb25lbnQsXG4gICAgICBjYW5BY3RpdmF0ZTogW0dyb3VwRGFzaGJvYXJkR3VhcmRdLFxuICAgICAgY29udGV4dDogVmlld0NvbnRleHQuR3JvdXBcbiAgICB9XG4gIF1cbn07XG5cbkBOZ01vZHVsZSh7XG4gIGRlY2xhcmF0aW9uczogW1xuICAgIEFwcGVhcmFuY2VTZXR0aW5nc0NvbXBvbmVudCxcbiAgICBDb250ZXh0RGFzaGJvYXJkQ29tcG9uZW50LFxuICAgIFdpZGdldENvbmZpZ0NvbXBvbmVudCxcbiAgICBXaWRnZXRQcmV2aWV3Q29tcG9uZW50LFxuICAgIERhc2hib2FyZERldGFpbENvbXBvbmVudCxcbiAgICBBZGREYXNoYm9hcmRDb21wb25lbnQsXG4gICAgUGFzdGVEYXNoYm9hcmRBY3Rpb25Db21wb25lbnRcbiAgXSxcbiAgaW1wb3J0czogW1xuICAgIENvcmVNb2R1bGUsXG4gICAgVG9vbHRpcE1vZHVsZSxcbiAgICBQb3BvdmVyTW9kdWxlLFxuICAgIEFzc2V0U2VsZWN0b3JNb2R1bGUsXG4gICAgQnNEcm9wZG93bk1vZHVsZS5mb3JSb290KClcbiAgXSxcbiAgZXhwb3J0czogW0NvbnRleHREYXNoYm9hcmRDb21wb25lbnQsIFdpZGdldENvbmZpZ0NvbXBvbmVudF0sXG4gIGVudHJ5Q29tcG9uZW50czogW1xuICAgIENvbnRleHREYXNoYm9hcmRDb21wb25lbnQsXG4gICAgV2lkZ2V0Q29uZmlnQ29tcG9uZW50LFxuICAgIERhc2hib2FyZERldGFpbENvbXBvbmVudCxcbiAgICBQYXN0ZURhc2hib2FyZEFjdGlvbkNvbXBvbmVudFxuICBdLFxuICBwcm92aWRlcnM6IFtcbiAgICBXaWRnZXRTZXJ2aWNlLFxuICAgIHtcbiAgICAgIHByb3ZpZGU6IENPTlRFWFRfREFTSEJPQVJEX0NPTkZJRyxcbiAgICAgIHVzZVZhbHVlOiBkZWZhdWx0Q29uZmlnXG4gICAgfVxuICBdXG59KVxuZXhwb3J0IGNsYXNzIENvbnRleHREYXNoYm9hcmRNb2R1bGUge1xuICBzdGF0aWMgY29uZmlnKGNvbmZpZzogQ29udGV4dERhc2hib2FyZENvbmZpZyA9IHt9KTogTW9kdWxlV2l0aFByb3ZpZGVyczxDb250ZXh0RGFzaGJvYXJkTW9kdWxlPiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5nTW9kdWxlOiBDb250ZXh0RGFzaGJvYXJkTW9kdWxlLFxuICAgICAgcHJvdmlkZXJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBwcm92aWRlOiBDT05URVhUX0RBU0hCT0FSRF9DT05GSUcsXG4gICAgICAgICAgdXNlVmFsdWU6IHsgLi4uZGVmYXVsdENvbmZpZywgLi4uY29uZmlnIH1cbiAgICAgICAgfSxcbiAgICAgICAgQ29udGV4dERhc2hib2FyZFNlcnZpY2UsXG4gICAgICAgIERldmljZURhc2hib2FyZEd1YXJkLFxuICAgICAgICBHcm91cERhc2hib2FyZEd1YXJkLFxuICAgICAgICB7XG4gICAgICAgICAgcHJvdmlkZTogSE9PS19ST1VURSxcbiAgICAgICAgICB1c2VWYWx1ZTogeyAuLi5kZWZhdWx0Q29uZmlnLCAuLi5jb25maWcgfS5yb3V0ZXMsXG4gICAgICAgICAgbXVsdGk6IHRydWVcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHByb3ZpZGU6IEhPT0tfVEFCUyxcbiAgICAgICAgICB1c2VFeGlzdGluZzogQWRkRGFzaGJvYXJkRmFjdG9yeSxcbiAgICAgICAgICBtdWx0aTogdHJ1ZVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgcHJvdmlkZTogSE9PS19BQ1RJT05fQkFSLFxuICAgICAgICAgIHVzZUNsYXNzOiBEYXNoYm9hcmRBY3Rpb25CYXJGYWN0b3J5LFxuICAgICAgICAgIG11bHRpOiB0cnVlXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9O1xuICB9XG59XG4iXX0=