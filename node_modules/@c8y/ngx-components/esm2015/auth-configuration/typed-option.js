import { isString } from 'lodash-es';
export class TypedOption {
    constructor(category, key, type, defaultValue, value) {
        this.category = category;
        this.key = key;
        this.type = type;
        this.defaultValue = defaultValue;
        this.value = value;
    }
    apply(option) {
        this.category = option.category;
        this.key = option.key;
        this.value = option.value;
    }
    getValue() {
        try {
            return this.getValueByType();
        }
        catch (ex) {
            return this.defaultValue;
        }
    }
    getValueByType() {
        switch (this.type) {
            case 'boolean':
                return this.value.toLowerCase() === 'true';
            case 'number':
                return this.parseNumberValue(this.value);
            case 'string':
                return this.parseStringValue(this.value);
            default:
                throw new TypeError();
        }
    }
    parseNumberValue(stringValue) {
        const value = Number.parseInt(stringValue, 10);
        if (typeof value !== 'number' || isNaN(value)) {
            throw new Error();
        }
        return value;
    }
    parseStringValue(value) {
        if (!isString(value)) {
            throw new Error();
        }
        return value;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHlwZWQtb3B0aW9uLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vYXV0aC1jb25maWd1cmF0aW9uL3R5cGVkLW9wdGlvbi50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFJQSxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sV0FBVyxDQUFDO0FBRXJDLE1BQU0sT0FBTyxXQUFXO0lBQ3RCLFlBQ1MsUUFBZ0IsRUFDaEIsR0FBVyxFQUNYLElBQXFDLEVBQ3JDLFlBQXdDLEVBQ3hDLEtBQWM7UUFKZCxhQUFRLEdBQVIsUUFBUSxDQUFRO1FBQ2hCLFFBQUcsR0FBSCxHQUFHLENBQVE7UUFDWCxTQUFJLEdBQUosSUFBSSxDQUFpQztRQUNyQyxpQkFBWSxHQUFaLFlBQVksQ0FBNEI7UUFDeEMsVUFBSyxHQUFMLEtBQUssQ0FBUztJQUV2QixDQUFDO0lBRUQsS0FBSyxDQUFDLE1BQXFDO1FBQ3pDLElBQUksQ0FBQyxRQUFRLEdBQUcsTUFBTSxDQUFDLFFBQVEsQ0FBQztRQUNoQyxJQUFJLENBQUMsR0FBRyxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQUM7UUFDdEIsSUFBSSxDQUFDLEtBQUssR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDO0lBQzVCLENBQUM7SUFFRCxRQUFRO1FBQ04sSUFBSTtZQUNGLE9BQU8sSUFBSSxDQUFDLGNBQWMsRUFBRSxDQUFDO1NBQzlCO1FBQUMsT0FBTyxFQUFFLEVBQUU7WUFDWCxPQUFPLElBQUksQ0FBQyxZQUFZLENBQUM7U0FDMUI7SUFDSCxDQUFDO0lBRU8sY0FBYztRQUNwQixRQUFRLElBQUksQ0FBQyxJQUFJLEVBQUU7WUFDakIsS0FBSyxTQUFTO2dCQUNaLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQyxXQUFXLEVBQUUsS0FBSyxNQUFNLENBQUM7WUFDN0MsS0FBSyxRQUFRO2dCQUNYLE9BQU8sSUFBSSxDQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUMzQyxLQUFLLFFBQVE7Z0JBQ1gsT0FBTyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQzNDO2dCQUNFLE1BQU0sSUFBSSxTQUFTLEVBQUUsQ0FBQztTQUN6QjtJQUNILENBQUM7SUFFTyxnQkFBZ0IsQ0FBQyxXQUFtQjtRQUMxQyxNQUFNLEtBQUssR0FBRyxNQUFNLENBQUMsUUFBUSxDQUFDLFdBQVcsRUFBRSxFQUFFLENBQUMsQ0FBQztRQUMvQyxJQUFLLE9BQU8sS0FBSyxLQUFLLFFBQVEsSUFBSSxLQUFLLENBQUMsS0FBSyxDQUFDLEVBQUU7WUFDOUMsTUFBTSxJQUFJLEtBQUssRUFBRSxDQUFDO1NBQ25CO1FBQ0QsT0FBTyxLQUFLLENBQUM7SUFDZixDQUFDO0lBRU8sZ0JBQWdCLENBQUMsS0FBYTtRQUNwQyxJQUFJLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxFQUFFO1lBQ3BCLE1BQU0sSUFBSSxLQUFLLEVBQUUsQ0FBQztTQUNuQjtRQUNELE9BQU8sS0FBSyxDQUFDO0lBQ2YsQ0FBQztDQUNGIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgSVN5c3RlbU9wdGlvbixcbiAgSVRlbmFudE9wdGlvblxufSBmcm9tICdAYzh5L2NsaWVudCc7XG5pbXBvcnQgeyBpc1N0cmluZyB9IGZyb20gJ2xvZGFzaC1lcyc7XG5cbmV4cG9ydCBjbGFzcyBUeXBlZE9wdGlvbiBpbXBsZW1lbnRzIElTeXN0ZW1PcHRpb24sIElUZW5hbnRPcHRpb24ge1xuICBjb25zdHJ1Y3RvcihcbiAgICBwdWJsaWMgY2F0ZWdvcnk6IHN0cmluZyxcbiAgICBwdWJsaWMga2V5OiBzdHJpbmcsXG4gICAgcHVibGljIHR5cGU6ICdzdHJpbmcnIHwgJ2Jvb2xlYW4nIHwgJ251bWJlcicsXG4gICAgcHVibGljIGRlZmF1bHRWYWx1ZT86IHN0cmluZyB8IGJvb2xlYW4gfCBudW1iZXIsXG4gICAgcHVibGljIHZhbHVlPzogc3RyaW5nXG4gICkge1xuICB9XG5cbiAgYXBwbHkob3B0aW9uOiBJU3lzdGVtT3B0aW9uIHwgSVRlbmFudE9wdGlvbikge1xuICAgIHRoaXMuY2F0ZWdvcnkgPSBvcHRpb24uY2F0ZWdvcnk7XG4gICAgdGhpcy5rZXkgPSBvcHRpb24ua2V5O1xuICAgIHRoaXMudmFsdWUgPSBvcHRpb24udmFsdWU7XG4gIH1cblxuICBnZXRWYWx1ZSgpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIHRoaXMuZ2V0VmFsdWVCeVR5cGUoKTtcbiAgICB9IGNhdGNoIChleCkge1xuICAgICAgcmV0dXJuIHRoaXMuZGVmYXVsdFZhbHVlO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZ2V0VmFsdWVCeVR5cGUoKSB7XG4gICAgc3dpdGNoICh0aGlzLnR5cGUpIHtcbiAgICAgIGNhc2UgJ2Jvb2xlYW4nOlxuICAgICAgICByZXR1cm4gdGhpcy52YWx1ZS50b0xvd2VyQ2FzZSgpID09PSAndHJ1ZSc7XG4gICAgICBjYXNlICdudW1iZXInOlxuICAgICAgICByZXR1cm4gdGhpcy5wYXJzZU51bWJlclZhbHVlKHRoaXMudmFsdWUpO1xuICAgICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VTdHJpbmdWYWx1ZSh0aGlzLnZhbHVlKTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHBhcnNlTnVtYmVyVmFsdWUoc3RyaW5nVmFsdWU6IHN0cmluZykge1xuICAgIGNvbnN0IHZhbHVlID0gTnVtYmVyLnBhcnNlSW50KHN0cmluZ1ZhbHVlLCAxMCk7XG4gICAgaWYgKCB0eXBlb2YgdmFsdWUgIT09ICdudW1iZXInIHx8IGlzTmFOKHZhbHVlKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCk7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuXG4gIHByaXZhdGUgcGFyc2VTdHJpbmdWYWx1ZSh2YWx1ZTogc3RyaW5nKSB7XG4gICAgaWYgKCFpc1N0cmluZyh2YWx1ZSkpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcigpO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbn1cbiJdfQ==