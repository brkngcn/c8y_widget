import { Injectable } from '@angular/core';
import { InventoryService } from '@c8y/client';
import { get } from 'lodash-es';
import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from '@c8y/client';
const SERVICE_FRAGMENT = 'c8y_Service';
export class ServicesDeviceTabGuard {
    constructor(inventoryService) {
        this.inventoryService = inventoryService;
    }
    canActivate(route) {
        const contextData = get(route, 'data.contextData') || get(route, 'parent.data.contextData');
        return this.inventoryService
            .childAdditionsList(contextData, { query: `type eq ${SERVICE_FRAGMENT}`, pageSize: 1 })
            .then(result => { var _a; return !!((_a = result === null || result === void 0 ? void 0 : result.data) === null || _a === void 0 ? void 0 : _a.length); });
    }
}
ServicesDeviceTabGuard.ɵfac = function ServicesDeviceTabGuard_Factory(t) { return new (t || ServicesDeviceTabGuard)(ɵngcc0.ɵɵinject(ɵngcc1.InventoryService)); };
ServicesDeviceTabGuard.ɵprov = /*@__PURE__*/ ɵngcc0.ɵɵdefineInjectable({ token: ServicesDeviceTabGuard, factory: ServicesDeviceTabGuard.ɵfac });
ServicesDeviceTabGuard.ctorParameters = () => [
    { type: InventoryService }
];
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(ServicesDeviceTabGuard, [{
        type: Injectable
    }], function () { return [{ type: ɵngcc1.InventoryService }]; }, null); })();

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VydmljZXMtZGV2aWNlLXRhYi5ndWFyZC5qcyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc2VydmljZXMvc2VydmljZXMtZGV2aWNlLXRhYi9zZXJ2aWNlcy1kZXZpY2UtdGFiLmd1YXJkLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxVQUFVLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFM0MsT0FBTyxFQUFFLGdCQUFnQixFQUFFLE1BQU0sYUFBYSxDQUFDO0FBQy9DLE9BQU8sRUFBRSxHQUFHLEVBQUUsTUFBTSxXQUFXLENBQUM7OztBQUVoQyxNQUFNLGdCQUFnQixHQUFHLGFBQWEsQ0FBQztBQUd2QyxNQUFNLE9BQU8sc0JBQXNCO0FBQUcsSUFDcEMsWUFBb0IsZ0JBQWtDO0FBQUksUUFBdEMscUJBQWdCLEdBQWhCLGdCQUFnQixDQUFrQjtBQUFDLElBQUUsQ0FBQztBQUM1RCxJQUNFLFdBQVcsQ0FBQyxLQUFLO0FBQ25CLFFBQUksTUFBTSxXQUFXLEdBQUcsR0FBRyxDQUFDLEtBQUssRUFBRSxrQkFBa0IsQ0FBQyxJQUFJLEdBQUcsQ0FBQyxLQUFLLEVBQUUseUJBQXlCLENBQUMsQ0FBQztBQUNoRyxRQUFJLE9BQU8sSUFBSSxDQUFDLGdCQUFnQjtBQUNoQyxhQUFPLGtCQUFrQixDQUFDLFdBQVcsRUFBRSxFQUFFLEtBQUssRUFBRSxXQUFXLGdCQUFnQixFQUFFLEVBQUUsUUFBUSxFQUFFLENBQUMsRUFBRSxDQUFDO0FBQzdGLGFBQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFFLFdBQUMsT0FBQSxDQUFDLENBQUMsQ0FBQSxNQUFBLE1BQU0sYUFBTixNQUFNLHVCQUFOLE1BQU0sQ0FBRSxJQUFJLDBDQUFFLE1BQU0sQ0FBQSxDQUFBLEVBQUEsQ0FBQyxDQUFDO0FBQzlDLElBQUUsQ0FBQztBQUNIO2tEQVZDLFVBQVU7Z0pBQ1Q7QUFBQztBQUFnRCxZQU4xQyxnQkFBZ0I7QUFBRzs7O2lGQUFFO0FBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBDYW5BY3RpdmF0ZSB9IGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7XG5pbXBvcnQgeyBJbnZlbnRvcnlTZXJ2aWNlIH0gZnJvbSAnQGM4eS9jbGllbnQnO1xuaW1wb3J0IHsgZ2V0IH0gZnJvbSAnbG9kYXNoLWVzJztcblxuY29uc3QgU0VSVklDRV9GUkFHTUVOVCA9ICdjOHlfU2VydmljZSc7XG5cbkBJbmplY3RhYmxlKClcbmV4cG9ydCBjbGFzcyBTZXJ2aWNlc0RldmljZVRhYkd1YXJkIGltcGxlbWVudHMgQ2FuQWN0aXZhdGUge1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGludmVudG9yeVNlcnZpY2U6IEludmVudG9yeVNlcnZpY2UpIHt9XG5cbiAgY2FuQWN0aXZhdGUocm91dGUpIHtcbiAgICBjb25zdCBjb250ZXh0RGF0YSA9IGdldChyb3V0ZSwgJ2RhdGEuY29udGV4dERhdGEnKSB8fCBnZXQocm91dGUsICdwYXJlbnQuZGF0YS5jb250ZXh0RGF0YScpO1xuICAgIHJldHVybiB0aGlzLmludmVudG9yeVNlcnZpY2VcbiAgICAgIC5jaGlsZEFkZGl0aW9uc0xpc3QoY29udGV4dERhdGEsIHsgcXVlcnk6IGB0eXBlIGVxICR7U0VSVklDRV9GUkFHTUVOVH1gLCBwYWdlU2l6ZTogMSB9KVxuICAgICAgLnRoZW4ocmVzdWx0ID0+ICEhcmVzdWx0Py5kYXRhPy5sZW5ndGgpO1xuICB9XG59XG4iXX0=