import { Component, EventEmitter, Input, Output } from '@angular/core';
import { iconsByCategory } from './icon-constant';
import * as ɵngcc0 from '@angular/core';
import * as ɵngcc1 from '@angular/forms';
import * as ɵngcc2 from '@angular/common';
import * as ɵngcc3 from '@c8y/ngx-components';

function IconSelectorComponent_span_6_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "span", 16);
    ɵngcc0.ɵɵelement(1, "i", 17);
    ɵngcc0.ɵɵelementEnd();
} }
function IconSelectorComponent_span_7_Template(rf, ctx) { if (rf & 1) {
    const _r5 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "span", 18);
    ɵngcc0.ɵɵlistener("click", function IconSelectorComponent_span_7_Template_span_click_0_listener() { ɵngcc0.ɵɵrestoreView(_r5); const ctx_r4 = ɵngcc0.ɵɵnextContext(); return ctx_r4.quickSearch = ""; });
    ɵngcc0.ɵɵelement(1, "i", 19);
    ɵngcc0.ɵɵelementEnd();
} }
function IconSelectorComponent_option_14_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "option", 20);
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵpipe(2, "translate");
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const category_r6 = ctx.$implicit;
    ɵngcc0.ɵɵproperty("ngValue", category_r6);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate1(" ", ɵngcc0.ɵɵpipeBind1(2, 2, category_r6.displayName), " ");
} }
function IconSelectorComponent_div_19_div_1_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "div", 23);
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵpipe(2, "translate");
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const iconDefinition_r7 = ɵngcc0.ɵɵnextContext().$implicit;
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate1(" ", ɵngcc0.ɵɵpipeBind1(2, 1, iconDefinition_r7.value.label), " ");
} }
function IconSelectorComponent_div_19_div_2_div_1_small_3_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "small", 29);
    ɵngcc0.ɵɵtext(1);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const icon_r11 = ɵngcc0.ɵɵnextContext(2).$implicit;
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵtextInterpolate(icon_r11);
} }
const _c0 = function (a0) { return { "dtm-icon-grid__item--selected": a0 }; };
function IconSelectorComponent_div_19_div_2_div_1_Template(rf, ctx) { if (rf & 1) {
    const _r17 = ɵngcc0.ɵɵgetCurrentView();
    ɵngcc0.ɵɵelementStart(0, "div", 25);
    ɵngcc0.ɵɵelementStart(1, "button", 26);
    ɵngcc0.ɵɵlistener("click", function IconSelectorComponent_div_19_div_2_div_1_Template_button_click_1_listener() { ɵngcc0.ɵɵrestoreView(_r17); const icon_r11 = ɵngcc0.ɵɵnextContext().$implicit; const ctx_r15 = ɵngcc0.ɵɵnextContext(2); return ctx_r15.onIconClicked(icon_r11); });
    ɵngcc0.ɵɵelement(2, "i", 27);
    ɵngcc0.ɵɵtemplate(3, IconSelectorComponent_div_19_div_2_div_1_small_3_Template, 2, 1, "small", 28);
    ɵngcc0.ɵɵelementEnd();
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const icon_r11 = ɵngcc0.ɵɵnextContext().$implicit;
    const ctx_r12 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵproperty("ngClass", ɵngcc0.ɵɵpureFunction1(4, _c0, ctx_r12.selectedIcon && icon_r11 === ctx_r12.selectedIcon));
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("title", icon_r11);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("c8yIcon", icon_r11);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", ctx_r12.showIconClass);
} }
function IconSelectorComponent_div_19_div_2_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "div", 21);
    ɵngcc0.ɵɵtemplate(1, IconSelectorComponent_div_19_div_2_div_1_Template, 4, 6, "div", 24);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const icon_r11 = ctx.$implicit;
    const ctx_r9 = ɵngcc0.ɵɵnextContext(2);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", !ctx_r9.quickSearch || ctx_r9.quickSearch.length === 0 || icon_r11.indexOf(ctx_r9.quickSearch) > -1);
} }
function IconSelectorComponent_div_19_Template(rf, ctx) { if (rf & 1) {
    ɵngcc0.ɵɵelementStart(0, "div", 21);
    ɵngcc0.ɵɵtemplate(1, IconSelectorComponent_div_19_div_1_Template, 3, 3, "div", 22);
    ɵngcc0.ɵɵtemplate(2, IconSelectorComponent_div_19_div_2_Template, 2, 1, "div", 15);
    ɵngcc0.ɵɵelementEnd();
} if (rf & 2) {
    const iconDefinition_r7 = ctx.$implicit;
    const ctx_r3 = ɵngcc0.ɵɵnextContext();
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngIf", !ctx_r3.quickSearch);
    ɵngcc0.ɵɵadvance(1);
    ɵngcc0.ɵɵproperty("ngForOf", iconDefinition_r7.value.icons);
} }
const allIconCategory = { name: 'all', displayName: 'All' };
export class IconSelectorComponent {
    constructor() {
        this.iconCategoriesToExclude = [];
        this.showIconClass = true;
        this.onSelect = new EventEmitter();
    }
    ngOnInit() {
        this.iconCategories = this.composeIconCategories();
        this.selectedIconCategory = allIconCategory;
        this.resetIcons();
    }
    onCategoryFilterChanged() {
        const selectedCategory = this.selectedIconCategory;
        if (selectedCategory.name === allIconCategory.name) {
            this.resetIcons();
            return;
        }
        else {
            this.icons = {
                [selectedCategory.name]: iconsByCategory[selectedCategory.name]
            };
        }
    }
    onIconClicked(icon) {
        this.selectedIcon = icon;
        this.onSelect.emit(icon);
    }
    composeIconCategories() {
        const iconCategories = [allIconCategory];
        for (const iconType of Object.keys(iconsByCategory)) {
            if (this.iconCategoriesToExclude.includes(iconType)) {
                continue;
            }
            iconCategories.push({
                name: iconType,
                displayName: iconsByCategory[iconType].label
            });
        }
        return iconCategories;
    }
    resetIcons() {
        this.icons = Object.assign({}, iconsByCategory);
        this.iconCategoriesToExclude.forEach(category => {
            if (this.icons[category]) {
                delete this.icons[category];
            }
        });
    }
}
IconSelectorComponent.ɵfac = function IconSelectorComponent_Factory(t) { return new (t || IconSelectorComponent)(); };
IconSelectorComponent.ɵcmp = /*@__PURE__*/ ɵngcc0.ɵɵdefineComponent({ type: IconSelectorComponent, selectors: [["c8y-icon-selector"]], inputs: { iconCategoriesToExclude: "iconCategoriesToExclude", showIconClass: "showIconClass", selectedIcon: "selectedIcon" }, outputs: { onSelect: "onSelect" }, decls: 21, vars: 11, consts: [[1, "p-l-24", "p-r-24", "p-t-8", "p-b-8", "separator-bottom"], [1, "row", "d-flex-sm"], [1, "col-sm-6", "m-b-8"], [1, "input-group-search", "input-group", 2, "width", "auto"], ["type", "search", "id", "filter-icons", 1, "form-control", 3, "ngModel", "placeholder", "ngModelChange"], ["class", "input-group-addon", 4, "ngIf"], ["class", "input-group-addon pointer", 3, "click", 4, "ngIf"], [1, "d-flex", "a-i-center"], ["translate", "", 1, "m-b-0", "m-r-8", "flex-no-shrink"], [1, "c8y-select-wrapper"], ["id", "exampleSelect", 1, "form-control", 3, "ngModel", "ngModelChange", "change"], [3, "ngValue", 4, "ngFor", "ngForOf"], [1, "modal-inner-scroll"], [1, "modal-body", 2, "height", "calc(100vh - 293px)"], [1, "dtm-icon-grid"], ["class", "d-contents", 4, "ngFor", "ngForOf"], [1, "input-group-addon"], ["c8yIcon", "search"], [1, "input-group-addon", "pointer", 3, "click"], ["c8yIcon", "times"], [3, "ngValue"], [1, "d-contents"], ["class", "legend form-block center grid__col--fullspan", 4, "ngIf"], [1, "legend", "form-block", "center", "grid__col--fullspan"], ["class", "dtm-icon-grid__item", 3, "ngClass", 4, "ngIf"], [1, "dtm-icon-grid__item", 3, "ngClass"], [1, "dtm-icon-grid__btn", 3, "title", "click"], [1, "d-block", "icon-40", 3, "c8yIcon"], ["class", "text-break-word", 4, "ngIf"], [1, "text-break-word"]], template: function IconSelectorComponent_Template(rf, ctx) { if (rf & 1) {
        ɵngcc0.ɵɵelementStart(0, "div", 0);
        ɵngcc0.ɵɵelementStart(1, "div", 1);
        ɵngcc0.ɵɵelementStart(2, "div", 2);
        ɵngcc0.ɵɵelementStart(3, "div", 3);
        ɵngcc0.ɵɵelementStart(4, "input", 4);
        ɵngcc0.ɵɵlistener("ngModelChange", function IconSelectorComponent_Template_input_ngModelChange_4_listener($event) { return ctx.quickSearch = $event; });
        ɵngcc0.ɵɵpipe(5, "translate");
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵtemplate(6, IconSelectorComponent_span_6_Template, 2, 0, "span", 5);
        ɵngcc0.ɵɵtemplate(7, IconSelectorComponent_span_7_Template, 2, 0, "span", 6);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementStart(8, "div", 2);
        ɵngcc0.ɵɵelementStart(9, "div", 7);
        ɵngcc0.ɵɵelementStart(10, "label", 8);
        ɵngcc0.ɵɵtext(11, "Filter by type");
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementStart(12, "div", 9);
        ɵngcc0.ɵɵelementStart(13, "select", 10);
        ɵngcc0.ɵɵlistener("ngModelChange", function IconSelectorComponent_Template_select_ngModelChange_13_listener($event) { return ctx.selectedIconCategory = $event; })("change", function IconSelectorComponent_Template_select_change_13_listener() { return ctx.onCategoryFilterChanged(); });
        ɵngcc0.ɵɵtemplate(14, IconSelectorComponent_option_14_Template, 3, 4, "option", 11);
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelement(15, "span");
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementStart(16, "div", 12);
        ɵngcc0.ɵɵelementStart(17, "div", 13);
        ɵngcc0.ɵɵelementStart(18, "div", 14);
        ɵngcc0.ɵɵtemplate(19, IconSelectorComponent_div_19_Template, 3, 2, "div", 15);
        ɵngcc0.ɵɵpipe(20, "keyvalue");
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
        ɵngcc0.ɵɵelementEnd();
    } if (rf & 2) {
        ɵngcc0.ɵɵadvance(4);
        ɵngcc0.ɵɵpropertyInterpolate("placeholder", ɵngcc0.ɵɵpipeBind1(5, 7, "Type to filter icons\u2026"));
        ɵngcc0.ɵɵproperty("ngModel", ctx.quickSearch);
        ɵngcc0.ɵɵadvance(2);
        ɵngcc0.ɵɵproperty("ngIf", !ctx.quickSearch || ctx.quickSearch.length === 0);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngIf", ctx.quickSearch && ctx.quickSearch.length > 0);
        ɵngcc0.ɵɵadvance(6);
        ɵngcc0.ɵɵproperty("ngModel", ctx.selectedIconCategory);
        ɵngcc0.ɵɵadvance(1);
        ɵngcc0.ɵɵproperty("ngForOf", ctx.iconCategories);
        ɵngcc0.ɵɵadvance(5);
        ɵngcc0.ɵɵproperty("ngForOf", ɵngcc0.ɵɵpipeBind1(20, 9, ctx.icons));
    } }, directives: [ɵngcc1.DefaultValueAccessor, ɵngcc1.NgControlStatus, ɵngcc1.NgModel, ɵngcc2.NgIf, ɵngcc3.C8yTranslateDirective, ɵngcc1.SelectControlValueAccessor, ɵngcc2.NgForOf, ɵngcc3.IconDirective, ɵngcc1.NgSelectOption, ɵngcc1.ɵNgSelectMultipleOption, ɵngcc2.NgClass], pipes: [ɵngcc3.C8yTranslatePipe, ɵngcc2.KeyValuePipe], encapsulation: 2 });
IconSelectorComponent.propDecorators = {
    iconCategoriesToExclude: [{ type: Input }],
    showIconClass: [{ type: Input }],
    onSelect: [{ type: Output }],
    selectedIcon: [{ type: Input }]
};
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(IconSelectorComponent, [{
        type: Component,
        args: [{
                selector: 'c8y-icon-selector',
                template: "<div class=\"p-l-24 p-r-24 p-t-8 p-b-8 separator-bottom\">\n  <div class=\"row d-flex-sm\">\n    <div class=\"col-sm-6 m-b-8\">\n      <div class=\"input-group-search input-group\" style=\"width: auto\">\n        <input\n          type=\"search\"\n          class=\"form-control\"\n          id=\"filter-icons\"\n          [(ngModel)]=\"quickSearch\"\n          placeholder=\"{{ 'Type to filter icons\u2026' | translate }}\"\n        />\n        <span class=\"input-group-addon\" *ngIf=\"!quickSearch || quickSearch.length === 0\">\n          <i c8yIcon=\"search\"></i>\n        </span>\n        <span\n          class=\"input-group-addon pointer\"\n          *ngIf=\"quickSearch && quickSearch.length > 0\"\n          (click)=\"quickSearch = ''\"\n        >\n          <i c8yIcon=\"times\"></i>\n        </span>\n      </div>\n    </div>\n    <div class=\"col-sm-6 m-b-8\">\n      <div class=\"d-flex a-i-center\">\n        <label class=\"m-b-0 m-r-8 flex-no-shrink\" translate>Filter by type</label>\n        <div class=\"c8y-select-wrapper\">\n          <select\n            id=\"exampleSelect\"\n            class=\"form-control\"\n            [(ngModel)]=\"selectedIconCategory\"\n            (change)=\"onCategoryFilterChanged()\"\n          >\n            <option *ngFor=\"let category of iconCategories\" [ngValue]=\"category\">\n              {{ category.displayName | translate }}\n            </option>\n          </select>\n          <span></span>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n<div class=\"modal-inner-scroll\">\n  <div class=\"modal-body\" style=\"height: calc(100vh - 293px)\">\n    <div class=\"dtm-icon-grid\">\n      <div *ngFor=\"let iconDefinition of icons | keyvalue\" class=\"d-contents\">\n        <div *ngIf=\"!quickSearch\" class=\"legend form-block center grid__col--fullspan\">\n          {{ iconDefinition.value.label | translate }}\n        </div>\n\n        <div class=\"d-contents\" *ngFor=\"let icon of iconDefinition.value.icons\">\n          <div\n            class=\"dtm-icon-grid__item\"\n            [ngClass]=\"{\n              'dtm-icon-grid__item--selected': selectedIcon && icon === selectedIcon\n            }\"\n            *ngIf=\"!quickSearch || quickSearch.length === 0 || icon.indexOf(quickSearch) > -1\"\n          >\n            <button (click)=\"onIconClicked(icon)\" class=\"dtm-icon-grid__btn\" [title]=\"icon\">\n              <i [c8yIcon]=\"icon\" class=\"d-block icon-40\"></i>\n              <small *ngIf=\"showIconClass\" class=\"text-break-word\">{{ icon }}</small>\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n"
            }]
    }], function () { return []; }, { iconCategoriesToExclude: [{
            type: Input
        }], showIconClass: [{
            type: Input
        }], onSelect: [{
            type: Output
        }], selectedIcon: [{
            type: Input
        }] }); })();

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaWNvbi1zZWxlY3Rvci5jb21wb25lbnQuanMiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2ljb24tc2VsZWN0b3IvaWNvbi1zZWxlY3Rvci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxZQUFZLEVBQUUsS0FBSyxFQUFVLE1BQU0sRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUMvRSxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0saUJBQWlCLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBR2xELE1BQU0sZUFBZSxHQUFpQixFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsV0FBVyxFQUFFLEtBQUssRUFBRSxDQUFDO0FBTzFFLE1BQU0sT0FBTyxxQkFBcUI7QUFBRyxJQUxyQztBQUNHLFFBS1EsNEJBQXVCLEdBQWEsRUFBRSxDQUFDO0FBQ2xELFFBQVcsa0JBQWEsR0FBRyxJQUFJLENBQUM7QUFDaEMsUUFBWSxhQUFRLEdBQUcsSUFBSSxZQUFZLEVBQVUsQ0FBQztBQUNsRCxJQW9EQSxDQUFDO0FBQ0QsSUE5Q0UsUUFBUTtBQUFLLFFBQ1gsSUFBSSxDQUFDLGNBQWMsR0FBRyxJQUFJLENBQUMscUJBQXFCLEVBQUUsQ0FBQztBQUN2RCxRQUFJLElBQUksQ0FBQyxvQkFBb0IsR0FBRyxlQUFlLENBQUM7QUFDaEQsUUFBSSxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUM7QUFDdEIsSUFBRSxDQUFDO0FBQ0gsSUFDRSx1QkFBdUI7QUFBSyxRQUMxQixNQUFNLGdCQUFnQixHQUFHLElBQUksQ0FBQyxvQkFBb0IsQ0FBQztBQUN2RCxRQUFJLElBQUksZ0JBQWdCLENBQUMsSUFBSSxLQUFLLGVBQWUsQ0FBQyxJQUFJLEVBQUU7QUFDeEQsWUFBTSxJQUFJLENBQUMsVUFBVSxFQUFFLENBQUM7QUFDeEIsWUFBTSxPQUFPO0FBQ2IsU0FBSztBQUFDLGFBQUs7QUFDWCxZQUFNLElBQUksQ0FBQyxLQUFLLEdBQUc7QUFDbkIsZ0JBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsRUFBRSxlQUFlLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxDQUFDO0FBQ3ZFLGFBQU8sQ0FBQztBQUNSLFNBQUs7QUFDTCxJQUFFLENBQUM7QUFDSCxJQUNFLGFBQWEsQ0FBQyxJQUFZO0FBQUksUUFDNUIsSUFBSSxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUM7QUFDN0IsUUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUM3QixJQUFFLENBQUM7QUFDSCxJQUNVLHFCQUFxQjtBQUFLLFFBQ2hDLE1BQU0sY0FBYyxHQUFHLENBQUMsZUFBZSxDQUFDLENBQUM7QUFDN0MsUUFBSSxLQUFLLE1BQU0sUUFBUSxJQUFJLE1BQU0sQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLEVBQUU7QUFDekQsWUFBTSxJQUFJLElBQUksQ0FBQyx1QkFBdUIsQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLEVBQUU7QUFDM0QsZ0JBQVEsU0FBUztBQUNqQixhQUFPO0FBQ1AsWUFBTSxjQUFjLENBQUMsSUFBSSxDQUFDO0FBQzFCLGdCQUFRLElBQUksRUFBRSxRQUFRO0FBQ3RCLGdCQUFRLFdBQVcsRUFBRSxlQUFlLENBQUMsUUFBUSxDQUFDLENBQUMsS0FBSztBQUNwRCxhQUFPLENBQUMsQ0FBQztBQUNULFNBQUs7QUFDTCxRQUFJLE9BQU8sY0FBYyxDQUFDO0FBQzFCLElBQUUsQ0FBQztBQUNILElBQ1UsVUFBVTtBQUNwQixRQUFJLElBQUksQ0FBQyxLQUFLLHFCQUFRLGVBQWUsQ0FBRSxDQUFDO0FBQ3hDLFFBQUksSUFBSSxDQUFDLHVCQUF1QixDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsRUFBRTtBQUNwRCxZQUFNLElBQUksSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsRUFBRTtBQUNoQyxnQkFBUSxPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDcEMsYUFBTztBQUNQLFFBQUksQ0FBQyxDQUFDLENBQUM7QUFDUCxJQUFFLENBQUM7QUFDSDtpREE3REMsU0FBUyxTQUFDLGtCQUNULFFBQVEsRUFBRSxtQkFBbUI7YUFDN0I7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Z0JBQTZDLGNBRTlDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztrV0FDSTtBQUFDO0FBQXlDLHNDQUM1QyxLQUFLO0FBQUssNEJBQ1YsS0FBSztBQUFLLHVCQUNWLE1BQU07QUFBSywyQkFLWCxLQUFLO0FBQUk7Ozs7Ozs7Ozs7Ozs7OztvQkFBRTtBQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBFdmVudEVtaXR0ZXIsIElucHV0LCBPbkluaXQsIE91dHB1dCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgaWNvbnNCeUNhdGVnb3J5IH0gZnJvbSAnLi9pY29uLWNvbnN0YW50JztcbmltcG9ydCB7IERlZmF1bHRJY29ucywgSWNvbkNhdGVnb3J5IH0gZnJvbSAnLi9pY29uLXNlbGVjdG9yLm1vZGVsJztcblxuY29uc3QgYWxsSWNvbkNhdGVnb3J5OiBJY29uQ2F0ZWdvcnkgPSB7IG5hbWU6ICdhbGwnLCBkaXNwbGF5TmFtZTogJ0FsbCcgfTtcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnYzh5LWljb24tc2VsZWN0b3InLFxuICB0ZW1wbGF0ZVVybDogJy4vaWNvbi1zZWxlY3Rvci5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogW11cbn0pXG5leHBvcnQgY2xhc3MgSWNvblNlbGVjdG9yQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcbiAgQElucHV0KCkgaWNvbkNhdGVnb3JpZXNUb0V4Y2x1ZGU6IHN0cmluZ1tdID0gW107XG4gIEBJbnB1dCgpIHNob3dJY29uQ2xhc3MgPSB0cnVlO1xuICBAT3V0cHV0KCkgb25TZWxlY3QgPSBuZXcgRXZlbnRFbWl0dGVyPHN0cmluZz4oKTtcblxuICBpY29uQ2F0ZWdvcmllczogSWNvbkNhdGVnb3J5W107XG4gIHNlbGVjdGVkSWNvbkNhdGVnb3J5OiBJY29uQ2F0ZWdvcnk7XG4gIGljb25zOiBEZWZhdWx0SWNvbnM7XG4gIEBJbnB1dCgpIHNlbGVjdGVkSWNvbjogc3RyaW5nO1xuICBxdWlja1NlYXJjaDogc3RyaW5nO1xuXG4gIG5nT25Jbml0KCk6IHZvaWQge1xuICAgIHRoaXMuaWNvbkNhdGVnb3JpZXMgPSB0aGlzLmNvbXBvc2VJY29uQ2F0ZWdvcmllcygpO1xuICAgIHRoaXMuc2VsZWN0ZWRJY29uQ2F0ZWdvcnkgPSBhbGxJY29uQ2F0ZWdvcnk7XG4gICAgdGhpcy5yZXNldEljb25zKCk7XG4gIH1cblxuICBvbkNhdGVnb3J5RmlsdGVyQ2hhbmdlZCgpOiB2b2lkIHtcbiAgICBjb25zdCBzZWxlY3RlZENhdGVnb3J5ID0gdGhpcy5zZWxlY3RlZEljb25DYXRlZ29yeTtcbiAgICBpZiAoc2VsZWN0ZWRDYXRlZ29yeS5uYW1lID09PSBhbGxJY29uQ2F0ZWdvcnkubmFtZSkge1xuICAgICAgdGhpcy5yZXNldEljb25zKCk7XG4gICAgICByZXR1cm47XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuaWNvbnMgPSB7XG4gICAgICAgIFtzZWxlY3RlZENhdGVnb3J5Lm5hbWVdOiBpY29uc0J5Q2F0ZWdvcnlbc2VsZWN0ZWRDYXRlZ29yeS5uYW1lXVxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICBvbkljb25DbGlja2VkKGljb246IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMuc2VsZWN0ZWRJY29uID0gaWNvbjtcbiAgICB0aGlzLm9uU2VsZWN0LmVtaXQoaWNvbik7XG4gIH1cblxuICBwcml2YXRlIGNvbXBvc2VJY29uQ2F0ZWdvcmllcygpOiBJY29uQ2F0ZWdvcnlbXSB7XG4gICAgY29uc3QgaWNvbkNhdGVnb3JpZXMgPSBbYWxsSWNvbkNhdGVnb3J5XTtcbiAgICBmb3IgKGNvbnN0IGljb25UeXBlIG9mIE9iamVjdC5rZXlzKGljb25zQnlDYXRlZ29yeSkpIHtcbiAgICAgIGlmICh0aGlzLmljb25DYXRlZ29yaWVzVG9FeGNsdWRlLmluY2x1ZGVzKGljb25UeXBlKSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGljb25DYXRlZ29yaWVzLnB1c2goe1xuICAgICAgICBuYW1lOiBpY29uVHlwZSxcbiAgICAgICAgZGlzcGxheU5hbWU6IGljb25zQnlDYXRlZ29yeVtpY29uVHlwZV0ubGFiZWxcbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gaWNvbkNhdGVnb3JpZXM7XG4gIH1cblxuICBwcml2YXRlIHJlc2V0SWNvbnMoKSB7XG4gICAgdGhpcy5pY29ucyA9IHsgLi4uaWNvbnNCeUNhdGVnb3J5IH07XG4gICAgdGhpcy5pY29uQ2F0ZWdvcmllc1RvRXhjbHVkZS5mb3JFYWNoKGNhdGVnb3J5ID0+IHtcbiAgICAgIGlmICh0aGlzLmljb25zW2NhdGVnb3J5XSkge1xuICAgICAgICBkZWxldGUgdGhpcy5pY29uc1tjYXRlZ29yeV07XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn1cbiJdfQ==