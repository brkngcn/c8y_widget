import { gettext } from '@c8y/ngx-components';
import { Action } from '../action.enum';
import { GroupNode } from './group-node';
export class UnassignedDevicesNode extends GroupNode {
    constructor(service, config = {}) {
        super(service, config);
        this.service = service;
        this.label = gettext('Unassigned devices');
        this.icon = 'delete-folder';
        this.groupsSelectable = false;
        this.groupsOnly = false;
        this.showChildDevices = false;
        this.mo = {};
        this.priority = Infinity;
        this.showChildDevices = config.showChildDevices || false;
    }
    click(options = {}) {
        this.hookEvents();
        if (options.open) {
            this.events.next(Action.FETCH);
        }
    }
    addManagedObject(mo) {
        this.add(this.service.createChildNode({ mo, showChildDevices: this.showChildDevices }));
    }
    fetch() {
        return this.service.getUnassignedDevices(this.showChildDevices, this.filterQuery$.value);
    }
    isGroup() {
        return true;
    }
    toString() {
        return UnassignedDevicesNode.NAME;
    }
}
UnassignedDevicesNode.NAME = 'UnassignedDevicesNode';
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidW5hc3NpZ25lZC1kZXZpY2VzLW5vZGUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9hc3NldHMtbmF2aWdhdG9yL2Fzc2V0LXNlbGVjdG9yL3VuYXNzaWduZWQtZGV2aWNlcy1ub2RlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBZ0IsT0FBTyxFQUFFLE1BQU0scUJBQXFCLENBQUM7QUFDNUQsT0FBTyxFQUFFLE1BQU0sRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBRXhDLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxjQUFjLENBQUM7QUFHekMsTUFBTSxPQUFPLHFCQUFzQixTQUFRLFNBQVM7SUFTbEQsWUFBc0IsT0FBeUIsRUFBRSxTQUEwQixFQUFFO1FBQzNFLEtBQUssQ0FBQyxPQUFPLEVBQUUsTUFBTSxDQUFDLENBQUM7UUFESCxZQUFPLEdBQVAsT0FBTyxDQUFrQjtRQVAvQyxVQUFLLEdBQUcsT0FBTyxDQUFDLG9CQUFvQixDQUFDLENBQUM7UUFDdEMsU0FBSSxHQUFHLGVBQWUsQ0FBQztRQUN2QixxQkFBZ0IsR0FBRyxLQUFLLENBQUM7UUFDekIsZUFBVSxHQUFHLEtBQUssQ0FBQztRQUNuQixxQkFBZ0IsR0FBRyxLQUFLLENBQUM7UUFDekIsT0FBRSxHQUFHLEVBQUUsQ0FBQztRQUlOLElBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDO1FBQ3pCLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxNQUFNLENBQUMsZ0JBQWdCLElBQUksS0FBSyxDQUFDO0lBQzNELENBQUM7SUFFRCxLQUFLLENBQUMsVUFBd0IsRUFBRTtRQUM5QixJQUFJLENBQUMsVUFBVSxFQUFFLENBQUM7UUFDbEIsSUFBSSxPQUFPLENBQUMsSUFBSSxFQUFFO1lBQ2hCLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQztTQUNoQztJQUNILENBQUM7SUFFRCxnQkFBZ0IsQ0FBQyxFQUFFO1FBQ2pCLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxlQUFlLENBQUMsRUFBRSxFQUFFLEVBQUUsZ0JBQWdCLEVBQUUsSUFBSSxDQUFDLGdCQUFnQixFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQzFGLENBQUM7SUFFRCxLQUFLO1FBQ0gsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLG9CQUFvQixDQUFDLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxJQUFJLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQzNGLENBQUM7SUFFRCxPQUFPO1FBQ0wsT0FBTyxJQUFJLENBQUM7SUFDZCxDQUFDO0lBRUQsUUFBUTtRQUNOLE9BQU8scUJBQXFCLENBQUMsSUFBSSxDQUFDO0lBQ3BDLENBQUM7O0FBbkNNLDBCQUFJLEdBQUcsdUJBQXVCLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDbGlja09wdGlvbnMsIGdldHRleHQgfSBmcm9tICdAYzh5L25neC1jb21wb25lbnRzJztcbmltcG9ydCB7IEFjdGlvbiB9IGZyb20gJy4uL2FjdGlvbi5lbnVtJztcbmltcG9ydCB7IEdyb3VwTm9kZUNvbmZpZyB9IGZyb20gJy4vYXNzZXQtc2VsZWN0b3IubW9kZWwnO1xuaW1wb3J0IHsgR3JvdXBOb2RlIH0gZnJvbSAnLi9ncm91cC1ub2RlJztcbmltcG9ydCB7IEdyb3VwTm9kZVNlcnZpY2UgfSBmcm9tICcuL2dyb3VwLW5vZGUuc2VydmljZSc7XG5cbmV4cG9ydCBjbGFzcyBVbmFzc2lnbmVkRGV2aWNlc05vZGUgZXh0ZW5kcyBHcm91cE5vZGUge1xuICBzdGF0aWMgTkFNRSA9ICdVbmFzc2lnbmVkRGV2aWNlc05vZGUnO1xuICBsYWJlbCA9IGdldHRleHQoJ1VuYXNzaWduZWQgZGV2aWNlcycpO1xuICBpY29uID0gJ2RlbGV0ZS1mb2xkZXInO1xuICBncm91cHNTZWxlY3RhYmxlID0gZmFsc2U7XG4gIGdyb3Vwc09ubHkgPSBmYWxzZTtcbiAgc2hvd0NoaWxkRGV2aWNlcyA9IGZhbHNlO1xuICBtbyA9IHt9O1xuXG4gIGNvbnN0cnVjdG9yKHByb3RlY3RlZCBzZXJ2aWNlOiBHcm91cE5vZGVTZXJ2aWNlLCBjb25maWc6IEdyb3VwTm9kZUNvbmZpZyA9IHt9KSB7XG4gICAgc3VwZXIoc2VydmljZSwgY29uZmlnKTtcbiAgICB0aGlzLnByaW9yaXR5ID0gSW5maW5pdHk7XG4gICAgdGhpcy5zaG93Q2hpbGREZXZpY2VzID0gY29uZmlnLnNob3dDaGlsZERldmljZXMgfHwgZmFsc2U7XG4gIH1cblxuICBjbGljayhvcHRpb25zOiBDbGlja09wdGlvbnMgPSB7fSkge1xuICAgIHRoaXMuaG9va0V2ZW50cygpO1xuICAgIGlmIChvcHRpb25zLm9wZW4pIHtcbiAgICAgIHRoaXMuZXZlbnRzLm5leHQoQWN0aW9uLkZFVENIKTtcbiAgICB9XG4gIH1cblxuICBhZGRNYW5hZ2VkT2JqZWN0KG1vKSB7XG4gICAgdGhpcy5hZGQodGhpcy5zZXJ2aWNlLmNyZWF0ZUNoaWxkTm9kZSh7IG1vLCBzaG93Q2hpbGREZXZpY2VzOiB0aGlzLnNob3dDaGlsZERldmljZXMgfSkpO1xuICB9XG5cbiAgZmV0Y2goKSB7XG4gICAgcmV0dXJuIHRoaXMuc2VydmljZS5nZXRVbmFzc2lnbmVkRGV2aWNlcyh0aGlzLnNob3dDaGlsZERldmljZXMsIHRoaXMuZmlsdGVyUXVlcnkkLnZhbHVlKTtcbiAgfVxuXG4gIGlzR3JvdXAoKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gVW5hc3NpZ25lZERldmljZXNOb2RlLk5BTUU7XG4gIH1cbn1cbiJdfQ==