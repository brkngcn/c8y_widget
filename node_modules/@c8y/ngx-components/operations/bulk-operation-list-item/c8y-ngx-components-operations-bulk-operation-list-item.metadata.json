{"__symbolic":"module","version":4,"metadata":{"BulkOperationListItemModule":{"__symbolic":"class","decorators":[{"__symbolic":"call","expression":{"__symbolic":"reference","module":"@angular/core","name":"NgModule","line":17,"character":1},"arguments":[{"imports":[{"__symbolic":"reference","module":"@c8y/ngx-components","name":"CoreModule","line":19,"character":4},{"__symbolic":"reference","module":"ngx-bootstrap/popover","name":"PopoverModule","line":20,"character":4},{"__symbolic":"reference","module":"ngx-bootstrap/tooltip","name":"TooltipModule","line":21,"character":4},{"__symbolic":"reference","module":"@c8y/ngx-components/operations/operation-summary","name":"OperationSummaryModule","line":22,"character":4},{"__symbolic":"reference","module":"@c8y/ngx-components/operations/bulk-operation-scheduler","name":"BulkOperationSchedulerModule","line":23,"character":4},{"__symbolic":"reference","module":"@c8y/ngx-components/operations/operations-list-item-details","name":"OperationsListItemDetailsModule","line":24,"character":4}],"providers":[{"__symbolic":"reference","name":"BulkOperationListItemService"}],"declarations":[{"__symbolic":"reference","name":"BulkOperationListItemComponent"},{"__symbolic":"reference","name":"BulkOperationsRescheduleModalComponent"},{"__symbolic":"reference","name":"BulkOperationWrapperComponent"}],"entryComponents":[{"__symbolic":"reference","name":"BulkOperationListItemComponent"},{"__symbolic":"reference","name":"BulkOperationsRescheduleModalComponent"},{"__symbolic":"reference","name":"BulkOperationWrapperComponent"}],"exports":[{"__symbolic":"reference","name":"BulkOperationListItemComponent"},{"__symbolic":"reference","name":"BulkOperationsRescheduleModalComponent"},{"__symbolic":"reference","name":"BulkOperationWrapperComponent"}]}]}],"members":{}},"BulkOperationListItemComponent":{"__symbolic":"class","decorators":[{"__symbolic":"call","expression":{"__symbolic":"reference","module":"@angular/core","name":"Component","line":28,"character":1},"arguments":[{"selector":"c8y-bulk-operation-list-item","template":"<c8y-li\n  class=\"c8y-list__item--double-actions\"\n  [ngClass]=\"{ 'c8y-list__item--no-expand': !detailsCollapsed }\"\n  [collapsed]=\"detailsCollapsed\"\n  #listItem\n  id=\"{{ bulkOperation.id }}\"\n>\n  <c8y-li-icon>\n    <i\n      [c8yIcon]=\"getOperationStatusOptions().icon\"\n      [ngClass]=\"getOperationStatusOptions().styleClass\"\n      [tooltip]=\"getOperationStatusOptions().label | translate\"\n    ></i>\n  </c8y-li-icon>\n  <div [ngClass]=\"{ 'content-flex-58': !readOnly, 'content-flex-50': readOnly }\">\n    <div class=\"col-5\">\n      <span\n        class=\"text-truncate\"\n        title=\"{{ bulkOperation.id }} - {{\n          bulkOperation.operationPrototype.description | translate\n        }}\"\n      >\n        <strong class=\"text-muted m-r-4\">{{ bulkOperation.id }}</strong>\n        {{ bulkOperation.operationPrototype.description | translate }}\n      </span>\n    </div>\n    <div class=\"flex-grow\">\n      <div class=\"m-t-8 visible-xs\"></div>\n      <hr *ngIf=\"isStatusCanceled(); else statusNotCanceled\" class=\"m-t-16 m-b-0 visible-xs\" />\n      <ng-template #statusNotCanceled>\n        <div\n          [class]=\"progressBarClass\"\n          title=\"{{ progressBarStatus | c8yNumber: 'floor':'1.0-0' }}%\"\n        >\n          <div\n            [class]=\"progressBarColor\"\n            role=\"progressbar\"\n            aria-valuenow=\"0\"\n            aria-valuemin=\"0\"\n            aria-valuemax=\"100\"\n            [style.width.%]=\"progressBarStatus\"\n          >\n            <span *ngIf=\"progressBarStatus !== 0\"\n              >{{ progressBarStatus | c8yNumber: 'floor':'1.0-0' }}%</span\n            >\n          </div>\n        </div>\n      </ng-template>\n    </div>\n    <div class=\"col-4\">\n      <div class=\"p-t-8 visible-xs\"></div>\n      <small *ngIf=\"bulkOperation.progress.successful > 0\" class=\"m-r-8 icon-flex\">\n        <i c8yIcon=\"check-circle\" class=\"text-success m-r-4\"></i>\n        <span\n          ngNonBindable\n          translate\n          [translateParams]=\"{ bulkOperationsCountSuccessful: bulkOperation.progress.successful }\"\n        >\n          {{ bulkOperationsCountSuccessful }} successful\n        </span>\n      </small>\n      <small *ngIf=\"bulkOperation.progress.failed > 0\" class=\"m-r-8 icon-flex\">\n        <i c8yIcon=\"warning\" class=\"text-danger m-r-4\"></i>\n        <span\n          ngNonBindable\n          translate\n          [translateParams]=\"{ bulkOperationsCountFailed: bulkOperation.progress.failed }\"\n        >\n          {{ bulkOperationsCountFailed }} failed\n        </span>\n      </small>\n      <small *ngIf=\"bulkOperation.progress.executing > 0\" class=\"m-r-8 icon-flex\">\n        <i c8yIcon=\"refresh\" class=\"text-primary m-r-4\"></i>\n        <span\n          ngNonBindable\n          translate\n          [translateParams]=\"{ bulkOperationsCountExecuting: bulkOperation.progress.executing }\"\n        >\n          {{ bulkOperationsCountExecuting }} executing\n        </span>\n      </small>\n      <small *ngIf=\"bulkOperation.progress.pending > 0\" class=\"m-r-8 icon-flex\">\n        <i c8yIcon=\"clock-o\" class=\"text-primary m-r-4\"></i>\n        <span\n          ngNonBindable\n          translate\n          [translateParams]=\"{ bulkOperationsCountPending: bulkOperation.progress.pending }\"\n        >\n          {{ bulkOperationsCountPending }} pending\n        </span>\n      </small>\n    </div>\n  </div>\n  <div class=\"c8y-list__item__footer\">\n    <div class=\"m-r-16\">\n      <span class=\"text-label-small m-r-4\" translate>Start</span>\n      <small class=\"icon-flex\">\n        <i c8yIcon=\"calendar\" class=\"m-r-4\"></i>\n        <span>\n          {{ bulkOperation.startDate | c8yDate }}\n        </span>\n      </small>\n    </div>\n    <div class=\"m-r-16\" *ngIf=\"bulkOperationGeneralStatus.CANCELED !== bulkOperation.generalStatus\">\n      <span class=\"text-label-small m-r-4\" translate>Finish</span>\n\n      <small class=\"icon-flex\">\n        <i c8yIcon=\"calendar\" class=\"m-r-4\"></i>\n        <span>{{ finishDate | c8yDate }}</span>\n      </small>\n      <a\n        container=\"body\"\n        *ngIf=\"isStatusScheduled() || isStatusExecutingOrExecutingWithError()\"\n        class=\"btn-clean m-l-4\"\n        popover=\"{{ finishDatePopoverText | translate }}\"\n        placement=\"right\"\n        outsideClick=\"true\"\n      >\n        <i c8yIcon=\"question-circle-o text-primary\"></i>\n      </a>\n    </div>\n  </div>\n  <ng-container *ngIf=\"!readOnly\">\n    <c8y-li-action\n      *ngIf=\"isStatusScheduled()\"\n      label=\"{{ 'Edit schedule' | translate }}\"\n      (click)=\"editSchedule()\"\n      icon=\"pencil\"\n    >\n    </c8y-li-action>\n    <c8y-li-action\n      *ngIf=\"\n        isStatusScheduled() || (isStatusExecutingOrExecutingWithError() && !allOperationsCreated())\n      \"\n      label=\"{{ 'Cancel bulk operation' | translate }}\"\n      (click)=\"cancelBulkOperation()\"\n      icon=\"remove\"\n    >\n    </c8y-li-action>\n    <c8y-li-action\n      *ngIf=\"isStatusFailed()\"\n      label=\"{{ 'Retry failed operations' | translate }}\"\n      (click)=\"retryFailedOperation()\"\n      icon=\"repeat\"\n    >\n    </c8y-li-action>\n    <c8y-li-action\n      *ngIf=\"isStatusFailed()\"\n      label=\"{{ 'Set operation to SUCCESSFUL' | translate }}\"\n      (click)=\"setToSuccessful()\"\n      icon=\"check-circle\"\n    >\n    </c8y-li-action>\n  </ng-container>\n  <c8y-li-collapse class=\"m-b-16\">\n    <c8y-operation-details-tabs\n      *ngIf=\"!listItem.collapsed\"\n      [operation]=\"bulkOperation\"\n      [readOnly]=\"readOnly\"\n      (onRetryFailedOperations)=\"retryFailedOperation()\"\n      (showFailedOperation)=\"openFailedOperation($event)\"\n      [bulkOperationModalDetailsService]=\"bulkOperationListItemService\"\n    >\n    </c8y-operation-details-tabs>\n  </c8y-li-collapse>\n</c8y-li>\n"}]}],"members":{"bulkOperation":[{"__symbolic":"property","decorators":[{"__symbolic":"call","expression":{"__symbolic":"reference","module":"@angular/core","name":"Input","line":33,"character":3}}]}],"detailsCollapsed":[{"__symbolic":"property","decorators":[{"__symbolic":"call","expression":{"__symbolic":"reference","module":"@angular/core","name":"Input","line":35,"character":3}}]}],"readOnly":[{"__symbolic":"property","decorators":[{"__symbolic":"call","expression":{"__symbolic":"reference","module":"@angular/core","name":"Input","line":37,"character":3}}]}],"showFailedOperation":[{"__symbolic":"property","decorators":[{"__symbolic":"call","expression":{"__symbolic":"reference","module":"@angular/core","name":"Output","line":39,"character":3}}]}],"reload":[{"__symbolic":"property","decorators":[{"__symbolic":"call","expression":{"__symbolic":"reference","module":"@angular/core","name":"Output","line":40,"character":3}}]}],"listItem":[{"__symbolic":"property","decorators":[{"__symbolic":"call","expression":{"__symbolic":"reference","module":"@angular/core","name":"ViewChild","line":41,"character":3},"arguments":["listItem",{"static":true}]}]}],"__ctor__":[{"__symbolic":"constructor","parameters":[{"__symbolic":"reference","name":"BulkOperationListItemService"},{"__symbolic":"reference","module":"@c8y/ngx-components/operations/bulk-operations-service","name":"BulkOperationsService","line":57,"character":35},{"__symbolic":"reference","module":"@c8y/ngx-components","name":"ModalService","line":58,"character":19},{"__symbolic":"reference","module":"@c8y/ngx-components","name":"AlertService","line":59,"character":19},{"__symbolic":"reference","module":"ngx-bootstrap/modal","name":"BsModalService","line":60,"character":28}]}],"ngOnInit":[{"__symbolic":"method"}],"getOperationStatusOptions":[{"__symbolic":"method"}],"ngOnChanges":[{"__symbolic":"method"}],"calculateFinishDateMs":[{"__symbolic":"method"}],"progressBarProgressFn":[{"__symbolic":"method"}],"setProgressBar":[{"__symbolic":"method"}],"editSchedule":[{"__symbolic":"method"}],"cancelBulkOperation":[{"__symbolic":"method"}],"retryFailedOperation":[{"__symbolic":"method"}],"setToSuccessful":[{"__symbolic":"method"}],"openFailedOperation":[{"__symbolic":"method"}],"isStatusScheduled":[{"__symbolic":"method"}],"isStatusExecutingOrExecutingWithError":[{"__symbolic":"method"}],"allOperationsCreated":[{"__symbolic":"method"}],"isStatusCanceled":[{"__symbolic":"method"}],"isStatusFailed":[{"__symbolic":"method"}]}},"OperationStatusOptionsMap":{"__symbolic":"interface"},"BULK_OPERATION_STATUS_LABELS":{"SCHEDULED":{"__symbolic":"call","expression":{"__symbolic":"reference","module":"@c8y/ngx-components","name":"gettext","line":9,"character":13},"arguments":["Scheduled"]},"EXECUTING":{"__symbolic":"call","expression":{"__symbolic":"reference","module":"@c8y/ngx-components","name":"gettext","line":10,"character":13},"arguments":["Executing"]},"CANCELED":{"__symbolic":"call","expression":{"__symbolic":"reference","module":"@c8y/ngx-components","name":"gettext","line":11,"character":12},"arguments":["Canceled"]},"FAILED":{"__symbolic":"call","expression":{"__symbolic":"reference","module":"@c8y/ngx-components","name":"gettext","line":12,"character":10},"arguments":["Completed with failures"]},"SUCCESSFUL":{"__symbolic":"call","expression":{"__symbolic":"reference","module":"@c8y/ngx-components","name":"gettext","line":13,"character":14},"arguments":["Completed successfully"]},"DELETED":{"__symbolic":"call","expression":{"__symbolic":"reference","module":"@c8y/ngx-components","name":"gettext","line":14,"character":11},"arguments":["Deleted"]}},"BULK_OPERATION_STATUS_OPTIONS":{"SCHEDULED":{"label":{"__symbolic":"select","expression":{"__symbolic":"reference","name":"BULK_OPERATION_STATUS_LABELS"},"member":"SCHEDULED"},"generalStatuses":[{"__symbolic":"select","expression":{"__symbolic":"reference","module":"@c8y/client","name":"OperationBulkGeneralStatus","line":20,"character":22},"member":"SCHEDULED"}],"icon":"calendar","styleClass":"text-info"},"EXECUTING":{"label":{"__symbolic":"select","expression":{"__symbolic":"reference","name":"BULK_OPERATION_STATUS_LABELS"},"member":"EXECUTING"},"generalStatuses":[{"__symbolic":"select","expression":{"__symbolic":"reference","module":"@c8y/client","name":"OperationBulkGeneralStatus","line":27,"character":6},"member":"EXECUTING"},{"__symbolic":"select","expression":{"__symbolic":"reference","module":"@c8y/client","name":"OperationBulkGeneralStatus","line":28,"character":6},"member":"EXECUTING_WITH_ERROR"}],"icon":"refresh","styleClass":"text-primary"},"DELETED":{"label":{"__symbolic":"select","expression":{"__symbolic":"reference","name":"BULK_OPERATION_STATUS_LABELS"},"member":"DELETED"},"generalStatuses":[{"__symbolic":"select","expression":{"__symbolic":"reference","module":"@c8y/client","name":"OperationBulkGeneralStatus","line":35,"character":22},"member":"DELETED"}],"icon":"delete-document","styleClass":"text-muted"},"CANCELED":{"label":{"__symbolic":"select","expression":{"__symbolic":"reference","name":"BULK_OPERATION_STATUS_LABELS"},"member":"CANCELED"},"generalStatuses":[{"__symbolic":"select","expression":{"__symbolic":"reference","module":"@c8y/client","name":"OperationBulkGeneralStatus","line":41,"character":22},"member":"CANCELED"}],"icon":"ban","styleClass":"text-primary"},"FAILED":{"label":{"__symbolic":"select","expression":{"__symbolic":"reference","name":"BULK_OPERATION_STATUS_LABELS"},"member":"FAILED"},"generalStatuses":[{"__symbolic":"select","expression":{"__symbolic":"reference","module":"@c8y/client","name":"OperationBulkGeneralStatus","line":47,"character":22},"member":"FAILED"}],"icon":"exclamation-triangle","styleClass":"text-danger"},"SUCCESSFUL":{"label":{"__symbolic":"select","expression":{"__symbolic":"reference","name":"BULK_OPERATION_STATUS_LABELS"},"member":"SUCCESSFUL"},"generalStatuses":[{"__symbolic":"select","expression":{"__symbolic":"reference","module":"@c8y/client","name":"OperationBulkGeneralStatus","line":53,"character":22},"member":"SUCCESSFUL"}],"icon":"check-circle","styleClass":"text-success"}},"BulkOperationListItemService":{"__symbolic":"class","decorators":[{"__symbolic":"call","expression":{"__symbolic":"reference","module":"@angular/core","name":"Injectable","line":7,"character":1}}],"members":{"__ctor__":[{"__symbolic":"constructor","parameters":[{"__symbolic":"reference","module":"@c8y/ngx-components/operations/bulk-operations-service","name":"BulkOperationsService","line":10,"character":35},{"__symbolic":"reference","module":"ngx-bootstrap/modal","name":"BsModalService","line":11,"character":26}]}],"openDetails":[{"__symbolic":"method"}]}},"BulkOperationWrapperComponent":{"__symbolic":"class","decorators":[{"__symbolic":"call","expression":{"__symbolic":"reference","module":"@angular/core","name":"Component","line":5,"character":1},"arguments":[{"selector":"c8y-bulk-operations-wrapper","template":"<div class=\"viewport-modal\">\n  <div class=\"modal-header\">\n    <h3>{{ 'Bulk operation details' | translate }}</h3>\n  </div>\n\n  <div class=\"modal-inner-scroll\">\n    <c8y-bulk-operation-list-item\n      [bulkOperation]=\"bulkOperation\"\n      [detailsCollapsed]=\"false\"\n      [readOnly]=\"true\"\n      (showFailedOperation)=\"openDetails($event)\"\n    ></c8y-bulk-operation-list-item>\n  </div>\n\n  <div class=\"modal-footer\">\n    <button title=\"{{ 'Close' | translate }}\" class=\"btn btn-default\" (click)=\"modalRef.hide()\">\n      {{ 'Close' | translate }}\n    </button>\n  </div>\n</div>\n"}]}],"members":{"bulkOperation":[{"__symbolic":"property","decorators":[{"__symbolic":"call","expression":{"__symbolic":"reference","module":"@angular/core","name":"Input","line":10,"character":3}}]}],"__ctor__":[{"__symbolic":"constructor","parameters":[{"__symbolic":"reference","module":"@c8y/ngx-components/operations/bulk-operations-service","name":"BulkOperationsService","line":13,"character":34},{"__symbolic":"reference","module":"ngx-bootstrap/modal","name":"BsModalRef","line":14,"character":21},{"__symbolic":"reference","module":"ngx-bootstrap/modal","name":"BsModalService","line":15,"character":26}]}],"openDetails":[{"__symbolic":"method"}]}},"BulkOperationsRescheduleModalComponent":{"__symbolic":"class","decorators":[{"__symbolic":"call","expression":{"__symbolic":"reference","module":"@angular/core","name":"Component","line":8,"character":1},"arguments":[{"selector":"c8y-bulk-operations-reschedule-modal","template":"<div class=\"viewport-modal\">\n  <div class=\"modal-header dialog-header\">\n    <h1 class=\"c8y-icon c8y-icon-energy\"></h1>\n    <h4>{{ modalTitle | translate }}</h4>\n  </div>\n  <div class=\"modal-inner-scroll\">\n    <div class=\"modal-body\">\n      <div class=\"text-center\">\n        <c8y-operation-summary\n          [description]=\"bulkOperation.operationPrototype.description\"\n        ></c8y-operation-summary>\n      </div>\n      <div class=\"p-t-16 center-block\" style=\"max-width: 300px;\">\n        <c8y-operation-scheduler\n          [(ngModel)]=\"dateAndDelay\"\n          #scheduler=\"ngModel\"\n        ></c8y-operation-scheduler>\n      </div>\n    </div>\n  </div>\n  <div class=\"modal-footer\">\n    <button\n      (click)=\"onCancel()\"\n      type=\"button\"\n      class=\"btn btn-default\"\n      title=\"{{ 'Cancel' | translate }}\"\n    >\n      <span translate>Cancel</span>\n    </button>\n    <button\n      id=\"save-btn\"\n      (click)=\"onSave()\"\n      type=\"button\"\n      class=\"btn btn-primary\"\n      title=\"{{ 'Save' | translate }}\"\n      [disabled]=\"scheduler?.control?.errors\"\n    >\n      <span translate>Save</span>\n    </button>\n  </div>\n</div>\n"}]}],"members":{"__ctor__":[{"__symbolic":"constructor","parameters":[{"__symbolic":"reference","module":"ngx-bootstrap/modal","name":"BsModalRef","line":20,"character":23},{"__symbolic":"reference","module":"@c8y/ngx-components/operations/bulk-operations-service","name":"BulkOperationsService","line":21,"character":35},{"__symbolic":"reference","module":"@c8y/ngx-components","name":"AlertService","line":22,"character":19}]}],"ngOnInit":[{"__symbolic":"method"}],"onDateAndDelaySelect":[{"__symbolic":"method"}],"getTitle":[{"__symbolic":"method"}],"onCancel":[{"__symbolic":"method"}],"onSave":[{"__symbolic":"method"}]}}},"origins":{"BulkOperationListItemModule":"./bulk-operation-list-item.module","BulkOperationListItemComponent":"./bulk-operation-list-item.component","OperationStatusOptionsMap":"./bulk-operation-list-item.model","BULK_OPERATION_STATUS_LABELS":"./bulk-operation-list-item.model","BULK_OPERATION_STATUS_OPTIONS":"./bulk-operation-list-item.model","BulkOperationListItemService":"./bulk-operation-list-item.service","BulkOperationWrapperComponent":"./bulk-operation-wrapper.component","BulkOperationsRescheduleModalComponent":"./modals/bulk-operations-reschedule-modal.component"},"importAs":"@c8y/ngx-components/operations/bulk-operation-list-item"}