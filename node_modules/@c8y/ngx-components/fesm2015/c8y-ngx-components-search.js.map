{"version":3,"file":"c8y-ngx-components-search.js","sources":["../../search/search.service.ts","../../search/search-grid.component.ts","../../search/search-results.component.ts","../../search/search-action.component.ts","../../search/search.module.ts","../../search/c8y-ngx-components-search.ts"],"names":["C8yRouter","CoreSearchModule"],"mappings":"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","sourcesContent":["import { Injectable } from '@angular/core';\nimport { Pagination } from '@c8y/ngx-components';\nimport { DeviceGridColumn } from '@c8y/ngx-components/device-grid';\nimport { SubAssetsService } from '@c8y/ngx-components/sub-assets';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AssetSearchService extends SubAssetsService {\n  protected GRID_CONFIG_STORAGE_KEY = 'search-grid-config';\n  protected DEFAULT_PAGE_SIZE = 50;\n\n  buildCombinedRootQueryFilter(columns, pagination) {\n    const rootQuery = {\n      __filter: {\n        __and: { __not: { __has: `c8y_IsBinary` } }\n      }\n    };\n    const userQuery = this.getQueryObj(columns, pagination);\n    const queryPart = this.queriesUtil.addOrderbys(rootQuery, userQuery.__orderby, 'append');\n    const fullQuery = this.queriesUtil.addAndFilter(queryPart, userQuery.__filter);\n    return this.queriesUtil.buildQuery(fullQuery);\n  }\n\n  async getData(columns: DeviceGridColumn[], pagination: Pagination) {\n    const query = this.buildCombinedRootQueryFilter(columns, pagination);\n    return this.assetNodeService.getAllInventories({ ...pagination, query });\n  }\n}\n","import { Component, EventEmitter, Input, Output, ViewChild } from '@angular/core';\nimport {\n  ActionControl,\n  BuiltInActionType,\n  BulkActionControl,\n  DataGridComponent,\n  DataSourceModifier,\n  FilteringActionType,\n  FilteringModifier,\n  gettext,\n  Pagination,\n  ServerSideDataResult,\n  InventorySearchService,\n  Row\n} from '@c8y/ngx-components';\nimport { DeviceGridColumn } from '@c8y/ngx-components/device-grid';\nimport { IManagedObject, SmartGroupsService } from '@c8y/client';\nimport { AssetSearchService } from './search.service';\nimport {\n  AssetTypeGridColumn,\n  DeleteAssetsModalComponent,\n  DeleteModalCheckboxes,\n  SubAssetsService\n} from '@c8y/ngx-components/sub-assets';\nimport { BsModalService } from 'ngx-bootstrap/modal';\nimport {\n  AlarmsDeviceGridColumn,\n  DeviceGridService,\n  ImeiDeviceGridColumn,\n  ModelDeviceGridColumn,\n  NameDeviceGridColumn,\n  RegistrationDateDeviceGridColumn,\n  SerialNumberDeviceGridColumn,\n  SystemIdDeviceGridColumn\n} from '@c8y/ngx-components/device-grid';\n\n@Component({\n  selector: 'c8y-search-grid',\n  templateUrl: './search-grid.component.html'\n})\nexport class SearchGridComponent {\n  @Input('parent-group') parentGroup: IManagedObject;\n  @Input() title: string = '';\n  @Input() loadingItemsLabel: string = gettext('Loading results…');\n  @Input('columns') set _columns(value: DeviceGridColumn[]) {\n    if (value) {\n      this.columns = value;\n    } else {\n      this.columns = this.searchService.getDefaultColumns();\n    }\n  }\n  @Input('pagination') set _pagination(value: Pagination) {\n    if (value) {\n      this.pagination = value;\n    } else {\n      this.pagination = this.searchService.getDefaultPagination();\n    }\n  }\n  @Input('actionControls') set _actionControls(value: ActionControl[]) {\n    if (value) {\n      this.actionControls = value;\n    } else {\n      this.actionControls = this.searchService.getDefaultActionControls();\n    }\n  }\n  @Input() selectable: boolean = false;\n  @Input('bulkActionControls') set _bulkActionControls(value: BulkActionControl[]) {\n    if (value) {\n      this.bulkActionControls = value;\n    } else {\n      this.bulkActionControls = this.searchService.getDefaultBulkActionControls();\n    }\n  }\n  @Output() onColumnsChange: EventEmitter<DeviceGridColumn[]> = new EventEmitter<\n    DeviceGridColumn[]\n  >();\n\n  @Input()\n  searchText = '';\n\n  @Input()\n  filteringName: string;\n\n  columns: DeviceGridColumn[];\n  pagination: Pagination = this.searchService.getDefaultPagination();\n  actionControls: ActionControl[];\n  bulkActionControls: BulkActionControl[] = this.searchService.getDefaultBulkActionControls();\n  serverSideDataCallback: any;\n  refresh: EventEmitter<any> = new EventEmitter();\n\n  @ViewChild(DataGridComponent, { static: true })\n  dataGrid: DataGridComponent;\n\n  private sizeCount = 0;\n\n  constructor(\n    private coreSearchService: InventorySearchService,\n    public searchService: AssetSearchService,\n    private bsModalService: BsModalService,\n    private smartGroupsService: SmartGroupsService,\n    private subAssetsGridService: SubAssetsService\n  ) {}\n\n  ngOnInit(): void {\n    if (!this.filteringName) {\n      this.columns = this.searchService.getDefaultColumns();\n    } else {\n      this.columns = [\n        new AssetTypeGridColumn({ sortOrder: 'desc' }),\n        new NameDeviceGridColumn({\n          sortOrder: 'asc',\n          filter: { externalFilterQuery: { names: [this.filteringName] } }\n        }),\n        new ModelDeviceGridColumn(),\n        new SerialNumberDeviceGridColumn({ visible: false }),\n        new RegistrationDateDeviceGridColumn({ visible: false }),\n        new SystemIdDeviceGridColumn({ visible: false }),\n        new ImeiDeviceGridColumn({ visible: false }),\n        new AlarmsDeviceGridColumn()\n      ];\n    }\n    this.serverSideDataCallback = this.onDataSourceModifier.bind(this);\n    this.setActionControls();\n  }\n\n  trackByName(_index, column: DeviceGridColumn): string {\n    return column.name;\n  }\n\n  async onDataSourceModifier(\n    dataSourceModifier: DataSourceModifier\n  ): Promise<ServerSideDataResult> {\n    let response;\n    if (dataSourceModifier.searchText) {\n      response = await this.coreSearchService.search(\n        dataSourceModifier.searchText,\n        dataSourceModifier.pagination\n      );\n    } else {\n      response = await this.searchService.getData(\n        dataSourceModifier.columns,\n        dataSourceModifier.pagination,\n      );\n    }\n    const { res, data, paging } = response;\n    const filteredData = this.coreSearchService.filterOnlyAssets(data);\n\n    if (paging.currentPage === 1) {\n      this.sizeCount = 0;\n    }\n    this.sizeCount += filteredData.length;\n    this.onColumnsChange.emit(dataSourceModifier.columns);\n\n    return {\n      res,\n      data: filteredData,\n      paging,\n      filteredSize: this.sizeCount,\n      size: undefined\n    };\n  }\n\n  setActionControls() {\n    const actionControls: ActionControl[] = [];\n    const deleteAction: ActionControl = {\n      type: BuiltInActionType.Delete,\n      callback: (asset: Row) => this.onDeleteAsset(asset as IManagedObject, this.parentGroup)\n    };\n    actionControls.push(deleteAction);\n    if (!this.actionControls) {\n      this.actionControls = actionControls;\n    }\n  }\n\n  updateFiltering(\n    columnNames: string[],\n    action: {\n      type: FilteringActionType;\n      payload?: { filteringModifier: FilteringModifier };\n    }\n  ) {\n    const { type } = action;\n    if (type === FilteringActionType.ResetFilter) {\n      this.dataGrid.clearFilters();\n    } else {\n      this.dataGrid.updateFiltering(columnNames, action, false);\n    }\n  }\n\n  configChange(config) {\n    this.searchService.saveConfig(config);\n  }\n\n  private onDeleteAsset(asset, parentRef) {\n    const initialState = {\n      showWithDeviceUserCheckbox: this.subAssetsGridService.shouldShowWithDeviceUserCheckbox(asset),\n      asset,\n      showWithCascadeCheckbox:\n        !this.smartGroupsService.isSmartGroup(asset) &&\n        !this.smartGroupsService.isSmartGroupV2(asset)\n    };\n\n    const modalRef = this.bsModalService.show(DeleteAssetsModalComponent, { initialState });\n\n    modalRef.content.closeSubject.subscribe(async (result: DeleteModalCheckboxes) => {\n      if (result) {\n        await this.subAssetsGridService.deleteAsset(asset, parentRef, result);\n        this.refresh.emit();\n      }\n    });\n  }\n}\n","import { Component, OnDestroy, ViewChild } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { Subject } from 'rxjs';\nimport { skip, takeUntil } from 'rxjs/operators';\nimport { SearchGridComponent } from './search-grid.component';\nimport { FilteringActionType, AlertService, Status, gettext, Alert } from '@c8y/ngx-components';\n\n@Component({\n  selector: 'c8y-search-results',\n  templateUrl: './search-results.component.html'\n})\nexport class SearchResultsComponent implements OnDestroy {\n  filter: string = '';\n  searchText: string = '';\n  @ViewChild(SearchGridComponent, { static: true })\n  searchGrid: SearchGridComponent;\n  filteringName: string;\n\n  private readonly WARNING_TIMEOUT_TIME = 3000;\n  private unsubscribe$ = new Subject<any>();\n\n  constructor(private route: ActivatedRoute, private alert: AlertService) {}\n\n  ngOnInit() {\n    this.route.queryParams.pipe(takeUntil(this.unsubscribe$)).subscribe(params => {\n      if (params.filter) {\n        this.filteringName = params.filter;\n      }\n    });\n  }\n\n  ngAfterViewInit(): void {\n    this.route.queryParams\n      .pipe(takeUntil(this.unsubscribe$))\n      .subscribe(({ filter, search }) => this.onQueryParamsChange(filter, search));\n\n    this.searchGrid.dataGrid.onBeforeSearch.pipe(takeUntil(this.unsubscribe$)).subscribe(text => {\n      if (text) {\n        this.resetFilter();\n      }\n    });\n\n    this.searchGrid.dataGrid.onBeforeFilter\n      .pipe(takeUntil(this.unsubscribe$))\n      .subscribe(() => this.resetSearch());\n  }\n\n  resetSearch() {\n    if (this.searchGrid.dataGrid.searchText) {\n      this.alert.add({\n        text: gettext('Search reset. Full text search does not support filtering.'),\n        type: Status.WARNING,\n        timeout: this.WARNING_TIMEOUT_TIME\n      } as Alert);\n      this.searchText = '';\n      this.searchGrid.dataGrid.searchText = '';\n    }\n  }\n\n  resetFilter() {\n    this.filter = '';\n    if (this.searchGrid.dataGrid.filteringApplied) {\n      this.alert.add({\n        text: gettext('Filter reset. Full text search does not support filtering.'),\n        type: Status.WARNING,\n        timeout: this.WARNING_TIMEOUT_TIME\n      } as Alert);\n      this.searchGrid.dataGrid.clearFilters(false);\n    }\n  }\n\n  ngOnDestroy() {\n    this.unsubscribe$.next();\n    this.unsubscribe$.complete();\n  }\n\n  private onQueryParamsChange(filter: string, searchTerm: string) {\n    if (!this.shouldFilter(filter) && searchTerm) {\n      this.searchText = searchTerm || '';\n    }\n  }\n\n  private shouldFilter(filter) {\n    if (!filter) {\n      return false;\n    }\n    this.resetSearch();\n    this.filter = filter || '';\n    this.searchGrid.updateFiltering(['name'], {\n      type: FilteringActionType.ApplyFilter,\n      payload: {\n        filteringModifier: {\n          externalFilterQuery: {\n            names: [this.filter]\n          }\n        }\n      }\n    });\n    return true;\n  }\n}\n","import { Component } from '@angular/core';\nimport { IManagedObject } from '@c8y/client';\nimport { NavigationExtras, Router } from '@angular/router';\nimport { RouterService as C8yRouter } from '@c8y/ngx-components';\n\n@Component({\n  selector: 'c8y-search-action',\n  templateUrl: './search-action.component.html'\n})\nexport class SearchActionComponent {\n  constructor(private c8yRouter: C8yRouter, private router: Router) {}\n\n  onSearch(on: string) {\n    this.navigate(['/assetsearch'], {\n      queryParams: { search: on },\n      replaceUrl: true\n    });\n  }\n\n  onFilter(on: string) {\n    this.navigate(['/assetsearch'], {\n      queryParams: { filter: on },\n      replaceUrl: true\n    });\n  }\n\n  onClick(mo: IManagedObject) {\n    this.router.navigateByUrl(this.c8yRouter.getHref(mo, '/'));\n  }\n\n  private navigate(commands: any[], extras?: NavigationExtras) {\n    this.router\n      .navigateByUrl('/', { skipLocationChange: true })\n      .then(() => this.router.navigate(commands, extras));\n  }\n}\n","import { NgModule } from '@angular/core';\nimport {\n  CoreModule,\n  HOOK_ONCE_ROUTE,\n  HOOK_SEARCH,\n  Search,\n  HOOK_ROUTE,\n  SearchModule as CoreSearchModule\n} from '@c8y/ngx-components';\nimport { DeviceGridModule } from '@c8y/ngx-components/device-grid';\nimport { SearchResultsComponent } from './search-results.component';\nimport { SearchGridComponent } from './search-grid.component';\nimport { SearchActionComponent } from './search-action.component';\nimport { AssetSearchService } from './search.service';\n\n@NgModule({\n  declarations: [SearchResultsComponent, SearchGridComponent, SearchActionComponent],\n  imports: [CoreModule, DeviceGridModule, CoreSearchModule],\n  entryComponents: [SearchResultsComponent, SearchActionComponent],\n  exports: [SearchResultsComponent, SearchGridComponent],\n  providers: [\n    AssetSearchService,\n    {\n      provide: HOOK_ROUTE,\n      useValue: [\n        {\n          path: 'assetsearch',\n          component: SearchResultsComponent\n        }\n      ],\n      multi: true\n    },\n    {\n      provide: HOOK_SEARCH,\n      useValue: [\n        {\n          template: SearchActionComponent\n        }\n      ] as Search[],\n      multi: true\n    }\n  ]\n})\nexport class SearchModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n\nexport {SearchActionComponent as ɵa} from './search-action.component';"]}