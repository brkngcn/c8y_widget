{"version":3,"file":"c8y-ngx-components-device-list.js","sources":["../../device-list/add-smart-group.component.ts","../../device-list/device-list.component.ts","../../device-list/device-list-navigation.factory.ts","../../device-list/device-list.module.ts","../../device-list/c8y-ngx-components-device-list.ts"],"names":[],"mappings":"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","sourcesContent":["import { Component } from '@angular/core';\nimport { SmartGroupsService } from '@c8y/client';\nimport { AlertService, gettext } from '@c8y/ngx-components';\nimport { DeviceGridService } from '@c8y/ngx-components/device-grid';\nimport { TranslateService } from '@ngx-translate/core';\nimport { BsModalRef } from 'ngx-bootstrap/modal';\nimport { of } from 'rxjs';\nimport { catchError, switchMap, take, tap } from 'rxjs/operators';\n\n@Component({\n  selector: 'c8y-add-smart-group',\n  templateUrl: './add-smart-group.component.html'\n})\nexport class AddSmartGroupComponent {\n  smartGroup = {\n    name: '',\n    type: 'c8y_DynamicGroup',\n    c8y_IsDynamicGroup: {}\n  };\n\n  configKey: string;\n  deviceQuery: string;\n\n  constructor(\n    private modal: BsModalRef,\n    private smartGroupsService: SmartGroupsService,\n    private deviceGridService: DeviceGridService,\n    private alert: AlertService,\n    private translateService: TranslateService\n  ) {}\n\n  create() {\n    return this.deviceGridService\n      .getConfig$(this.configKey)\n      .pipe(\n        switchMap(config => {\n          return this.smartGroupsService.create({\n            smartGroup: this.smartGroup,\n            deviceQueryString: this.deviceQuery,\n            configurableColumns: config\n          });\n        }),\n        tap(() => {\n          this.alert.success(\n            this.translateService.instant(gettext('Smart group {{ name }} created.'), {\n              name: this.smartGroup.name\n            })\n          );\n          this.modal.hide();\n        }),\n        catchError(ex => {\n          this.alert.addServerFailure(ex);\n          return of([]);\n        }),\n        take(1)\n      )\n      .subscribe();\n  }\n\n  close() {\n    this.modal.hide();\n  }\n}\n","import { Component } from '@angular/core';\nimport { DeviceGridService } from '@c8y/ngx-components/device-grid';\nimport { BsModalService } from 'ngx-bootstrap/modal';\nimport { AddSmartGroupComponent } from './add-smart-group.component';\n\n@Component({\n  selector: 'c8y-device-list',\n  templateUrl: './device-list.component.html'\n})\nexport class DeviceListComponent {\n  readonly GRID_CONFIG_KEY = 'device-grid-all';\n\n  count$ = this.deviceGridService.getTotal({});\n\n  deviceQueryStringOutput: string;\n\n  constructor(\n    protected deviceGridService: DeviceGridService,\n    private bsModalService: BsModalService\n  ) {}\n\n  async createSmartGroup() {\n    const initialState = {\n      configKey: this.GRID_CONFIG_KEY,\n      deviceQuery: this.deviceQueryStringOutput\n    };\n\n    this.bsModalService.show(AddSmartGroupComponent, {\n      class: 'modal-sm',\n      initialState\n    });\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { gettext, NavigatorNode, NavigatorNodeFactory } from '@c8y/ngx-components';\n\n@Injectable()\nexport class DeviceListNavigationFactory implements NavigatorNodeFactory {\n  navs: NavigatorNode[] = [];\n\n  async get() {\n    this.navs.push(\n      new NavigatorNode({\n        label: gettext('All devices'),\n        path: 'device',\n        icon: 'c8y-device-management',\n        parent: {\n          label: gettext('Devices'),\n          icon: 'exchange'\n        },\n        priority: 2000\n      })\n    );\n\n    return this.navs;\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { Route, RouterModule } from '@angular/router';\nimport { CoreModule, CommonModule, HOOK_NAVIGATOR_NODES } from '@c8y/ngx-components';\nimport { DeviceGridModule } from '@c8y/ngx-components/device-grid';\n\nimport { DeviceListNavigationFactory } from './device-list-navigation.factory';\nimport { DeviceListComponent } from './device-list.component';\nimport { AddSmartGroupComponent } from './add-smart-group.component';\n\nconst routes: Route[] = [\n  {\n    path: 'device',\n    component: DeviceListComponent\n  }\n];\n\n@NgModule({\n  imports: [CoreModule, CommonModule, DeviceGridModule, RouterModule.forChild(routes)],\n  declarations: [DeviceListComponent, AddSmartGroupComponent],\n  entryComponents: [DeviceListComponent],\n  exports: [],\n  providers: [\n    {\n      provide: HOOK_NAVIGATOR_NODES,\n      useClass: DeviceListNavigationFactory,\n      multi: true\n    }\n  ]\n})\nexport class DeviceListModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"]}