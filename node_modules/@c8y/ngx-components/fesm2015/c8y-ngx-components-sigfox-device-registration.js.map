{"version":3,"file":"c8y-ngx-components-sigfox-device-registration.js","sources":["../../sigfox-device-registration/sigfox-provider.service.ts","../../sigfox-device-registration/sigfox-device-registration.component.ts","../../sigfox-device-registration/sigfox-device-registration-button.component.ts","../../sigfox-device-registration/sigfox-device-registration.factory.ts","../../sigfox-device-registration/sigfox-device-registration.module.ts","../../sigfox-device-registration/c8y-ngx-components-sigfox-device-registration.ts"],"names":[],"mappings":"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","sourcesContent":["import { Injectable } from '@angular/core';\nimport {\n  ApplicationService,\n  FetchClient,\n  IFetchOptions,\n  IManagedObject,\n  InventoryService,\n  IResult,\n  IResultList,\n  ITenantOption,\n  TenantOptionsService\n} from '@c8y/client';\nimport { SigfoxDevice } from './sigfox-device-registration.model';\nimport { TranslateService } from '@ngx-translate/core';\nimport { gettext } from '@c8y/ngx-components';\n\nexport enum ErrorName {\n  NoDeviceProtocolsError = 'NoDeviceProtocolsError',\n  NoConnectivitySettingsError = 'NoConnectivitySettingsError',\n  ContractError = 'ContractError',\n  NoContractsError = 'NoContractsError',\n  RegistrationError = 'RegistrationError',\n  DeviceProtocolsFetchError = 'DeviceProtocolsFetchError'\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class SigfoxProviderService {\n  private readonly baseUrl: string = '/service/sigfox-agent/';\n  private readonly registrationUrl: string = `${this.baseUrl}newDeviceRequest`;\n  private readonly contractsUrl: string = `${this.baseUrl}contract`;\n  private readonly header: any = { 'Content-Type': 'application/json' };\n\n  constructor(\n    private client: FetchClient,\n    private inventoryService: InventoryService,\n    private tenantOptions: TenantOptionsService,\n    private translateService: TranslateService,\n    private applicationService: ApplicationService\n  ) {}\n  async getConnections() {\n    const options: IFetchOptions = {\n      method: 'GET',\n      headers: this.header\n    };\n    const res = await this.client.fetch(`${this.baseUrl}lns-connection`, options);\n    const data = await res.json();\n\n    if (res.status === 200) {\n      if (data.length === 0) {\n      await this.throwNoConnectivitySettingsError();\n      }\n    } else {\n      await this.throwNoConnectivitySettingsError();\n    }\n    return { res, data };\n  }\n\n  /**\n   * Gets contracts from Sigfox platform.\n   * @param connectionName The name of connection for which contracts will be retrieved\n   * @returns The result list with contract, or throws an error with exception.\n   */\n  async getContracts(connectionName: string): Promise<IResultList<any>> {\n    const options: IFetchOptions = {\n      method: 'GET',\n      headers: this.header,\n      params: {\n        sigfoxConnectionName: connectionName\n      }\n    };\n    const res = await this.client.fetch(this.contractsUrl, options);\n\n    const data = await res.json();\n\n    if (res.status === 200) {\n      if (data.length === 0) {\n        this.throwNoContractsError();\n      }\n    } else {\n      this.throwContractError(data);\n    }\n    return { res, data };\n  }\n\n  async createDevice(device: SigfoxDevice): Promise<IResult<SigfoxDevice>> {\n    const options: IFetchOptions = {\n      method: 'POST',\n      headers: this.header,\n      body: JSON.stringify(device)\n    };\n    const res = await this.client.fetch(this.registrationUrl, options);\n    const data = await res.json();\n\n    if (res.status !== 201) {\n      this.throwRegistrationError(data);\n    }\n    return { res, data };\n  }\n\n  async getAvailableProtocols(\n    filter: object = { withTotalPages: true }\n  ): Promise<IResultList<IManagedObject>> {\n    const query = {\n      __filter: {\n        __and: [\n          { __has: 'c8y_IsDeviceType' },\n          {\n            type: { __in: ['c8y_SigfoxDeviceType', 'c8y_LpwanDeviceType'] }\n          }\n        ]\n      },\n      __orderby: [{ name: 1 }]\n    };\n    const { res, data } = await this.inventoryService.listQuery(query, filter);\n\n    if (res.status === 200) {\n      if (data.length === 0) {\n        this.throwNoDeviceProtocolsError();\n      }\n    } else {\n      this.throwDeviceProtocolsFetchError();\n    }\n\n    return { res, data };\n  }\n\n  async hasConnectivitySettings(): Promise<boolean> {\n    const option: ITenantOption = {\n      category: 'sigfox-agent',\n      key: 'provider.token'\n    };\n    try {\n      await this.tenantOptions.detail(option);\n      return true;\n    } catch (e) {\n      await this.throwNoConnectivitySettingsError();\n    }\n  }\n\n  private async throwNoConnectivitySettingsError() {\n    const error = new Error();\n    error.name = ErrorName.NoConnectivitySettingsError;\n    const hasAdminRight = (await this.applicationService.isAvailable('administration')).data;\n    if (hasAdminRight) {\n      error.message = this.translateService.instant(\n        gettext(\n          `Connectivity settings are not configured. Configure them in the Administration app under <a href=\"{{ link }}\">Settings</a>.`\n        ),\n        {\n          link: '/apps/administration/index.html#/connectivitySettings/sigfox_provider_settings'\n        }\n      );\n    } else {\n      error.message = gettext(\n        'Connectivity settings are not configured. Contact the administrator.'\n      );\n    }\n\n    throw error;\n  }\n\n  private throwRegistrationError(data: { message: string }) {\n    const error = new Error();\n    error.name = ErrorName.RegistrationError;\n    error.message = data.message;\n    throw error;\n  }\n\n  private throwDeviceProtocolsFetchError() {\n    const error = new Error();\n    error.name = ErrorName.DeviceProtocolsFetchError;\n    error.message = gettext('Could not load device protocols.');\n    throw error;\n  }\n\n  private throwNoDeviceProtocolsError() {\n    const error = new Error();\n    error.name = ErrorName.NoDeviceProtocolsError;\n    error.message = this.translateService.instant(\n      gettext(\n        `No device protocols configured. Create a Sigfox device protocol in <a href=\"{{ link }}\">Device protocols</a>.`\n      ),\n      {\n        link: '/apps/devicemanagement/#/deviceprotocols'\n      }\n    );\n    throw error;\n  }\n\n  private throwContractError(data: { message: string }) {\n    const error = new Error();\n    error.name = ErrorName.ContractError;\n    error.message = data.message;\n    throw error;\n  }\n\n  private throwNoContractsError() {\n    const error = new Error();\n    error.name = ErrorName.NoContractsError;\n    error.message = gettext(\n      'No contracts found. New contracts must be created via the Sigfox platform.'\n    );\n    throw error;\n  }\n}\n","import { ChangeDetectorRef, Component } from '@angular/core';\nimport { FormlyFieldConfig } from '@ngx-formly/core';\nimport { gettext, C8yStepper } from '@c8y/ngx-components';\nimport { AbstractControl, FormGroup } from '@angular/forms';\nimport { BehaviorSubject, defer, forkJoin, from, of, Subject, throwError } from 'rxjs';\nimport { CdkStep } from '@angular/cdk/stepper';\nimport { BsModalRef } from 'ngx-bootstrap/modal';\nimport { SigfoxProviderService, ErrorName } from './sigfox-provider.service';\nimport {\n  catchError,\n  map,\n  switchMap,\n  shareReplay,\n  takeUntil,\n  mergeMap\n} from 'rxjs/operators';\nimport { cloneDeep, uniq } from 'lodash-es';\nimport { SigfoxDevice, SigfoxDeviceFormly } from './sigfox-device-registration.model';\nimport { TranslateService } from '@ngx-translate/core';\n\ntype State =\n  | 'loadPending'\n  | 'loadSuccess'\n  | 'loadError'\n  | 'registrationPending'\n  | 'registrationSuccess'\n  | 'registrationError';\n\n@Component({\n  selector: 'c8y-sigfox-device-registration',\n  templateUrl: 'sigfox-device-registration.component.html'\n})\nexport class SigfoxDeviceRegistrationComponent {\n  stepper: C8yStepper;\n  readonly PAGING: object = {\n    withTotalPages: true,\n    pageSize: 10\n  };\n\n  form = new FormGroup({});\n  model: SigfoxDeviceFormly = {} as any;\n  protocols$ = this.getProtocols$();\n  connections$ = this.getConnections$();\n  unsubscribe$: Subject<void> = new Subject();\n\n  load$ = this.connections$.pipe(\n    catchError((error: Error) => of(error)),\n    switchMap(connections => {\n      if (connections instanceof Error && connections.name === ErrorName.NoConnectivitySettingsError) {\n        return of([connections]);\n      }\n      return forkJoin([\n        of(connections),\n        this.protocols$.pipe(catchError((error: Error) => of(error)))\n      ]);\n    }),\n    map(results => {\n      return results.filter(result => {\n        return result instanceof Error;\n      });\n    }),\n    switchMap(errors => {\n      return errors.length === 0 ? of([]) : throwError(errors);\n    })\n  );\n\n  fields: FormlyFieldConfig[] = [\n    {\n      key: 'id',\n      type: 'string',\n      templateOptions: {\n        placeholder: 'FED987',\n        label: gettext('ID'),\n        required: true,\n        pattern: '(0x){0,1}[0-9A-F]+(h){0,1}'\n      },\n      validation: {\n        messages: {\n          pattern: gettext('Must be a valid hexadecimal number.')\n        }\n      }\n    },\n    {\n      key: 'pac',\n      type: 'string',\n      templateOptions: {\n        placeholder: 'FEDCBA9876543210',\n        label: gettext('PAC'),\n        required: true,\n        pattern: '^([a-fA-F0-9]{16})$'\n      },\n      validation: {\n        messages: {\n          pattern: gettext('Must be a valid 16 digit hexadecimal number.')\n        }\n      }\n    },\n    {\n      key: 'connection',\n      type: 'typeahead',\n      templateOptions: {\n        label: gettext('Connection'),\n        required: true,\n        c8yForOptions: this.connections$,\n        displayProperty: 'name',\n        valueProperties: ['name']\n      }\n    },\n    {\n      key: 'contract',\n      type: 'typeahead',\n      templateOptions: {\n        label: gettext('Contract'),\n        required: true,\n        placeholder: 'Free contract_25',\n        displayProperty: 'name',\n        valueProperties: ['id'],\n        description: gettext('Only active contracts with free slots are displayed.')\n      },\n      hooks: {\n        onInit: field => {\n          const connectionControl = field.form.get('connection');\n          connectionControl.valueChanges\n          .pipe(\n            takeUntil(this.unsubscribe$),\n            mergeMap(() => this.getContracts$(this.form.get('connection').value.name))\n          )\n          .subscribe(\n            profiles => {\n              field.templateOptions.c8yForOptions = of(profiles);\n              field.formControl.setValue(null);\n            },\n            error => {\n              field.form.controls.contract.setErrors({ contract: true });\n              field.validators.contract.message = error.message;\n            }\n          );\n        }\n      },\n      validators: {\n        contract: {\n          expression: (control: AbstractControl) => {\n            return control.status === 'VALID';\n          },\n          message: () => '',\n        },\n      }\n    },\n    {\n      key: 'deviceType',\n      type: 'typeahead',\n      templateOptions: {\n        label: gettext('Device protocol'),\n        required: true,\n        c8yForOptions: this.protocols$,\n        displayProperty: 'name',\n        valueProperties: ['id', 'name']\n      }\n    },\n    {\n      key: 'productCertificate',\n      type: 'string',\n      templateOptions: {\n        placeholder: 'P_001F_EDCB_01',\n        label: gettext('Product certificate key'),\n        pattern: 'P_[0-9A-F]{4}_[0-9A-F]{4}_[0-9A-F]{2}',\n        description: gettext(\n          'If no product certificate key is specified, the device is considered a prototype.'\n        )\n      },\n      validation: {\n        messages: {\n          pattern: (error, field: FormlyFieldConfig) =>\n            this.translateService.instant(\n              gettext('Must be a valid product certificate key, for example, {{ example }}'),\n              { example: 'P_001F_EDCB_01' }\n            )\n        }\n      }\n    }\n  ];\n\n  registrationStepLabels = {\n    next: gettext('Register')\n  };\n  finalStepLabels = {\n    back: gettext('Close')\n  };\n\n  state: State = 'loadPending';\n  errors$ = new BehaviorSubject<Error[]>([]);\n  errorMessages$ = this.errors$.pipe(\n    map(errors => errors.map(error => error.message)),\n    map(messages => uniq(messages))\n  );\n  constructor(\n    public bsModalRef: BsModalRef,\n    private sigfoxService: SigfoxProviderService,\n    private translateService: TranslateService\n  ) {\n    this.load$.subscribe(\n      () => {\n        this.state = 'loadSuccess';\n      },\n      errors => {\n        this.state = 'loadError';\n        this.errors$.next(errors);\n      }\n    );\n  }\n\n  async create(event: { stepper: C8yStepper; step: CdkStep }) {\n    this.state = 'registrationPending';\n    const sigfoxDevice = this.getSigfoxDeviceToSend();\n    try {\n      await this.sigfoxService.createDevice(sigfoxDevice);\n      this.state = 'registrationSuccess';\n    } catch (error) {\n      this.state = 'registrationError';\n      this.errors$.next([error]);\n    }\n\n    event.stepper.next();\n  }\n\n  getSigfoxDeviceToSend() {\n    const sigfoxDevice: SigfoxDevice = cloneDeep(this.model);\n    sigfoxDevice.lnsConnectionName = this.model.connection.name;\n    sigfoxDevice.contractId = this.model.contract.id;\n    sigfoxDevice.prototype = !sigfoxDevice.productCertificate;\n    delete (sigfoxDevice as any).contract;\n    delete (sigfoxDevice as any).connection;\n    return sigfoxDevice;\n  }\n\n  getContracts$(name) {\n    return defer(() => from(this.sigfoxService.getContracts(name))).pipe(shareReplay(1));\n  }\n\n  getProtocols$() {\n    return defer(() => from(this.sigfoxService.getAvailableProtocols())).pipe(shareReplay(1));\n  }\n\n  getConnections$() {\n    return defer(() => from(this.sigfoxService.getConnections())).pipe(shareReplay(1));\n  }\n\n  ngOnDestroy(): void {\n    this.unsubscribe$.next();\n    this.unsubscribe$.complete();\n  }\n}\n","import { Component } from '@angular/core';\nimport { BsModalService } from 'ngx-bootstrap/modal';\nimport { SigfoxDeviceRegistrationComponent } from './sigfox-device-registration.component';\n@Component({\n  selector: 'c8y-sigfox-registration',\n  templateUrl: 'sigfox-device-registration-button.component.html'\n})\nexport class SigfoxDeviceRegistrationButtonComponent {\n  constructor(private modalService: BsModalService) {}\n\n  open() {\n    this.modalService.show(SigfoxDeviceRegistrationComponent, {\n      class: 'modal-sm',\n      ignoreBackdropClick: true\n    });\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { TenantUiService } from '@c8y/ngx-components';\nimport { SigfoxDeviceRegistrationButtonComponent } from './sigfox-device-registration-button.component';\nimport { RegisterDeviceFactory, RegisterDeviceItem } from '@c8y/ngx-components/register-device';\n@Injectable()\nexport class SigfoxDeviceRegistrationFactory implements RegisterDeviceFactory {\n  constructor(private tenantService: TenantUiService) {}\n\n  get() {\n    const items: RegisterDeviceItem[] = [];\n    if (this.tenantService.isMicroserviceSubscribedInCurrentTenant('sigfox-agent')) {\n      items.push({\n        template: SigfoxDeviceRegistrationButtonComponent,\n        priority: 98,\n        category: 'single'\n      } as RegisterDeviceItem);\n    }\n    return items;\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule, CoreModule } from '@c8y/ngx-components';\nimport { HOOK_DEVICE_REGISTRATION } from '@c8y/ngx-components/register-device';\nimport { SigfoxDeviceRegistrationButtonComponent } from './sigfox-device-registration-button.component';\nimport { SigfoxDeviceRegistrationComponent } from './sigfox-device-registration.component';\nimport { SigfoxDeviceRegistrationFactory } from './sigfox-device-registration.factory';\nimport { SigfoxProviderService } from './sigfox-provider.service';\n\n@NgModule({\n  imports: [CoreModule, CommonModule],\n  declarations: [SigfoxDeviceRegistrationButtonComponent, SigfoxDeviceRegistrationComponent],\n  providers: [\n    {\n      provide: HOOK_DEVICE_REGISTRATION,\n      useClass: SigfoxDeviceRegistrationFactory,\n      multi: true\n    },\n    SigfoxProviderService\n  ]\n})\nexport class SigfoxDeviceRegistrationModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n\nexport {SigfoxProviderService as Éµa} from './sigfox-provider.service';"]}