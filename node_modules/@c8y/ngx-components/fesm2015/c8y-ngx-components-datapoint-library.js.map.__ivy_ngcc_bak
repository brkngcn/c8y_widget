{"version":3,"file":"c8y-ngx-components-datapoint-library.js","sources":["../../datapoint-library/datapoint-library.model.ts","../../datapoint-library/datapoint-library-details/datapoint-library-details.component.ts","../../datapoint-library/datapoint-library-list.component.ts","../../datapoint-library/datapoint-library.module.ts","../../datapoint-library/c8y-ngx-components-datapoint-library.ts"],"sourcesContent":["import { InjectionToken } from '@angular/core';\n\nexport const pathToDatapointLibrary = 'datapointlibrary';\n\nexport const DATAPOINT_LIBRARY_CONFIG = new InjectionToken<DatapointLibraryOptions>(\n  'DatapointLibraryOptions'\n);\n\nexport interface DatapointLibraryOptions {\n  /**\n   * Allows to define whether the c8y_Global fragment should be added per default on newly created datapoints.\n   */\n  doNotAddGlobalFragmentByDefault?: boolean;\n  /**\n   * Will make a checkbox visible that allows the user to take the decision if the c8y_Global fragment should be set or not.\n   */\n  showCheckboxForGlobalFragment?: boolean;\n}\n","import { Component, Inject, OnDestroy, OnInit, Optional } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { ActivatedRoute, Data, Router } from '@angular/router';\nimport { IManagedObject, InventoryService } from '@c8y/client';\nimport { AlertService, gettext, HumanizePipe } from '@c8y/ngx-components';\nimport { TranslateService } from '@ngx-translate/core';\nimport { get } from 'lodash-es';\nimport { Subscription } from 'rxjs';\nimport {\n  DatapointLibraryOptions,\n  DATAPOINT_LIBRARY_CONFIG,\n  pathToDatapointLibrary\n} from '../datapoint-library.model';\nimport { C8yValidators, ColorService } from '@c8y/ngx-components';\nimport { DatapointParserService } from '@c8y/ngx-components/datapoint-library/services';\n\n@Component({\n  selector: 'c8y-datapoint-library-details',\n  templateUrl: './datapoint-library-details.component.html'\n})\nexport class DatapointLibraryDetailsComponent implements OnInit, OnDestroy {\n  path = pathToDatapointLibrary;\n  formGroup: FormGroup;\n  range: FormGroup;\n  redRange: FormGroup;\n  yellowRange: FormGroup;\n  datapoint: IManagedObject;\n  isLoading = true;\n\n  rangeConfig = {};\n\n  routeSub: Subscription;\n\n  constructor(\n    private activatedRoute: ActivatedRoute,\n    private inventory: InventoryService,\n    private formBuilder: FormBuilder,\n    private alertService: AlertService,\n    private router: Router,\n    private translate: TranslateService,\n    private colorService: ColorService,\n    private parser: DatapointParserService,\n    @Optional() @Inject(DATAPOINT_LIBRARY_CONFIG) public config: DatapointLibraryOptions\n  ) {\n    this.initForm();\n  }\n\n  ngOnInit() {\n    this.routeSub = this.activatedRoute.parent.data.subscribe(data => {\n      this.load(data);\n    });\n  }\n\n  ngOnDestroy(): void {\n    if (this.routeSub) {\n      this.routeSub.unsubscribe();\n    }\n  }\n\n  async save(value) {\n    const kpiValues = this.extractKpiValuesFromFormValue(value);\n    const kpi = Object.assign({}, this.datapoint?.c8y_Kpi || {}, kpiValues);\n    const cleanedUpKpi = this.removeNullValues(kpi);\n\n    const mo: Partial<IManagedObject> = {\n      c8y_Kpi: cleanedUpKpi,\n      c8y_Global: value.c8y_Global ? {} : null\n    };\n    try {\n      if (this.datapoint?.id) {\n        mo.id = this.datapoint.id;\n        const res = await this.inventory.update(mo);\n        this.datapointUpdate(res.data);\n        this.alertService.saveSuccess(gettext('Data point library entry'))();\n      } else {\n        const res = await this.inventory.create(mo);\n        this.datapointUpdate(res.data);\n        this.alertService.createSuccess(gettext('Data point library entry'))();\n      }\n      this.navigateBackToList();\n    } catch (e) {\n      this.alertService.addServerFailure(e);\n    }\n  }\n\n  cancel() {\n    this.navigateBackToList();\n  }\n\n  formChange() {\n    if (this.formGroup.invalid) {\n      return;\n    }\n    const kpiValues = this.extractKpiValuesFromFormValue(this.formGroup.value);\n    this.rangeConfig = Object.assign({ orientation: 'horizontal' }, kpiValues);\n  }\n\n  private navigateBackToList() {\n    return this.router.navigate([pathToDatapointLibrary]);\n  }\n\n  private datapointUpdate(tmpDatapoint: IManagedObject) {\n    const datapoint = this.parser.parseDatapoint(tmpDatapoint);\n    this.datapoint = datapoint;\n    const {\n      fragment,\n      series,\n      description,\n      unit,\n      target,\n      label,\n      color,\n      yellowRangeMin,\n      yellowRangeMax,\n      redRangeMin,\n      redRangeMax,\n      min,\n      max\n    } = datapoint.c8y_Kpi;\n    this.formGroup.patchValue({\n      fragment,\n      series,\n      description,\n      unit,\n      target,\n      label,\n      color,\n      range: { min, max },\n      yellowRange: { min: yellowRangeMin, max: yellowRangeMax },\n      redRange: { min: redRangeMin, max: redRangeMax },\n      c8y_Global: !!datapoint.c8y_Global\n    });\n    this.formChange();\n  }\n\n  private extractKpiValuesFromFormValue(formValue: any) {\n    const { fragment, series, description, unit, target, label, color } = formValue;\n    return {\n      fragment,\n      series,\n      description,\n      unit,\n      target,\n      label,\n      color,\n      yellowRangeMin: get(formValue, 'yellowRange.min'),\n      yellowRangeMax: get(formValue, 'yellowRange.max'),\n      redRangeMin: get(formValue, 'redRange.min'),\n      redRangeMax: get(formValue, 'redRange.max'),\n      min: get(formValue, 'range.min'),\n      max: get(formValue, 'range.max')\n    };\n  }\n\n  private async load(data: Data) {\n    this.isLoading = true;\n    this.formGroup.reset();\n    const { fragment, series } = this.activatedRoute.snapshot.queryParams;\n    const humanize = new HumanizePipe();\n    const label =\n      fragment && series\n        ? humanize.transform(`${fragment} => ${series}`)\n        : this.translate.instant(gettext('New data point template'));\n    const currentDate = new Date().toISOString();\n    const color = await this.colorService.generateColor(currentDate);\n    const contextData = (data && data.contextData) || {\n      c8y_Kpi: {\n        label,\n        fragment,\n        series,\n        color\n      },\n      c8y_Global: !this.config?.doNotAddGlobalFragmentByDefault ? {} : null\n    };\n    const { id } = contextData;\n    if (id) {\n      this.datapointUpdate((await this.inventory.detail(id)).data);\n    } else {\n      this.datapointUpdate(contextData);\n    }\n    this.isLoading = false;\n  }\n\n  private initForm(): void {\n    this.range = this.formBuilder.group(\n      {\n        min: [undefined, []],\n        max: [undefined, []]\n      },\n      { validators: [C8yValidators.minMaxValidator(), C8yValidators.requireBothMinAndMax()] }\n    );\n    this.redRange = this.formBuilder.group(\n      {\n        min: [undefined, []],\n        max: [undefined, []]\n      },\n      { validators: [C8yValidators.minMaxValidator(), C8yValidators.requireBothMinAndMax()] }\n    );\n    this.yellowRange = this.formBuilder.group(\n      {\n        min: [undefined, []],\n        max: [undefined, []]\n      },\n      { validators: [C8yValidators.minMaxValidator(), C8yValidators.requireBothMinAndMax()] }\n    );\n    this.formGroup = this.formBuilder.group(\n      {\n        color: ['', [Validators.required, Validators.minLength(4)]],\n        label: ['', [Validators.required, Validators.minLength(1), Validators.maxLength(120)]],\n        description: ['', []],\n        fragment: [\n          '',\n          [\n            Validators.required,\n            Validators.minLength(1),\n            Validators.maxLength(120),\n            Validators.pattern(/^[^.]*$/)\n          ]\n        ],\n        series: [\n          '',\n          [\n            Validators.required,\n            Validators.minLength(1),\n            Validators.maxLength(120),\n            Validators.pattern(/^[^.]*$/)\n          ]\n        ],\n        range: this.range,\n        unit: [undefined, []],\n        target: [undefined, []],\n        redRange: this.redRange,\n        yellowRange: this.yellowRange,\n        c8y_Global: [!this.config?.doNotAddGlobalFragmentByDefault, []]\n      },\n      {\n        validators: [\n          C8yValidators.withinScale('redRange.min'),\n          C8yValidators.withinScale('redRange.max'),\n          C8yValidators.withinScale('yellowRange.min'),\n          C8yValidators.withinScale('yellowRange.max'),\n          C8yValidators.withinScale('target')\n        ]\n      }\n    );\n  }\n\n  private removeNullValues(value) {\n    // remove null values before sending data to backend\n    const cleanedupValues = Object.assign({}, value);\n    Object.keys(cleanedupValues).forEach(key => {\n      if (cleanedupValues[key] === null) {\n        delete cleanedupValues[key];\n      }\n    });\n    return cleanedupValues;\n  }\n}\n","import { Component } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { IManagedObject, InventoryService, IResultList } from '@c8y/client';\nimport { AlertService, gettext, ModalService } from '@c8y/ngx-components';\nimport { TranslateService } from '@ngx-translate/core';\nimport { BehaviorSubject, Observable, pipe } from 'rxjs';\nimport { map, shareReplay, switchMap, tap } from 'rxjs/operators';\nimport { pathToDatapointLibrary } from './datapoint-library.model';\nimport { DatapointParserService } from '@c8y/ngx-components/datapoint-library/services';\n\n@Component({\n  selector: 'c8y-datapoint-library-list',\n  templateUrl: './datapoint-library-list.component.html'\n})\nexport class DatapointLibraryListComponent {\n  listClass = '';\n  isLoading = true;\n  reload$: BehaviorSubject<void> = new BehaviorSubject(null);\n  datapoints$: Observable<IResultList<IManagedObject>> = this.reload$.pipe(\n    tap(() => {\n      this.isLoading = true;\n    }),\n    switchMap(() => this.getDatapoints()),\n    tap(() => {\n      this.isLoading = false;\n    }),\n    shareReplay()\n  );\n\n  parsePipe = pipe(map((data: IManagedObject[]) => this.parser.parseDatapoints(data)));\n\n  constructor(\n    private inventory: InventoryService,\n    private router: Router,\n    private modalService: ModalService,\n    private translateService: TranslateService,\n    private alertService: AlertService,\n    private parser: DatapointParserService\n  ) {}\n\n  getDatapoints(): Promise<IResultList<IManagedObject>> {\n    return this.inventory.list({ pageSize: 20, fragmentType: 'c8y_Kpi', withTotalPages: true });\n  }\n\n  addDatapointEntry() {\n    this.router.navigate([pathToDatapointLibrary, 'new']);\n  }\n\n  editDatapointEntry(entry: IManagedObject) {\n    this.router.navigate([pathToDatapointLibrary, entry.id]);\n  }\n\n  async removeDatapointEntry(entry: IManagedObject) {\n    try {\n      await this.modalService.confirm(\n        gettext('Delete data point'),\n        this.translateService.instant(\n          gettext('You are about to delete data point \"{{ dpLabel }}\". Do you want to proceed?'),\n          { dpLabel: entry.c8y_Kpi.label }\n        ),\n        'danger'\n      );\n    } catch (e) {\n      return;\n    }\n    try {\n      await this.inventory.delete(entry.id);\n      this.reload$.next();\n    } catch (e) {\n      this.alertService.addServerFailure(e);\n    }\n  }\n\n  reload() {\n    this.reload$.next();\n  }\n}\n","import { ModuleWithProviders, NgModule } from '@angular/core';\nimport {\n  CoreModule,\n  gettext,\n  HOOK_NAVIGATOR_NODES,\n  HOOK_ROUTE,\n  NavigatorNode,\n  Route,\n  ViewContext\n} from '@c8y/ngx-components';\nimport { BsDropdownModule } from 'ngx-bootstrap/dropdown';\nimport { PopoverModule } from 'ngx-bootstrap/popover';\nimport { DatapointLibraryDetailsComponent } from './datapoint-library-details/datapoint-library-details.component';\nimport { DatapointLibraryListComponent } from './datapoint-library-list.component';\nimport {\n  DatapointLibraryOptions,\n  DATAPOINT_LIBRARY_CONFIG,\n  pathToDatapointLibrary\n} from './datapoint-library.model';\n\n@NgModule({\n  imports: [CoreModule, BsDropdownModule, PopoverModule],\n  declarations: [DatapointLibraryListComponent, DatapointLibraryDetailsComponent],\n  exports: [DatapointLibraryListComponent, DatapointLibraryDetailsComponent]\n})\nexport class DatapointLibraryModule {\n  static forRoot(\n    config: DatapointLibraryOptions = {}\n  ): ModuleWithProviders<DatapointLibraryModule> {\n    return {\n      ngModule: DatapointLibraryModule,\n      providers: [\n        {\n          provide: HOOK_ROUTE,\n          useValue: [\n            {\n              path: pathToDatapointLibrary,\n              component: DatapointLibraryListComponent\n            },\n            {\n              context: ViewContext.DatapointLibrary,\n              path: 'details',\n              component: DatapointLibraryDetailsComponent,\n              label: gettext('Details'),\n              icon: 'palette',\n              priority: 500\n            }\n          ] as Route[],\n          multi: true\n        },\n        {\n          provide: HOOK_NAVIGATOR_NODES,\n          useValue: [\n            new NavigatorNode({\n              parent: gettext('Configuration'),\n              label: gettext('Data point library'),\n              featureId: 'dataPointLibrary',\n              path: pathToDatapointLibrary,\n              icon: 'c8y-data-points',\n              routerLinkExact: false\n            })\n          ],\n          multi: true\n        },\n        {\n          provide: DATAPOINT_LIBRARY_CONFIG,\n          useValue: config\n        }\n      ]\n    };\n  }\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":"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"}