{"version":3,"file":"c8y-ngx-components-sub-assets.js","sources":["../../sub-assets/columns/asset-type.cell-renderer.component.ts","../../sub-assets/columns/asset-type-grid-column.ts","../../sub-assets/sub-assets.service.ts","../../sub-assets/group-info.component.ts","../../sub-assets/sub-assets.component.ts","../../sub-assets/delete-assets-modal/delete-assets-modal.component.ts","../../sub-assets/unassign-assets-modal/unassign-modal.component.ts","../../sub-assets/sub-assets-grid.component.ts","../../sub-assets/add-group/add-group.service.ts","../../sub-assets/add-group/add-group.component.ts","../../sub-assets/add-group/add-group.module.ts","../../sub-assets/groups.component.ts","../../sub-assets/assign-devices/assign-devices.component.ts","../../sub-assets/assign-devices/assign-child-devices.component.ts","../../sub-assets/asset-properties.component.ts","../../sub-assets/asset-properties-item.component.ts","../../sub-assets/sub-assets.module.ts","../../sub-assets/c8y-ngx-components-sub-assets.ts"],"names":[],"mappings":"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","sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { CellRendererContext, gettext } from '@c8y/ngx-components';\nimport { AssetNodeService } from '@c8y/ngx-components/assets-navigator';\n\n@Component({\n  templateUrl: './asset-type.cell-renderer.component.html'\n})\nexport class AssetTypeCellRendererComponent implements OnInit {\n  groupIcon: string;\n  isAnyGroup: boolean;\n  isDevice: boolean;\n  isAsset: boolean;\n  iconTitle: string;\n  constructor(public context: CellRendererContext, protected assetNodeService: AssetNodeService) { }\n\n  ngOnInit() {\n    this.isAnyGroup = this.assetNodeService.isAnyGroup(this.context.item);\n    this.groupIcon = this.assetNodeService.icon(this.context.item);\n    this.isDevice = this.assetNodeService.isDevice(this.context.item);\n    this.isAsset = this.assetNodeService.isAsset(this.context.item);\n    this.iconTitle = this.getIconTitle(this.groupIcon);\n  }\n\n  private getIconTitle(icon: string): string {\n    if (this.isAsset) {\n      return this.context.item.type;\n    }\n\n    switch (icon) {\n      case 'c8y-group':\n        return gettext('Group');\n      case 'c8y-group-smart':\n        return gettext('Smart group');\n      case 'c8y-group-remote-inactive':\n        return 'Inactive remote group';\n      case 'c8y-group-remote':\n        return gettext('Remote group');\n      case 'exchange':\n        return gettext('Device');\n      default:\n        return gettext('Asset');\n    }\n  }\n}\n","import {\n  gettext,\n  ColumnDataType,\n  ColumnConfig,\n  getBasicInputArrayFormFieldConfig\n} from '@c8y/ngx-components';\nimport { AssetTypeCellRendererComponent } from './asset-type.cell-renderer.component';\nimport { BaseDeviceGridColumn } from '@c8y/ngx-components/device-grid';\n\nexport class AssetTypeGridColumn extends BaseDeviceGridColumn {\n  constructor(initialColumnConfig?: ColumnConfig) {\n    super(initialColumnConfig);\n    this.name = 'type';\n    this.header = gettext('Type');\n    this.dataType = ColumnDataType.Icon;\n    this.cellRendererComponent = AssetTypeCellRendererComponent;\n    this.sortable = true;\n    this.sortingConfig = {\n      pathSortingConfigs: [{ path: `c8y_IsDeviceGroup` }]\n    };\n\n    this.filterable = true;\n    this.filteringConfig = {\n      fields: getBasicInputArrayFormFieldConfig({\n        key: 'types',\n        label: gettext('Show items with type'),\n        addText: gettext('Add next`type`'),\n        tooltip: gettext('Use * as a wildcard character'),\n        placeholder: gettext('building`e.g. house`')\n      }),\n      getFilter(model: any): any {\n        const filter: any = {};\n        if (model.types.length) {\n          filter.type = { __in: model.types };\n        }\n        return filter;\n      }\n    };\n  }\n}\n","import { Injectable, Optional } from '@angular/core';\nimport {\n  IManagedObject,\n  InventoryService,\n  IRule,\n  QueriesUtil,\n  SmartGroupsService,\n  SmartRulesService,\n  UserService\n} from '@c8y/client';\nimport {\n  ActionControl,\n  AlertService,\n  AppStateService,\n  AssetTypesService,\n  BulkActionControl,\n  GainsightService,\n  gettext,\n  ModalService,\n  Pagination,\n  Permissions,\n  UserPreferencesService\n} from '@c8y/ngx-components';\nimport { AssetNodeService } from '@c8y/ngx-components/assets-navigator';\nimport {\n  AlarmsDeviceGridColumn,\n  DeviceGridColumn,\n  DeviceGridService,\n  ImeiDeviceGridColumn,\n  ModelDeviceGridColumn,\n  NameDeviceGridColumn,\n  RegistrationDateDeviceGridColumn,\n  SerialNumberDeviceGridColumn,\n  SystemIdDeviceGridColumn\n} from '@c8y/ngx-components/device-grid';\nimport { TranslateService } from '@ngx-translate/core';\nimport { AssetTypeGridColumn } from './columns/asset-type-grid-column';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class SubAssetsService extends DeviceGridService {\n  queriesUtil: QueriesUtil;\n  protected GRID_CONFIG_DEFAULT_STORAGE_KEY = 'sub-assets-grid-config';\n  private IS_DEVICE_GROUP_FRAGMENT = 'c8y_IsDeviceGroup';\n  private IS_DYNAMIC_GROUP_FRAGMENT = 'c8y_IsDynamicGroup';\n\n  constructor(\n    protected translateService: TranslateService,\n    protected inventoryService: InventoryService,\n    protected userService: UserService,\n    protected appState: AppStateService,\n    protected user: UserService,\n    protected assetNodeService: AssetNodeService,\n    protected smartGroupsService: SmartGroupsService,\n    protected smartRulesService: SmartRulesService,\n    protected alertService: AlertService,\n    protected permissionsService: Permissions,\n    protected modal: ModalService,\n    protected assetTypes: AssetTypesService,\n    protected userPreferencesService: UserPreferencesService,\n    @Optional() protected gainsightService?: GainsightService\n  ) {\n    super(\n      inventoryService,\n      userService,\n      translateService,\n      alertService,\n      modal,\n      undefined,\n      userPreferencesService,\n      gainsightService\n    );\n  }\n\n  async getCustomProperties(group: IManagedObject): Promise<IManagedObject[]> {\n    const assetType = this.assetTypes.getAssetTypeByName(group.type);\n    if (assetType) {\n      const { data } = await this.inventoryService.childAdditionsList(assetType, {\n        pageSize: 2000,\n        fragmentType: 'c8y_IsAssetProperty'\n      });\n      return data;\n    }\n    return [];\n  }\n\n  getDefaultColumns(filterable: boolean = true, sortable: boolean = true): DeviceGridColumn[] {\n    const defaultColumns = [\n      new AssetTypeGridColumn({ sortOrder: 'desc' }),\n      new NameDeviceGridColumn({ sortOrder: 'asc' }),\n      new ModelDeviceGridColumn(),\n      new SerialNumberDeviceGridColumn({ visible: false }),\n      new RegistrationDateDeviceGridColumn({ visible: false }),\n      new SystemIdDeviceGridColumn({ visible: false }),\n      new ImeiDeviceGridColumn({ visible: false }),\n      new AlarmsDeviceGridColumn()\n    ];\n    return defaultColumns;\n  }\n\n  getDefaultPagination(): Pagination {\n    const { pagination } = this.getConfig();\n    return {\n      pageSize: pagination.pageSize,\n      currentPage: 1\n    };\n  }\n\n  getDefaultActionControls(): ActionControl[] {\n    return [];\n  }\n\n  async unassignAsset(asset: IManagedObject, parentRef: IManagedObject) {\n    const { id: assetId } = asset;\n    const { id: parentId } = parentRef;\n\n    if (this.isDevice(asset)) {\n      try {\n        await this.inventoryService.childAssetsRemove(assetId, parentId);\n        const alertMessage = this.translateService.instant(gettext('Asset unassigned.'));\n        this.alertService.success(alertMessage);\n      } catch (error) {\n        const alertMessage = this.translateService.instant(gettext('Could not unassign asset.'));\n        this.alertService.danger(alertMessage);\n      }\n      await this.deactivateSmartrulesForAsset(asset, parentRef);\n    }\n  }\n\n  isDevice(asset: IManagedObject): boolean {\n    return (\n      !asset.hasOwnProperty(this.IS_DEVICE_GROUP_FRAGMENT) &&\n      !asset.hasOwnProperty(this.IS_DYNAMIC_GROUP_FRAGMENT)\n    );\n  }\n\n  async deleteAsset(asset: IManagedObject, parentRef: IManagedObject, params = {}) {\n    const isGroup =\n      asset.hasOwnProperty(this.IS_DEVICE_GROUP_FRAGMENT) ||\n      this.smartGroupsService.isSmartGroup(asset);\n\n    if (isGroup) {\n      await this.deleteGroup(asset, params);\n    } else {\n      await this.deleteDevice(asset, params);\n    }\n\n    if (\n      parentRef &&\n      !this.smartGroupsService.isSmartGroup(asset) &&\n      !this.smartGroupsService.isSmartGroupV2(asset)\n    ) {\n      await this.deactivateSmartrulesForAsset(asset, parentRef);\n    }\n  }\n\n  shouldShowWithDeviceUserCheckbox(asset: IManagedObject): boolean {\n    const { owner, c8y_IsDevice: isRootDevice } = asset;\n    const hasDeviceUserAsOwner = asset.owner && this.isDeviceUser(owner);\n\n    return Boolean(isRootDevice && hasDeviceUserAsOwner);\n  }\n\n  getDefaultBulkActionControls(): BulkActionControl[] {\n    return [];\n  }\n\n  async getData(\n    columns: DeviceGridColumn[],\n    pagination: Pagination,\n    parentReference: IManagedObject,\n    baseQuery: any = {}\n  ) {\n    const isRoot = !parentReference;\n    if (isRoot) {\n      const query = this.buildCombinedRootQueryFilter(columns, pagination);\n      return this.assetNodeService.getRootNodes({ ...pagination, query });\n    }\n    const filters = {\n      ...this.getAssetsFilters(columns, pagination, baseQuery),\n      withParents: false\n    };\n    if (this.assetNodeService.isGroup(parentReference)) {\n      return this.assetNodeService.getGroupItems(parentReference.id, filters);\n    }\n    if (this.assetNodeService.isDynamicGroup(parentReference)) {\n      return this.assetNodeService.getDynamicGroupItems(\n        parentReference.c8y_DeviceQueryString,\n        filters\n      );\n    }\n    if (this.assetNodeService.isDevice(parentReference)) {\n      return this.assetNodeService.getDeviceChildren(parentReference.id, filters);\n    }\n  }\n\n  async getCount(\n    columns: DeviceGridColumn[],\n    pagination: Pagination,\n    parentReference: IManagedObject,\n    baseQuery: any = {}\n  ): Promise<number> {\n    const defaultFilters = {\n      pageSize: 1,\n      withChildren: false\n    };\n    const filters = !parentReference\n      ? {\n          query: this.buildCombinedRootQueryFilter(columns, pagination),\n          ...defaultFilters\n        }\n      : {\n          ...this.getAssetsFilters(columns, pagination, baseQuery),\n          ...defaultFilters\n        };\n    return this.getAssetsStatistics(parentReference, filters);\n  }\n\n  getTotal(parentReference: IManagedObject, baseQuery: any = {}): Promise<number> {\n    const queryFilter = this.assetNodeService.rootQueryFilter();\n    const query = !parentReference\n      ? this.queriesUtil.addAndFilter(queryFilter, baseQuery)\n      : baseQuery;\n    const filters = {\n      query: this.queriesUtil.buildQuery(query),\n      withChildren: false,\n      withTotalPages: true,\n      pageSize: 1\n    };\n    return this.getAssetsStatistics(parentReference, filters);\n  }\n\n  async canEditGroup(group: IManagedObject): Promise<boolean> {\n    return await this.permissionsService.canEdit(['ROLE_INVENTORY_ADMIN'], group);\n  }\n\n  canCreateGroup(): boolean {\n    const currentUser = this.appState.currentUser.value;\n    const hasAdminRole = this.user.hasAnyRole(currentUser, [\n      'ROLE_INVENTORY_ADMIN',\n      'ROLE_INVENTORY_CREATE'\n    ]);\n    return hasAdminRole;\n  }\n\n  async canAssignDevice(group: IManagedObject): Promise<boolean> {\n    return await this.permissionsService.canEdit(['ROLE_INVENTORY_ADMIN'], group);\n  }\n\n  canEditSmartGroup(): boolean {\n    const SMART_GROUPS_ROLES_EDIT = ['ROLE_SMARTGROUP_UPDATE', 'ROLE_SMARTGROUP_ADMIN'];\n    return this.permissionsService.hasAnyRole(SMART_GROUPS_ROLES_EDIT);\n  }\n\n  canDeleteSmartGroup(): boolean {\n    const SMART_GROUPS_ROLES_DELETE = ['ROLE_SMARTGROUP_ADMIN', 'ROLE_INVENTORY_ADMIN'];\n    return this.permissionsService.hasAnyRole(SMART_GROUPS_ROLES_DELETE);\n  }\n\n  isSmartGroup(group: IManagedObject): boolean {\n    return (\n      this.smartGroupsService.isSmartGroup(group) || this.smartGroupsService.isSmartGroupV2(group)\n    );\n  }\n\n  isUsingInventoryRoles() {\n    const currentUser = this.appState.currentUser.value;\n    const hasAnyInventoryRole = this.user.hasAnyRole(currentUser, [\n      'ROLE_INVENTORY_ADMIN',\n      'ROLE_INVENTORY_READ',\n      'ROLE_INVENTORY_CREATE'\n    ]);\n    return !hasAnyInventoryRole;\n  }\n\n  protected async getAssetsStatistics(\n    parentReference: IManagedObject,\n    filters: object\n  ): Promise<number> {\n    const isRoot = !parentReference;\n    if (isRoot) {\n      return (await this.assetNodeService.getRootNodes(filters)).paging.totalPages;\n    }\n    if (this.assetNodeService.isGroup(parentReference)) {\n      return (await this.assetNodeService.getGroupItems(parentReference.id, filters)).paging\n        .totalPages;\n    }\n    if (this.assetNodeService.isDynamicGroup(parentReference)) {\n      return (\n        await this.assetNodeService.getDynamicGroupItems(\n          parentReference.c8y_DeviceQueryString,\n          filters\n        )\n      ).paging.totalPages;\n    }\n    if (this.assetNodeService.isDevice(parentReference)) {\n      return (await this.assetNodeService.getDeviceChildren(parentReference.id, filters)).paging\n        .totalPages;\n    }\n  }\n\n  protected buildCombinedRootQueryFilter(columns, pagination) {\n    const queryFilter = this.assetNodeService.rootQueryFilter();\n    const userQuery = this.getQueryObj(columns, pagination);\n    const queryPart = this.queriesUtil.addOrderbys(queryFilter, userQuery.__orderby, 'append');\n    const fullQuery = this.queriesUtil.addAndFilter(queryPart, userQuery.__filter);\n    return this.queriesUtil.buildQuery(fullQuery);\n  }\n\n  private async deleteGroup(group: IManagedObject, params: any = {}) {\n    const { cascade } = params;\n\n    try {\n      this.smartGroupsService.isSmartGroup(group) || this.smartGroupsService.isSmartGroupV2(group)\n        ? await this.smartGroupsService.delete(group, { cascade })\n        : await this.inventoryService.delete(group, { cascade });\n\n      const alertMessage = this.translateService.instant(gettext('Asset deleted.'));\n      this.alertService.success(alertMessage);\n    } catch (error) {\n      const alertMessage = this.translateService.instant(gettext('Could not delete asset.'));\n      this.alertService.danger(alertMessage);\n    }\n  }\n\n  private async deleteDevice(device: IManagedObject, params: any = {}) {\n    const { cascade, withDeviceUser } = params;\n    try {\n      const { owner } = device;\n      const shouldRemoveOwner = withDeviceUser && owner && this.isDeviceUser(owner);\n\n      shouldRemoveOwner\n        ? await this.deleteDeviceWithUser(device, cascade)\n        : await this.inventoryService.delete(device, { cascade });\n\n      const alertMessage = this.translateService.instant(gettext('Asset deleted.'));\n      this.alertService.success(alertMessage);\n    } catch (error) {\n      const alertMessage = this.translateService.instant(gettext('Could not delete asset.'));\n      this.alertService.danger(alertMessage);\n    }\n  }\n\n  private async deactivateSmartrulesForAsset(asset: IManagedObject, parentRef: IManagedObject) {\n    const { id: assetId } = asset;\n    const { id: parentId } = parentRef;\n    const rules: IRule[] = (await this.smartRulesService.listByContext(parentId)).data;\n\n    const upateSmartrulesPromises = rules.map(rule =>\n      this.smartRulesService.bulkDeactivateEnabledSources(rule, [assetId])\n    );\n\n    try {\n      await Promise.all(upateSmartrulesPromises);\n    } catch (error) {\n      const alertMessage = this.translateService.instant(\n        gettext('Could not deactivate smart rules.')\n      );\n      this.alertService.danger(alertMessage);\n    }\n  }\n\n  private isDeviceUser(userId: string) {\n    return userId.match(/^device_/);\n  }\n\n  private async deleteDeviceWithUser(device: IManagedObject, cascade: boolean) {\n    const params = { cascade, withDeviceUser: true };\n    try {\n      return await this.inventoryService.delete(device, params);\n    } catch (error) {\n      return await this.inventoryService.delete(device, { cascade });\n    }\n  }\n\n  private getAssetsFilters(columns: DeviceGridColumn[], pagination: Pagination, baseQuery) {\n    const query = this.queriesUtil.addAndFilter(this.getQueryObj(columns), baseQuery);\n    return {\n      query: this.queriesUtil.buildQuery(query),\n      pageSize: pagination.pageSize || this.DEFAULT_PAGE_SIZE,\n      currentPage: pagination.currentPage,\n      withTotalPages: true\n    };\n  }\n}\n","import { Component, EventEmitter, Input, OnChanges, Output, SimpleChanges } from '@angular/core';\nimport { IManagedObject, InventoryService, SmartGroupsService } from '@c8y/client';\nimport { AlertService, gettext, ModalService, Status } from '@c8y/ngx-components';\nimport { AssetNodeService } from '@c8y/ngx-components/assets-navigator';\nimport { TranslateService } from '@ngx-translate/core';\nimport { SubAssetsService } from './sub-assets.service';\n\n@Component({\n  selector: 'c8y-group-info',\n  templateUrl: './group-info.component.html'\n})\nexport class GroupInfoComponent implements OnChanges {\n  @Input() group: IManagedObject;\n  @Output() onGroupChange = new EventEmitter();\n  canEdit: boolean;\n  groupIcon: string;\n  smartGroupFilter: string;\n  filterHintMsg: string;\n  label: string;\n\n  private filterMsg = gettext(\n    'Smart groups are groups dynamically constructed based on filtering criteria.'\n  );\n  private canEditMsg = gettext('You can edit the filter here.');\n  private readonly GROUP_UPDATED_MSG = gettext('Group updated.');\n\n  constructor(\n    private inventory: InventoryService,\n    private subAssetsService: SubAssetsService,\n    private smartGroupsService: SmartGroupsService,\n    private alertService: AlertService,\n    private translate: TranslateService,\n    private modalService: ModalService,\n    private assetNodeService: AssetNodeService\n  ) {}\n\n  async ngOnChanges(changes: SimpleChanges) {\n    if (changes.group) {\n      this.canEdit = this.smartGroupsService.isSmartGroupV2(this.group)\n        ? this.subAssetsService.canEditSmartGroup()\n        : await this.subAssetsService.canEditGroup(this.group);\n      this.groupIcon = this.assetNodeService.icon(this.group);\n      this.smartGroupFilter = this.group.c8y_DeviceQueryString;\n      this.label = this.assetNodeService.isAsset(this.group) ? this.group.type : gettext('Group');\n      this.setHintMsg();\n    }\n  }\n\n  isSmartGroup() {\n    return this.subAssetsService.isSmartGroup(this.group);\n  }\n\n  async update(partialGroup: Partial<IManagedObject>) {\n    try {\n      const isSmartGroup: boolean = this.subAssetsService.isSmartGroup(this.group);\n      isSmartGroup\n        ? await this.updateSmartGroup(partialGroup)\n        : await this.updateGroup(partialGroup);\n    } catch (error) {\n      this.alertService.addServerFailure(error);\n    }\n  }\n\n  private setHintMsg() {\n    const filterMsgTranslated = this.translate.instant(this.filterMsg);\n    const canEditMsgTranslated = this.translate.instant(this.canEditMsg);\n    this.filterHintMsg = this.canEdit\n      ? `${filterMsgTranslated} ${canEditMsgTranslated}`\n      : this.filterMsg;\n  }\n\n  private async updateGroup(partialGroup: Partial<IManagedObject>) {\n    const { id } = this.group;\n    const group: Partial<IManagedObject> = { id, ...partialGroup };\n\n    const updatedGroup = (await this.inventory.update(group)).data;\n    this.setGroup(updatedGroup);\n  }\n\n  private async updateSmartGroup(partialGroup: Partial<IManagedObject>) {\n    const { id } = this.group;\n    const { c8y_DeviceQueryString } = partialGroup;\n    const group: Partial<IManagedObject> = { id, ...partialGroup };\n    let updatedGroup: IManagedObject;\n\n    if (!c8y_DeviceQueryString) {\n      updatedGroup = (await this.smartGroupsService.update(group)).data;\n      this.setGroup(updatedGroup);\n      return;\n    }\n\n    try {\n      const modalBody = gettext(\n        'You are about to change the smart group filter. Do you want to proceed?'\n      );\n      const title = gettext('Smart group filter');\n      await this.modalService.confirm(title, modalBody, Status.WARNING, {\n        ok: gettext('Save'),\n        cancel: gettext('Cancel')\n      });\n\n      if (!(await this.isQueryExecutable(c8y_DeviceQueryString))) {\n        return;\n      }\n    } catch (e) {\n      return;\n    }\n    updatedGroup = (await this.smartGroupsService.update(group)).data;\n    this.setGroup(updatedGroup);\n  }\n\n  private setGroup(group: IManagedObject) {\n    this.onGroupChange.emit(group);\n    this.alertService.success(this.GROUP_UPDATED_MSG);\n  }\n\n  private async isQueryExecutable(query: string): Promise<boolean> {\n    try {\n      const filter = { q: query };\n      await this.inventory.list(filter);\n      return true;\n    } catch (error) {\n      this.alertService.addServerFailure(error);\n      return false;\n    }\n  }\n}\n","import { Component, EventEmitter, OnDestroy, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { IIdentified, IManagedObject } from '@c8y/client';\nimport { DisplayOptions } from '@c8y/ngx-components';\nimport { Subscription } from 'rxjs';\nimport { SubAssetsService } from './sub-assets.service';\nimport { AssetNodeService } from '@c8y/ngx-components/assets-navigator';\n\n@Component({\n  selector: 'c8y-sub-assets',\n  templateUrl: './sub-assets.component.html'\n})\nexport class SubAssetsComponent implements OnInit, OnDestroy {\n  currentGroupId: IIdentified;\n  showChildrenForDevice: IManagedObject;\n  title: string;\n  toggle: boolean = false;\n  showAddGroup: boolean = false;\n  showAssignDevices: boolean = false;\n  requestInProgress: boolean;\n  group: IManagedObject;\n  showAssignChildDevices: boolean = false;\n  refresh: EventEmitter<any> = new EventEmitter();\n  filterable: boolean = true;\n  shouldDisableAddGroup: boolean = false;\n  shouldDisableAssignDevices: boolean = false;\n  shouldShowAssetsProperties: boolean = false;\n  displayOptions: DisplayOptions;\n  customProperties: IManagedObject[] = [];\n  private dataSub: Subscription;\n\n  constructor(\n    private route: ActivatedRoute,\n    private subAssetsService: SubAssetsService,\n    private assetNodeService: AssetNodeService\n  ) {\n    this.dataSub = this.route.parent.data.subscribe(({ contextData }) => {\n      this.init(contextData);\n    });\n  }\n\n  async ngOnInit() {\n    this.displayOptions = {\n      striped: true,\n      bordered: false,\n      gridHeader: true,\n      filter: !this.isSmartGroup()\n    };\n  }\n\n  async init(contextData) {\n    this.title = contextData.name;\n    this.currentGroupId = contextData.id;\n    this.group = contextData;\n    this.filterable = !this.assetNodeService.isDynamicGroup(contextData);\n    this.shouldDisableAddGroup = !this.subAssetsService.canCreateGroup();\n    this.shouldDisableAssignDevices = !(await this.subAssetsService.canAssignDevice(this.group));\n    this.customProperties = await this.subAssetsService.getCustomProperties(this.group);\n    this.shouldShowAssetsProperties = this.customProperties.length > 0;\n  }\n\n  groupChange(group: IManagedObject): void {\n    /**\n     * Group is cached in the context-route guard. To avoid loading old data (when switching tabs) we need to update\n     * this object in the cache.\n     */\n    Object.assign(this.group, group);\n    this.title = group.name;\n    this.refresh.emit();\n  }\n\n  isSmartGroup() {\n    return this.subAssetsService.isSmartGroup(this.group);\n  }\n\n  ngOnDestroy(): void {\n    if (this.dataSub) {\n      this.dataSub.unsubscribe();\n    }\n  }\n}\n","import { Component, Input, ViewChild } from '@angular/core';\nimport { IManagedObject } from '@c8y/client';\nimport {\n  ConfirmModalComponent, GainsightService, gettext, ModalLabels,\n  Status,\n  StatusType\n} from '@c8y/ngx-components';\nimport { TranslateService } from '@ngx-translate/core';\nimport { Subject } from 'rxjs';\nimport { DeleteModalCheckboxes } from './delete-assets-modal.model';\n\n@Component({\n  selector: 'c8y-delete-assets-modal',\n  templateUrl: './delete-assets-modal.component.html'\n})\nexport class DeleteAssetsModalComponent {\n  @Input() showWithCascadeCheckbox: boolean = true;\n  @Input() showWithDeviceUserCheckbox: boolean = false;\n  @Input() asset: IManagedObject;\n  @ViewChild('modalRef', { static: false }) modalRef: ConfirmModalComponent;\n  closeSubject: Subject<DeleteModalCheckboxes> = new Subject();\n  labels: ModalLabels = { ok: gettext('Delete'), cancel: gettext('Cancel') };\n  title: string = gettext('Delete');\n  status: StatusType = Status.DANGER;\n  config: DeleteModalCheckboxes = {\n    cascade: false,\n    withDeviceUser: false\n  };\n  message: string;\n\n  constructor(\n    private translateService: TranslateService,\n    private gainsightService: GainsightService\n  ) {\n  }\n\n  ngOnInit() {\n    this.message = this.translateService.instant(\n      gettext(\n        'You are about to delete asset: \"{{name}}\". This operation is irreversible. Do you want to proceed?'\n      ),\n      { name: this.asset.name }\n    );\n  }\n\n  async ngAfterViewInit() {\n    try {\n      await this.modalRef.result;\n      this.onClose();\n    } catch (error) {\n      this.onDismiss();\n    }\n  }\n\n  onClose() {\n    this.gainsightService.triggerEvent('deleteAssetsModal:AssetDeleted');\n    this.closeSubject.next(this.config);\n    this.closeSubject.complete();\n  }\n\n  onDismiss() {\n    this.gainsightService.triggerEvent('deleteAssetsModal:Cancel');\n    this.closeSubject.complete();\n  }\n}\n","import { Component, Input, ViewChild } from '@angular/core';\nimport { IManagedObject } from '@c8y/client';\nimport {\n  ConfirmModalComponent,\n  GainsightService,\n  gettext,\n  ModalLabels,\n  Status,\n  StatusType\n} from '@c8y/ngx-components';\nimport { TranslateService } from '@ngx-translate/core';\nimport { Subject } from 'rxjs';\n\n@Component({\n  selector: 'c8y-unassign-modal',\n  templateUrl: './unassign-modal.component.html'\n})\nexport class UnassignModalComponent {\n  @Input() asset: IManagedObject;\n  @ViewChild('modalRef', { static: false }) modalRef: ConfirmModalComponent;\n  message: string;\n  closeSubject: Subject<boolean> = new Subject();\n  labels: ModalLabels = { ok: gettext('Unassign'), cancel: gettext('Cancel') };\n  title = gettext('Unassign asset');\n  status: StatusType = Status.WARNING;\n\n  constructor(\n    private translateService: TranslateService,\n    private gainsightService: GainsightService\n  ) {\n  }\n\n  ngOnInit() {\n    this.message = this.translateService.instant(\n      gettext('You are about to unassign asset \"{{name}}\". Do you want to proceed?'),\n      { name: this.asset.name }\n    );\n  }\n\n  async ngAfterViewInit() {\n    try {\n      await this.modalRef.result;\n      this.onClose();\n    } catch (error) {\n      this.onDismiss();\n    }\n  }\n\n  onClose() {\n    this.gainsightService.triggerEvent('unassignAssetModal:AssetUnassigned');\n    this.closeSubject.next(true);\n    this.closeSubject.complete();\n  }\n\n  onDismiss() {\n    this.gainsightService.triggerEvent('unassignAssetModal:Cancel');\n    this.closeSubject.complete();\n  }\n}\n","import {\n  Component,\n  EventEmitter,\n  Input,\n  OnInit,\n  Output,\n  SimpleChanges,\n  ViewChild\n} from '@angular/core';\nimport { IManagedObject, SmartGroupsService } from '@c8y/client';\nimport {\n  ActionControl,\n  BuiltInActionType,\n  BulkActionControl,\n  DataGridComponent,\n  DataSourceModifier,\n  DisplayOptions,\n  gettext,\n  Pagination,\n  Row,\n  ServerSideDataResult\n} from '@c8y/ngx-components';\nimport { DeviceGridColumn } from '@c8y/ngx-components/device-grid';\nimport { BsModalService } from 'ngx-bootstrap/modal';\nimport { DeleteModalCheckboxes } from './delete-assets-modal';\nimport { DeleteAssetsModalComponent } from './delete-assets-modal/delete-assets-modal.component';\nimport { SubAssetsService } from './sub-assets.service';\nimport { UnassignModalComponent } from './unassign-assets-modal/unassign-modal.component';\n@Component({\n  selector: 'c8y-sub-assets-grid',\n  templateUrl: './sub-assets-grid.component.html'\n})\nexport class SubAssetsGridComponent implements OnInit {\n  @Input('parent-group') parentGroup: IManagedObject;\n  @Input() refresh: EventEmitter<any>;\n  @Input() title: string = gettext('Subassets');\n  @Input() emptyStateText: string = gettext(\n    'Add your first group or assign devices using the buttons on the action bar.'\n  );\n  @Input() loadingItemsLabel: string = gettext('Loading assets');\n\n  get columns() {\n    return this._columns;\n  }\n  @Input() set columns(value: DeviceGridColumn[]) {\n    if (value) {\n      this._columns = this.subAssetsGridService.getUserConfiguredColumns(value);\n    } else {\n      this._columns = this.subAssetsGridService.getUserConfiguredColumns(\n        this.subAssetsGridService.getDefaultColumns()\n      );\n    }\n  }\n  @Input('pagination') set _pagination(value: Pagination) {\n    if (value) {\n      this.pagination = value;\n    } else {\n      this.pagination = this.subAssetsGridService.getDefaultPagination();\n    }\n  }\n  @Input('actionControls') set _actionControls(value: ActionControl[]) {\n    if (value) {\n      this.actionControls = value;\n    } else {\n      this.actionControls = this.subAssetsGridService.getDefaultActionControls();\n    }\n  }\n  @Input() selectable: boolean = false;\n  @Input() baseQuery: any = {};\n  @Input('bulkActionControls') set _bulkActionControls(value: BulkActionControl[]) {\n    if (value) {\n      this.bulkActionControls = value;\n    } else {\n      this.bulkActionControls = this.subAssetsGridService.getDefaultBulkActionControls();\n    }\n  }\n  @Input() filterable: boolean = true;\n  @Input() sortable: boolean = true;\n  @Output() onColumnsChange: EventEmitter<DeviceGridColumn[]> = new EventEmitter<\n    DeviceGridColumn[]\n  >();\n  @Output() itemsSelect: EventEmitter<string[]> = new EventEmitter<string[]>();\n\n  pagination: Pagination = this.subAssetsGridService.getDefaultPagination();\n  showCounterWarning: boolean = false;\n  actionControls: ActionControl[];\n  bulkActionControls: BulkActionControl[] =\n    this.subAssetsGridService.getDefaultBulkActionControls();\n  serverSideDataCallback: any;\n\n  @ViewChild(DataGridComponent, { static: true })\n  dataGrid: DataGridComponent;\n\n  displayOptions: DisplayOptions = {\n    striped: true,\n    bordered: false,\n    gridHeader: true,\n    filter: true\n  };\n\n  private _columns: DeviceGridColumn[];\n\n  get isRootGroup() {\n    return !this.parentGroup;\n  }\n\n  get getInfiniteScrollMode() {\n    return this.isRootGroup && this.subAssetsGridService.isUsingInventoryRoles()\n      ? 'auto'\n      : undefined;\n  }\n\n  @Input('displayOptions')\n  set _displayOptions(displayOptions) {\n    this.displayOptions = { ...this.displayOptions, ...displayOptions };\n  }\n\n  constructor(\n    public subAssetsGridService: SubAssetsService,\n    private bsModalService: BsModalService,\n    private smartGroupsService: SmartGroupsService\n  ) {\n    this.serverSideDataCallback = this.onDataSourceModifier.bind(this);\n  }\n\n  ngOnInit() {\n    this.columns = this.subAssetsGridService.getDefaultColumns(this.filterable, this.sortable);\n    if (!this.filterable || !this.sortable) {\n      this.columns.forEach(column => {\n        column.filterable = this.filterable;\n        column.sortable = this.sortable;\n      });\n    }\n    this.setActionControls();\n  }\n\n  async setActionControls() {\n    const actionControls: ActionControl[] = [];\n    const { data: isMicroserviceInstalled } =\n      await this.smartGroupsService.isSmartGroupsV2MicroserviceInstalled();\n\n    const deleteAction: ActionControl = {\n      type: BuiltInActionType.Delete,\n      callback: (asset: Row) => this.onDeleteAsset(asset as IManagedObject, this.parentGroup),\n      showIf: (asset: Row) => {\n        if (this.smartGroupsService.isSmartGroupV2(asset as IManagedObject)) {\n          return isMicroserviceInstalled ? this.subAssetsGridService.canDeleteSmartGroup() : false;\n        }\n\n        if (this.smartGroupsService.isSmartGroup(asset as IManagedObject)) {\n          return this.subAssetsGridService.canDeleteSmartGroup();\n        }\n\n        return true;\n      }\n    };\n\n    actionControls.push(deleteAction);\n\n    const unassignAction: ActionControl = {\n      type: 'UNASSIGN',\n      icon: 'unlink',\n      text: gettext('Unassign'),\n      callback: (asset: Row) => this.onUnassignAsset(asset as IManagedObject, this.parentGroup),\n      showIf: (asset: Row) =>\n        this.subAssetsGridService.isDevice(asset as IManagedObject) &&\n        !this.subAssetsGridService.isSmartGroup(this.parentGroup as IManagedObject)\n    };\n\n    actionControls.push(unassignAction);\n\n    if (!this.actionControls) {\n      this.actionControls = actionControls;\n    }\n  }\n\n  onUnassignAsset(asset: IManagedObject, parentRef: IManagedObject) {\n    const initialState = {\n      asset\n    };\n    const modalRef = this.bsModalService.show(UnassignModalComponent, { initialState });\n\n    modalRef.content.closeSubject.subscribe(async (result: boolean) => {\n      if (result) {\n        await this.subAssetsGridService.unassignAsset(asset, parentRef);\n        this.refresh.emit();\n      }\n    });\n  }\n\n  async onDeleteAsset(asset: IManagedObject, parentRef: IManagedObject) {\n    const initialState = {\n      showWithDeviceUserCheckbox: this.subAssetsGridService.shouldShowWithDeviceUserCheckbox(asset),\n      asset,\n      showWithCascadeCheckbox:\n        !this.smartGroupsService.isSmartGroup(asset) &&\n        !this.smartGroupsService.isSmartGroupV2(asset)\n    };\n\n    const modalRef = this.bsModalService.show(DeleteAssetsModalComponent, { initialState });\n\n    modalRef.content.closeSubject.subscribe(async (result: DeleteModalCheckboxes) => {\n      if (result) {\n        await this.subAssetsGridService.deleteAsset(asset, parentRef, result);\n        this.showCounterWarning = true;\n        this.refresh.emit();\n      }\n    });\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes.parentGroup && !changes.parentGroup.firstChange) {\n      this.dataGrid.reload();\n    }\n  }\n\n  trackByName(_index, column: DeviceGridColumn): string {\n    return column.name;\n  }\n\n  async onDataSourceModifier(\n    dataSourceModifier: DataSourceModifier\n  ): Promise<ServerSideDataResult> {\n    const promises = [];\n    let counters;\n\n    promises.push(\n      this.subAssetsGridService.getData(\n        dataSourceModifier.columns,\n        dataSourceModifier.pagination,\n        this.parentGroup,\n        this.baseQuery\n      )\n    );\n\n    promises.push(this.subAssetsGridService.getTotal(this.parentGroup, this.baseQuery));\n    promises.push(\n      this.subAssetsGridService.getCount(\n        dataSourceModifier.columns,\n        dataSourceModifier.pagination,\n        this.parentGroup,\n        this.baseQuery\n      )\n    );\n\n    const [dataResponse, size, filteredSize] = await Promise.all(promises);\n    if (!counters) {\n      counters = {\n        size,\n        filteredSize\n      };\n    }\n    this.onColumnsChange.emit(dataSourceModifier.columns);\n\n    return {\n      res: dataResponse.res,\n      data: dataResponse.data,\n      paging: dataResponse.paging,\n      ...counters\n    };\n  }\n\n  configChange(config) {\n    this.subAssetsGridService.saveConfig(config);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { IIdentified, IManagedObject, InventoryService } from '@c8y/client';\nimport { GroupForm } from './add-group.model';\nimport { GroupFragment } from '@c8y/ngx-components/assets-navigator';\n\n@Injectable()\nexport class AddGroupService {\n  private GROUP_FRAGMENT_TYPE = 'c8y_IsDeviceGroup';\n\n  constructor(private inventoryService: InventoryService) {}\n\n  async createGroupAndAssignDevices(\n    groupForm: GroupForm,\n    groupContextId: string | number,\n    selectedDevices: string[]\n  ): Promise<IManagedObject | IIdentified> {\n    let group: IManagedObject | IIdentified;\n    const { name, description } = groupForm;\n    const newGroupMO = this.getGroupMO(name, description, groupContextId);\n\n    if (groupContextId) {\n      group = (await this.inventoryService.childAssetsCreate(newGroupMO, groupContextId)).data;\n    } else {\n      group = (await this.inventoryService.create(newGroupMO)).data;\n    }\n\n    if (selectedDevices.length > 0) {\n      await this.assignDevices(group.id, selectedDevices);\n    }\n\n    return group;\n  }\n\n  private getGroupMO(\n    name: string,\n    description: string = '',\n    groupContextId: string | number\n  ): Partial<IManagedObject> {\n    const group = {\n      type: this.getGroupType(groupContextId),\n      [this.GROUP_FRAGMENT_TYPE]: {},\n      name,\n      c8y_Notes: description\n    };\n\n    return group;\n  }\n\n  private getGroupType(\n    groupContextId: string | number\n  ): GroupFragment.subGroupType | GroupFragment.groupType {\n    return groupContextId ? GroupFragment.subGroupType : GroupFragment.groupType;\n  }\n\n  private async assignDevices(id: string | number, selectedDevices: string[]) {\n    const promises = [];\n\n    selectedDevices.forEach(moId => {\n      promises.push(this.inventoryService.childAssetsAdd(moId, id));\n    });\n\n    return await Promise.all(promises);\n  }\n}\n","import {\n  Component,\n  Output,\n  EventEmitter,\n  ViewChild,\n  Input,\n  HostListener,\n  ElementRef\n} from '@angular/core';\nimport { FormGroup, Validators, FormBuilder } from '@angular/forms';\nimport { Subscription } from 'rxjs';\nimport { DeviceGridService } from '@c8y/ngx-components/device-grid';\nimport { C8yStepper, Pagination, AlertService, gettext } from '@c8y/ngx-components';\nimport { AddGroupService } from './add-group.service';\nimport { SubAssetsService } from '../sub-assets.service';\nimport { IManagedObject } from '@c8y/client';\n\n@Component({\n  selector: 'c8y-add-group',\n  templateUrl: './add-group.component.html'\n})\nexport class AddGroupComponent {\n  @Input() currentGroupId: string;\n  @Input() refresh = new EventEmitter<any>();\n  @Output() onDeviceQueryStringChange: EventEmitter<string> = new EventEmitter<string>();\n  @Output() onCancel = new EventEmitter<any>();\n  @ViewChild(C8yStepper, { static: false })\n  stepper: C8yStepper;\n  @ViewChild('nameRef', { static: false })\n  nameInputRef: ElementRef;\n  deviceQueryStringOutput: string;\n  formGroupStepOne: FormGroup;\n  pendingStatus: boolean = false;\n  pagination: Pagination = { pageSize: 20, currentPage: 1 };\n  selected: string[] = [];\n  subscription: Subscription;\n  canCreateGroup: boolean = false;\n  canAssignDevice: boolean = false;\n\n  readonly ITEMS_SELECT_LIMIT: number = 15;\n  readonly btnLabels = {\n    next: gettext('Next'),\n    cancel: gettext('Cancel'),\n    create: gettext('Create')\n  };\n\n  private nameInput: HTMLInputElement;\n\n  constructor(\n    protected deviceGridService: DeviceGridService,\n    private fb: FormBuilder,\n    private addGroupService: AddGroupService,\n    private alert: AlertService,\n    private subAssetsService: SubAssetsService\n  ) {}\n\n  @HostListener('document:keydown.enter', ['$event']) onEnterKeyDown(event: KeyboardEvent) {\n    // Order matters! Needs to be placed before this.stepper.next\n    if ((this.isGroupDetailsStep() && !this.canAssignDevice) || this.isAssignDeviceStep()) {\n      this.createGroup();\n      return;\n    }\n    this.stepper.next();\n  }\n\n  @HostListener('document:keydown.escape', ['$event']) onEscapeKeyDown(event: KeyboardEvent) {\n    this.onCancel.emit();\n  }\n\n  async ngOnInit() {\n    this.formGroupStepOne = this.fb.group({\n      name: ['', Validators.required],\n      description: ['']\n    });\n    this.subscription = this.onCancel.subscribe(() => this.resetStepper());\n    this.canCreateGroup = this.subAssetsService.canCreateGroup();\n    this.canAssignDevice = await this.subAssetsService.canAssignDevice({\n      id: this.currentGroupId\n    } as IManagedObject);\n  }\n\n  ngAfterViewInit() {\n    this.nameInput = this.nameInputRef.nativeElement as HTMLInputElement;\n    this.setFocusOnNameInput();\n  }\n\n  async createGroup() {\n    if (this.canCreateGroup === false) {\n      return;\n    }\n\n    this.pendingStatus = true;\n    await this.addGroupService.createGroupAndAssignDevices(\n      this.formGroupStepOne.value,\n      this.currentGroupId,\n      this.selected\n    );\n\n    this.pendingStatus = false;\n    this.resetStepper();\n    this.alert.success(gettext('Group created.'));\n\n    this.refresh.emit();\n    this.onCancel.emit();\n  }\n\n  onSelected(selectedDevicesIDs: string[]) {\n    this.selected = selectedDevicesIDs;\n  }\n\n  resetStepper() {\n    this.stepper.reset();\n    this.stepper.selectedIndex = 1;\n    this.selected = [];\n  }\n\n  ngOnDestroy() {\n    if (this.subscription) {\n      this.subscription.unsubscribe();\n    }\n  }\n\n  private isGroupDetailsStep() {\n    return this.stepper.selectedIndex === 0;\n  }\n\n  private isAssignDeviceStep() {\n    return this.stepper.selectedIndex === 1;\n  }\n\n  private setFocusOnNameInput() {\n    if (this.nameInput) {\n      this.nameInput.focus();\n      this.nameInput.select();\n    }\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CoreModule, HOOK_ROUTE } from '@c8y/ngx-components';\nimport { DeviceGridModule } from '@c8y/ngx-components/device-grid';\nimport { AddGroupComponent } from './add-group.component';\nimport { AddGroupService } from './add-group.service';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\n@NgModule({\n  declarations: [AddGroupComponent],\n  imports: [CoreModule, DeviceGridModule, FormsModule, ReactiveFormsModule],\n  entryComponents: [AddGroupComponent],\n  exports: [AddGroupComponent],\n  providers: [\n    {\n      provide: HOOK_ROUTE,\n      useValue: [\n        {\n          path: 'add-group',\n          component: AddGroupComponent\n        }\n      ],\n      multi: true\n    },\n    AddGroupService\n  ]\n})\nexport class AddGroupModule {}\n","import { Component, EventEmitter, OnInit } from '@angular/core';\nimport { Permissions } from '@c8y/ngx-components';\nimport { SubAssetsService } from './sub-assets.service';\n\n@Component({\n  selector: 'c8y-groups-name',\n  templateUrl: './groups.component.html'\n})\nexport class GroupsComponent implements OnInit {\n  refresh: EventEmitter<any> = new EventEmitter();\n  showAddGroup = false;\n  filterable: boolean = true;\n  sortable: boolean = true;\n  shouldDisableAddGroup: boolean = false;\n  constructor(private permissions: Permissions, private subAssetsService: SubAssetsService) {}\n\n  ngOnInit() {\n    if (!this.permissions.hasRole('ROLE_INVENTORY_READ')) {\n      this.sortable = false;\n    }\n    this.shouldDisableAddGroup = !this.subAssetsService.canCreateGroup();\n  }\n}\n","import {\n  Component, EventEmitter,\n  HostListener, Input,\n  Output, TemplateRef, ViewChild\n} from '@angular/core';\nimport { IManagedObject, InventoryService } from '@c8y/client';\nimport {\n  ActionControl, AlertService, GainsightService, gettext, HeaderActionControl, Pagination, Row\n} from '@c8y/ngx-components';\nimport { SubAssetsService } from '../sub-assets.service';\n\n@Component({\n  selector: 'c8y-assign-devices',\n  templateUrl: './assign-devices.component.html'\n})\nexport class AssignDevicesComponent {\n  @Input() currentGroupId: string;\n  @Input() refresh = new EventEmitter<any>();\n  @Output() onCancel = new EventEmitter<any>();\n  @Output() onShowChildDevices = new EventEmitter<boolean>();\n  @Output() selectedDevice = new EventEmitter<IManagedObject>();\n  @ViewChild('showDevicesToggle', { read: TemplateRef }) showDevicesToggle: TemplateRef<any>;\n\n  deviceQueryStringOutput: string;\n  pendingStatus: boolean = false;\n  pagination: Pagination = { pageSize: 20, currentPage: 1 };\n  selected: string[] = [];\n  baseQuery: any;\n  canAssignDevice: boolean = false;\n  actionControls: ActionControl[] = [];\n  headerActionControls: HeaderActionControl[] = [];\n  showChildren: boolean = false;\n  readonly isSelectable = true;\n\n  constructor(\n    private alert: AlertService,\n    private subAssetsService: SubAssetsService,\n    private inventoryService: InventoryService,\n    private gainsightService: GainsightService\n  ) { }\n\n  @HostListener('document:keydown.enter', ['$event']) onEnterKeyDown(event: KeyboardEvent) {\n    if (this.selected.length > 0) {\n      this.assignDevices();\n    }\n  }\n\n  @HostListener('document:keydown.escape', ['$event']) onEscapeKeyDown(event: KeyboardEvent) {\n    this.onCancel.emit();\n  }\n\n  async ngOnInit() {\n    this.setNotIncludedInGroupQuery();\n    this.canAssignDevice = await this.subAssetsService.canAssignDevice({\n      id: this.currentGroupId\n    } as IManagedObject);\n    this.setHeaderActionControls();\n  }\n\n  setNotIncludedInGroupQuery() {\n    const notIncludedInGroupQuery = { __not: { __bygroupid: this.currentGroupId } };\n    this.baseQuery = notIncludedInGroupQuery;\n  }\n\n  setHeaderActionControls() {\n    const headerActionControls: HeaderActionControl[] = [];\n    const showChildDevices = {\n      type: 'DISPLAY_CHILD_DEVICES_BUTTON',\n      text: gettext('Display child devices button'),\n      template: this.showDevicesToggle,\n      callback: () => {\n        this.showChildren = !this.showChildren;\n        this.setActionControls(this.showChildren);\n        this.gainsightService.triggerEvent('assignDevices:DisplayChildDevices');\n      }\n    };\n    headerActionControls.push(showChildDevices);\n    this.headerActionControls = headerActionControls;\n  }\n\n  setActionControls(showChildren: boolean) {\n    const actionControls: ActionControl[] = [];\n\n    const selectChildrenAction: ActionControl = {\n      type: 'SHOW_TARGET_CHILD_DEVICES',\n      icon: 'enter-bottom',\n      text: gettext('Show target child devices'),\n      callback: (asset: Row) => this.selectChildren(asset as IManagedObject),\n      showIf: (asset: Row) => asset.childDevices.references.length > 0\n    };\n\n    if (showChildren) {\n      actionControls.push(selectChildrenAction);\n    }\n\n    this.actionControls = actionControls;\n    this.refresh.emit();\n  }\n\n  async assignDevices() {\n    if (this.canAssignDevice === false) {\n      return;\n    }\n    this.pendingStatus = true;\n\n    try {\n      await this.inventoryService.childAssetsBulkAdd(this.selected, this.currentGroupId);\n      this.refresh.emit();\n      this.alert.success(gettext('Devices assigned to the group.'));\n    } catch (error) {\n      this.alert.danger(gettext('Could not assign devices to the group'), error);\n    }\n    this.pendingStatus = false;\n    this.selected = [];\n    this.onCancel.emit();\n  }\n\n  onSelected(selectedDevicesIDs: string[]) {\n    this.selected = selectedDevicesIDs;\n  }\n\n  selectChildren(asset: IManagedObject) {\n    this.onShowChildDevices.emit(true);\n    this.selectedDevice.emit(asset);\n  }\n}\n","import { Component, Input, Output, EventEmitter, HostListener } from '@angular/core';\nimport { AlertService, gettext } from '@c8y/ngx-components';\nimport { InventoryService } from '@c8y/client';\nimport { SubAssetsService } from '../sub-assets.service';\nimport { IManagedObject } from '@c8y/client';\n\n@Component({\n  selector: 'c8y-assign-child-devices',\n  templateUrl: './assign-child-devices.component.html'\n})\nexport class AssignChildDevicesComponent {\n  @Input() currentGroupId: string;\n  @Input() parentDevice: IManagedObject;\n  @Output() onCancel = new EventEmitter<any>();\n  @Input() refresh = new EventEmitter<any>();\n\n  selected: string[] = [];\n  baseQuery: any;\n  canAssignDevice: boolean = false;\n  pendingStatus: boolean = false;\n\n  constructor(\n    private alert: AlertService,\n    private subAssetsService: SubAssetsService,\n    private inventoryService: InventoryService\n  ) {}\n\n  @HostListener('document:keydown.enter', ['$event']) onEnterKeyDown(event: KeyboardEvent) {\n    if (this.selected.length > 0) {\n      this.assignDevices();\n    }\n  }\n\n  @HostListener('document:keydown.escape', ['$event']) onEscapeKeyDown(event: KeyboardEvent) {\n    this.onCancel.emit();\n  }\n\n  async ngOnInit() {\n    this.setNotIncludedInGroupQuery();\n    this.canAssignDevice = await this.subAssetsService.canAssignDevice({\n      id: this.currentGroupId\n    } as IManagedObject);\n  }\n\n  setNotIncludedInGroupQuery() {\n    const notIncludedInGroupQuery = { __not: { __bygroupid: this.currentGroupId } };\n    this.baseQuery = notIncludedInGroupQuery;\n  }\n\n  async assignDevices() {\n    if (this.canAssignDevice === false) {\n      return;\n    }\n    this.pendingStatus = true;\n\n    try {\n      await this.inventoryService.childAssetsBulkAdd(this.selected, this.currentGroupId);\n      this.refresh.emit();\n      this.alert.success(gettext('Child devices assigned to the group.'));\n    } catch (error) {\n      this.alert.danger(gettext('Could not assign child devices to the group'), error);\n    }\n    this.pendingStatus = false;\n    this.selected = [];\n    this.onCancel.emit();\n  }\n\n  onSelected(selectedDevicesIDs: string[]) {\n    this.selected = selectedDevicesIDs;\n  }\n}\n","import { Component, Input, OnChanges, SimpleChanges } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport {\n  IManagedObject,\n  IManagedObjectBinary,\n  InventoryBinaryService,\n  InventoryService\n} from '@c8y/client';\nimport { AlertService, AssetTypesService, ContextRouteService, gettext } from '@c8y/ngx-components';\nimport { AssetPropertiesItem } from './asset-properties.model';\n\n@Component({\n  selector: 'c8y-asset-properties',\n  templateUrl: './asset-properties.component.html'\n})\nexport class AssetPropertiesComponent implements OnChanges {\n  @Input()\n  asset: IManagedObject;\n  @Input()\n  properties: IManagedObject[] = [];\n  assetType: IManagedObject;\n  customProperties: AssetPropertiesItem[] = [];\n  isEdit = false;\n  isLoading = false;\n\n  constructor(\n    private assetTypes: AssetTypesService,\n    private inventory: InventoryService,\n    private inventoryBinary: InventoryBinaryService,\n    private alert: AlertService,\n    private contextRouteService: ContextRouteService,\n    private activatedRoute: ActivatedRoute\n  ) {}\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes.asset) {\n      // Back button handling, as component is not destroyed\n      this.assetType = undefined;\n      this.customProperties = [];\n      this.loadAsset();\n    }\n  }\n\n  async loadAsset() {\n    this.isLoading = true;\n    this.assetType = this.assetTypes.getAssetTypeByName(this.asset.type);\n    this.customProperties = await this.resolveCustomProperties(this.properties);\n    this.isLoading = false;\n  }\n\n  async resolveCustomProperties(managedObjects: IManagedObject[]) {\n    const properties = [];\n    for (const mo of managedObjects) {\n      if (mo.c8y_JsonSchema) {\n        const items = await this.parseItem(mo, mo.c8y_JsonSchema.properties, this.asset);\n        properties.push(items[0]);\n      }\n    }\n    return properties;\n  }\n\n  async parseItem(mo: IManagedObject, properties, asset): Promise<AssetPropertiesItem[]> {\n    if (!asset) {\n      return [];\n    }\n    const keys = Object.keys(properties);\n    const items: AssetPropertiesItem[] = [];\n    for (const key of keys) {\n      let value = asset[key];\n      const type = properties[key].type;\n      const title = properties[key].title;\n      let file;\n      if (type === 'file' && value) {\n        const fileId = typeof value === 'object' ? value[0]?.file?.id : value;\n        const fileData = await this.getFileManagedObject(fileId);\n        file = fileData;\n        value = [fileData];\n      }\n      items.push({\n        key,\n        value,\n        label: title || mo.label,\n        type,\n        description: mo.description,\n        file,\n        complex:\n          type === 'object'\n            ? await this.parseItem(mo, properties[key].properties, asset[key])\n            : undefined,\n        isEdit: false,\n        jsonSchema: mo.c8y_JsonSchema\n      });\n    }\n    return items;\n  }\n\n  toggleEdit(prop: AssetPropertiesItem) {\n    prop.isEdit = !prop.isEdit;\n  }\n\n  async getFileManagedObject(id: string) {\n    try {\n      const { data } = await this.inventory.detail(id);\n      return data;\n    } catch (ex) {\n      this.alert.addServerFailure(ex);\n    }\n  }\n\n  async save(model, prop: AssetPropertiesItem) {\n    try {\n      if (prop.type === 'object') {\n        model[prop.key] = await this.uploadFiles(model[prop.key], prop.value);\n      } else {\n        model = await this.uploadFiles(model, prop.value);\n      }\n      const updatedAsset = { id: this.asset.id, ...model };\n      const { data } = await this.inventory.update(updatedAsset);\n      this.toggleEdit(prop);\n      this.asset = data;\n      await this.loadAsset();\n      this.contextRouteService.refreshContext();\n      this.alert.success(gettext('Asset properties updated.'));\n      this.contextRouteService.setContext(this.activatedRoute, data);\n    } catch (ex) {\n      this.alert.addServerFailure(ex);\n    }\n  }\n\n  private async uploadFiles(model: object, moId?: IManagedObjectBinary[]): Promise<object> {\n    const keys = Object.keys(model);\n    for (const key of keys) {\n      if (Array.isArray(model[key]) && model[key][0]?.file instanceof File) {\n        try {\n          const upload = await this.inventoryBinary.create(model[key][0].file);\n          try {\n            if (moId && moId[0]) {\n              await this.inventory.childAdditionsRemove(moId[0], this.asset.id);\n            }\n          } catch (ex) {\n            this.alert.addServerFailure(ex);\n          }\n          model[key] = upload.data.id;\n          await this.inventory.childAdditionsAdd(upload.data.id, this.asset.id);\n        } catch (ex) {\n          this.alert.addServerFailure(ex);\n        }\n      }\n    }\n    return model;\n  }\n}\n","import { Component, Input, OnChanges, SimpleChanges } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\nimport { IManagedObjectBinary } from '@c8y/client';\nimport { AlertService, C8yJSONSchema, gettext, FilesService } from '@c8y/ngx-components';\nimport { FormlyFieldConfig } from '@ngx-formly/core';\nimport { AssetPropertiesItem } from './asset-properties.model';\nimport { JSONSchema7 } from 'json-schema';\n\n@Component({\n  selector: 'c8y-asset-properties-item',\n  templateUrl: './asset-properties-item.component.html'\n})\nexport class AssetPropertiesItemComponent implements AssetPropertiesItem, OnChanges {\n  @Input()\n  key: string;\n  @Input()\n  value: any;\n  @Input()\n  label: string;\n  @Input()\n  type: string;\n  @Input()\n  file: IManagedObjectBinary;\n  @Input()\n  complex: AssetPropertiesItem[];\n  @Input()\n  isEdit: boolean;\n  @Input()\n  jsonSchema: JSONSchema7;\n\n  form: FormGroup;\n  fields: FormlyFieldConfig[];\n  model: any;\n  previewImage;\n\n  constructor(\n    private alert: AlertService,\n    private c8yJsonSchemaService: C8yJSONSchema,\n    public filesService: FilesService\n  ) {}\n\n  async ngOnChanges(changes: SimpleChanges): Promise<void> {\n    if (changes.isEdit) {\n      this.resolveJsonSchema();\n      await this.resolveFile();\n    }\n  }\n\n  private async resolveFile() {\n    if (this.file) {\n      try {\n        const imageFile = await this.filesService.getFile(this.file);\n        this.previewImage = await this.getPreviewIfImage(imageFile);\n      } catch (ex) {\n        this.alert.danger(gettext('File could not be loaded.'));\n      }\n    }\n  }\n\n  private resolveJsonSchema() {\n    if (this.jsonSchema) {\n      const fieldConfig = this.c8yJsonSchemaService.toFieldConfig(this.jsonSchema, this.jsonSchema);\n      this.form = new FormGroup({});\n      this.fields = [fieldConfig];\n      this.model = {\n        [this.key]: this.value\n      };\n    }\n  }\n\n  private async getPreviewIfImage(imageFile: File) {\n    if (this.filesService.haveValidExtensions(imageFile, 'image')) {\n      return this.filesService.toBase64(imageFile);\n    }\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CoreModule, gettext, HOOK_ROUTE, ViewContext, RouterModule } from '@c8y/ngx-components';\nimport { DeviceGridModule } from '@c8y/ngx-components/device-grid';\nimport { PopoverModule } from 'ngx-bootstrap/popover';\nimport { AddGroupModule } from './add-group/add-group.module';\nimport { AssetTypeCellRendererComponent } from './columns/asset-type.cell-renderer.component';\nimport { DeleteAssetsModalComponent } from './delete-assets-modal/delete-assets-modal.component';\nimport { GroupInfoComponent } from './group-info.component';\nimport { GroupsComponent } from './groups.component';\nimport { SubAssetsGridComponent } from './sub-assets-grid.component';\nimport { SubAssetsComponent } from './sub-assets.component';\nimport { SubAssetsService } from './sub-assets.service';\nimport { UnassignModalComponent } from './unassign-assets-modal/unassign-modal.component';\nimport { AssignDevicesComponent } from './assign-devices/assign-devices.component';\nimport { AssignChildDevicesComponent } from './assign-devices/assign-child-devices.component';\nimport { AssetPropertiesComponent } from './asset-properties.component';\nimport { AssetPropertiesItemComponent } from './asset-properties-item.component';\n\n@NgModule({\n  declarations: [\n    SubAssetsComponent,\n    SubAssetsGridComponent,\n    AssetTypeCellRendererComponent,\n    GroupsComponent,\n    GroupInfoComponent,\n    DeleteAssetsModalComponent,\n    UnassignModalComponent,\n    AssignDevicesComponent,\n    AssignChildDevicesComponent,\n    AssetPropertiesComponent,\n    AssetPropertiesItemComponent\n  ],\n  imports: [CoreModule, DeviceGridModule, AddGroupModule, PopoverModule],\n  entryComponents: [\n    SubAssetsComponent,\n    AssetTypeCellRendererComponent,\n    GroupsComponent,\n    DeleteAssetsModalComponent,\n    UnassignModalComponent\n  ],\n  exports: [],\n  providers: [\n    {\n      provide: HOOK_ROUTE,\n      useValue: [\n        {\n          context: ViewContext.Group,\n          path: 'subassets',\n          priority: 1000,\n          icon: 'c8y-group-open',\n          label: gettext('Subassets'),\n          component: SubAssetsComponent,\n          featureId: 'subassets'\n        },\n        {\n          path: 'group',\n          component: GroupsComponent\n        }\n      ],\n      multi: true\n    },\n    SubAssetsService\n  ]\n})\nexport class SubAssetsModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n\nexport {AddGroupComponent as g} from './add-group/add-group.component';\nexport {AddGroupModule as f} from './add-group/add-group.module';\nexport {AddGroupService as h} from './add-group/add-group.service';\nexport {AssetPropertiesItemComponent as e} from './asset-properties-item.component';\nexport {AssetPropertiesComponent as d} from './asset-properties.component';\nexport {AssetTypeCellRendererComponent as a} from './columns/asset-type.cell-renderer.component';\nexport {DeleteAssetsModalComponent as b} from './delete-assets-modal/delete-assets-modal.component';\nexport {UnassignModalComponent as c} from './unassign-assets-modal/unassign-modal.component';"]}