{"version":3,"file":"c8y-ngx-components-datapoint-library-services.js","sources":["../../datapoint-library/services/datapoint-parser.service.ts","../../datapoint-library/services/c8y-ngx-components-datapoint-library-services.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { IManagedObject } from '@c8y/client';\n\n@Injectable({ providedIn: 'root' })\nexport class DatapointParserService {\n  protected readonly attributeToParse = [\n    'target',\n    'yellowRangeMin',\n    'yellowRangeMax',\n    'redRangeMin',\n    'redRangeMax',\n    'min',\n    'max'\n  ] as const;\n\n  parseDatapoints(datapoints: IManagedObject[]) {\n    return datapoints.map(dp => this.parseDatapoint(dp));\n  }\n\n  parseDatapoint(datapoint: IManagedObject): IManagedObject {\n    if (!datapoint.c8y_Kpi) {\n      return datapoint;\n    }\n\n    const kpi = datapoint.c8y_Kpi;\n    for (const key of this.attributeToParse) {\n      if (typeof kpi[key] === 'string') {\n        const num = Number.parseFloat(kpi[key]);\n        if (!Number.isNaN(num)) {\n          kpi[key] = num;\n        } else {\n          delete kpi[key];\n        }\n      }\n    }\n\n    return datapoint;\n  }\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":[],"mappings":";;;MAIa,sBAAsB;IADnC;QAEqB,qBAAgB,GAAG;YACpC,QAAQ;YACR,gBAAgB;YAChB,gBAAgB;YAChB,aAAa;YACb,aAAa;YACb,KAAK;YACL,KAAK;SACG,CAAC;KAyBZ;IAvBC,eAAe,CAAC,UAA4B;QAC1C,OAAO,UAAU,CAAC,GAAG,CAAC,EAAE,IAAI,IAAI,CAAC,cAAc,CAAC,EAAE,CAAC,CAAC,CAAC;KACtD;IAED,cAAc,CAAC,SAAyB;QACtC,IAAI,CAAC,SAAS,CAAC,OAAO,EAAE;YACtB,OAAO,SAAS,CAAC;SAClB;QAED,MAAM,GAAG,GAAG,SAAS,CAAC,OAAO,CAAC;QAC9B,KAAK,MAAM,GAAG,IAAI,IAAI,CAAC,gBAAgB,EAAE;YACvC,IAAI,OAAO,GAAG,CAAC,GAAG,CAAC,KAAK,QAAQ,EAAE;gBAChC,MAAM,GAAG,GAAG,MAAM,CAAC,UAAU,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;gBACxC,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE;oBACtB,GAAG,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC;iBAChB;qBAAM;oBACL,OAAO,GAAG,CAAC,GAAG,CAAC,CAAC;iBACjB;aACF;SACF;QAED,OAAO,SAAS,CAAC;KAClB;;;;YAlCF,UAAU,SAAC,EAAE,UAAU,EAAE,MAAM,EAAE;;;ACHlC;;;;;;"}